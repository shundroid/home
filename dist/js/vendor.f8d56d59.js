webpackJsonp([0],{"/5sW":function(t,e,n){"use strict";(function(t){var n=Object.freeze({});function r(t){return void 0===t||null===t}function i(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function u(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function l(t){return null!==t&&"object"===typeof t}var s=Object.prototype.toString;function c(t){return"[object Object]"===s.call(t)}function f(t){return"[object RegExp]"===s.call(t)}function h(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return null==t?"":"object"===typeof t?JSON.stringify(t,null,2):String(t)}function p(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var n=Object.create(null),r=t.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}g("slot,component",!0);var v=g("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var m=Object.prototype.hasOwnProperty;function b(t,e){return m.call(t,e)}function x(t){var e=Object.create(null);return function(n){var r=e[n];return r||(e[n]=t(n))}}var _=/-(\w)/g,w=x(function(t){return t.replace(_,function(t,e){return e?e.toUpperCase():""})}),M=x(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),S=/\B([A-Z])/g,k=x(function(t){return t.replace(S,"-$1").toLowerCase()});function O(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function E(t,e){e=e||0;var n=t.length-e,r=new Array(n);while(n--)r[n]=t[n+e];return r}function A(t,e){for(var n in e)t[n]=e[n];return t}function C(t){for(var e={},n=0;n<t.length;n++)t[n]&&A(e,t[n]);return e}function T(t,e,n){}var P=function(t,e,n){return!1},j=function(t){return t};function N(t,e){if(t===e)return!0;var n=l(t),r=l(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var i=Array.isArray(t),o=Array.isArray(e);if(i&&o)return t.length===e.length&&t.every(function(t,n){return N(t,e[n])});if(i||o)return!1;var a=Object.keys(t),u=Object.keys(e);return a.length===u.length&&a.every(function(n){return N(t[n],e[n])})}catch(t){return!1}}function L(t,e){for(var n=0;n<t.length;n++)if(N(t[n],e))return n;return-1}function R(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var D="data-server-rendered",z=["component","directive","filter"],I=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:T,parsePlatformTagName:j,mustUseProp:P,_lifecycleHooks:I};function B(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function U(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var H=/[^\w.$]/;function q(t){if(!H.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var $,W="__proto__"in{},G="undefined"!==typeof window,X="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,Y=X&&WXEnvironment.platform.toLowerCase(),V=G&&window.navigator.userAgent.toLowerCase(),K=V&&/msie|trident/.test(V),Z=V&&V.indexOf("msie 9.0")>0,J=V&&V.indexOf("edge/")>0,Q=V&&V.indexOf("android")>0||"android"===Y,tt=V&&/iphone|ipad|ipod|ios/.test(V)||"ios"===Y,et=(V&&/chrome\/\d+/.test(V),{}.watch),nt=!1;if(G)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){nt=!0}}),window.addEventListener("test-passive",null,rt)}catch(t){}var it=function(){return void 0===$&&($=!G&&"undefined"!==typeof t&&"server"===t["process"].env.VUE_ENV),$},ot=G&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function at(t){return"function"===typeof t&&/native code/.test(t.toString())}var ut,lt="undefined"!==typeof Symbol&&at(Symbol)&&"undefined"!==typeof Reflect&&at(Reflect.ownKeys);ut="undefined"!==typeof Set&&at(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var st=T,ct=0,ft=function(){this.id=ct++,this.subs=[]};ft.prototype.addSub=function(t){this.subs.push(t)},ft.prototype.removeSub=function(t){y(this.subs,t)},ft.prototype.depend=function(){ft.target&&ft.target.addDep(this)},ft.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},ft.target=null;var ht=[];function dt(t){ft.target&&ht.push(ft.target),ft.target=t}function pt(){ft.target=ht.pop()}var gt=function(t,e,n,r,i,o,a,u){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=u,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},vt={child:{configurable:!0}};vt.child.get=function(){return this.componentInstance},Object.defineProperties(gt.prototype,vt);var yt=function(t){void 0===t&&(t="");var e=new gt;return e.text=t,e.isComment=!0,e};function mt(t){return new gt(void 0,void 0,void 0,String(t))}function bt(t,e){var n=t.componentOptions,r=new gt(t.tag,t.data,t.children,t.text,t.elm,t.context,n,t.asyncFactory);return r.ns=t.ns,r.isStatic=t.isStatic,r.key=t.key,r.isComment=t.isComment,r.fnContext=t.fnContext,r.fnOptions=t.fnOptions,r.fnScopeId=t.fnScopeId,r.isCloned=!0,e&&(t.children&&(r.children=xt(t.children,!0)),n&&n.children&&(n.children=xt(n.children,!0))),r}function xt(t,e){for(var n=t.length,r=new Array(n),i=0;i<n;i++)r[i]=bt(t[i],e);return r}var _t=Array.prototype,wt=Object.create(_t);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=_t[t];U(wt,t,function(){var n=[],r=arguments.length;while(r--)n[r]=arguments[r];var i,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2);break}return i&&a.observeArray(i),a.dep.notify(),o})});var Mt=Object.getOwnPropertyNames(wt),St={shouldConvert:!0},kt=function(t){if(this.value=t,this.dep=new ft,this.vmCount=0,U(t,"__ob__",this),Array.isArray(t)){var e=W?Ot:Et;e(t,wt,Mt),this.observeArray(t)}else this.walk(t)};function Ot(t,e,n){t.__proto__=e}function Et(t,e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];U(t,o,e[o])}}function At(t,e){var n;if(l(t)&&!(t instanceof gt))return b(t,"__ob__")&&t.__ob__ instanceof kt?n=t.__ob__:St.shouldConvert&&!it()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new kt(t)),e&&n&&n.vmCount++,n}function Ct(t,e,n,r,i){var o=new ft,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var u=a&&a.get,l=a&&a.set,s=!i&&At(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=u?u.call(t):n;return ft.target&&(o.depend(),s&&(s.dep.depend(),Array.isArray(e)&&jt(e))),e},set:function(e){var r=u?u.call(t):n;e===r||e!==e&&r!==r||(l?l.call(t,e):n=e,s=!i&&At(e),o.notify())}})}}function Tt(t,e,n){if(Array.isArray(t)&&h(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Ct(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Pt(t,e){if(Array.isArray(t)&&h(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||b(t,e)&&(delete t[e],n&&n.dep.notify())}}function jt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&jt(e)}kt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Ct(t,e[n],t[e[n]])},kt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)At(t[e])};var Nt=F.optionMergeStrategies;function Lt(t,e){if(!e)return t;for(var n,r,i,o=Object.keys(e),a=0;a<o.length;a++)n=o[a],r=t[n],i=e[n],b(t,n)?c(r)&&c(i)&&Lt(r,i):Tt(t,n,i);return t}function Rt(t,e,n){return n?function(){var r="function"===typeof e?e.call(n,n):e,i="function"===typeof t?t.call(n,n):t;return r?Lt(r,i):i}:e?t?function(){return Lt("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Dt(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function zt(t,e,n,r){var i=Object.create(t||null);return e?A(i,e):i}Nt.data=function(t,e,n){return n?Rt(t,e,n):e&&"function"!==typeof e?t:Rt(t,e)},I.forEach(function(t){Nt[t]=Dt}),z.forEach(function(t){Nt[t+"s"]=zt}),Nt.watch=function(t,e,n,r){if(t===et&&(t=void 0),e===et&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var i={};for(var o in A(i,t),e){var a=i[o],u=e[o];a&&!Array.isArray(a)&&(a=[a]),i[o]=a?a.concat(u):Array.isArray(u)?u:[u]}return i},Nt.props=Nt.methods=Nt.inject=Nt.computed=function(t,e,n,r){if(!t)return e;var i=Object.create(null);return A(i,t),e&&A(i,e),i},Nt.provide=Rt;var It=function(t,e){return void 0===e?t:e};function Ft(t,e){var n=t.props;if(n){var r,i,o,a={};if(Array.isArray(n)){r=n.length;while(r--)i=n[r],"string"===typeof i&&(o=w(i),a[o]={type:null})}else if(c(n))for(var u in n)i=n[u],o=w(u),a[o]=c(i)?i:{type:i};else 0;t.props=a}}function Bt(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var i=0;i<n.length;i++)r[n[i]]={from:n[i]};else if(c(n))for(var o in n){var a=n[o];r[o]=c(a)?A({from:o},a):{from:a}}else 0}}function Ut(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"===typeof r&&(e[n]={bind:r,update:r})}}function Ht(t,e,n){"function"===typeof e&&(e=e.options),Ft(e,n),Bt(e,n),Ut(e);var r=e.extends;if(r&&(t=Ht(t,r,n)),e.mixins)for(var i=0,o=e.mixins.length;i<o;i++)t=Ht(t,e.mixins[i],n);var a,u={};for(a in t)l(a);for(a in e)b(t,a)||l(a);function l(r){var i=Nt[r]||It;u[r]=i(t[r],e[r],n,r)}return u}function qt(t,e,n,r){if("string"===typeof n){var i=t[e];if(b(i,n))return i[n];var o=w(n);if(b(i,o))return i[o];var a=M(o);if(b(i,a))return i[a];var u=i[n]||i[o]||i[a];return u}}function $t(t,e,n,r){var i=e[t],o=!b(n,t),a=n[t];if(Xt(Boolean,i.type)&&(o&&!b(i,"default")?a=!1:Xt(String,i.type)||""!==a&&a!==k(t)||(a=!0)),void 0===a){a=Wt(r,i,t);var u=St.shouldConvert;St.shouldConvert=!0,At(a),St.shouldConvert=u}return a}function Wt(t,e,n){if(b(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof r&&"Function"!==Gt(e.type)?r.call(t):r}}function Gt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Xt(t,e){if(!Array.isArray(e))return Gt(e)===Gt(t);for(var n=0,r=e.length;n<r;n++)if(Gt(e[n])===Gt(t))return!0;return!1}function Yt(t,e,n){if(e){var r=e;while(r=r.$parent){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{var a=!1===i[o].call(r,t,e,n);if(a)return}catch(t){Vt(t,r,"errorCaptured hook")}}}Vt(t,e,n)}function Vt(t,e,n){if(F.errorHandler)try{return F.errorHandler.call(null,t,e,n)}catch(t){Kt(t,null,"config.errorHandler")}Kt(t,e,n)}function Kt(t,e,n){if(!G&&!X||"undefined"===typeof console)throw t;console.error(t)}var Zt,Jt,Qt=[],te=!1;function ee(){te=!1;var t=Qt.slice(0);Qt.length=0;for(var e=0;e<t.length;e++)t[e]()}var ne=!1;if("undefined"!==typeof setImmediate&&at(setImmediate))Jt=function(){setImmediate(ee)};else if("undefined"===typeof MessageChannel||!at(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Jt=function(){setTimeout(ee,0)};else{var re=new MessageChannel,ie=re.port2;re.port1.onmessage=ee,Jt=function(){ie.postMessage(1)}}if("undefined"!==typeof Promise&&at(Promise)){var oe=Promise.resolve();Zt=function(){oe.then(ee),tt&&setTimeout(T)}}else Zt=Jt;function ae(t){return t._withTask||(t._withTask=function(){ne=!0;var e=t.apply(null,arguments);return ne=!1,e})}function ue(t,e){var n;if(Qt.push(function(){if(t)try{t.call(e)}catch(t){Yt(t,e,"nextTick")}else n&&n(e)}),te||(te=!0,ne?Jt():Zt()),!t&&"undefined"!==typeof Promise)return new Promise(function(t){n=t})}var le=new ut;function se(t){ce(t,le),le.clear()}function ce(t,e){var n,r,i=Array.isArray(t);if((i||l(t))&&!Object.isFrozen(t)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(i){n=t.length;while(n--)ce(t[n],e)}else{r=Object.keys(t),n=r.length;while(n--)ce(t[r[n]],e)}}}var fe,he=x(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var r="!"===t.charAt(0);return t=r?t.slice(1):t,{name:t,once:n,capture:r,passive:e}});function de(t){function e(){var t=arguments,n=e.fns;if(!Array.isArray(n))return n.apply(null,arguments);for(var r=n.slice(),i=0;i<r.length;i++)r[i].apply(null,t)}return e.fns=t,e}function pe(t,e,n,i,o){var a,u,l,s;for(a in t)u=t[a],l=e[a],s=he(a),r(u)||(r(l)?(r(u.fns)&&(u=t[a]=de(u)),n(s.name,u,s.once,s.capture,s.passive,s.params)):u!==l&&(l.fns=u,t[a]=l));for(a in e)r(t[a])&&(s=he(a),i(s.name,e[a],s.capture))}function ge(t,e,n){var a;t instanceof gt&&(t=t.data.hook||(t.data.hook={}));var u=t[e];function l(){n.apply(this,arguments),y(a.fns,l)}r(u)?a=de([l]):i(u.fns)&&o(u.merged)?(a=u,a.fns.push(l)):a=de([u,l]),a.merged=!0,t[e]=a}function ve(t,e,n){var o=e.options.props;if(!r(o)){var a={},u=t.attrs,l=t.props;if(i(u)||i(l))for(var s in o){var c=k(s);ye(a,l,s,c,!0)||ye(a,u,s,c,!1)}return a}}function ye(t,e,n,r,o){if(i(e)){if(b(e,n))return t[n]=e[n],o||delete e[n],!0;if(b(e,r))return t[n]=e[r],o||delete e[r],!0}return!1}function me(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function be(t){return u(t)?[mt(t)]:Array.isArray(t)?_e(t):void 0}function xe(t){return i(t)&&i(t.text)&&a(t.isComment)}function _e(t,e){var n,a,l,s,c=[];for(n=0;n<t.length;n++)a=t[n],r(a)||"boolean"===typeof a||(l=c.length-1,s=c[l],Array.isArray(a)?a.length>0&&(a=_e(a,(e||"")+"_"+n),xe(a[0])&&xe(s)&&(c[l]=mt(s.text+a[0].text),a.shift()),c.push.apply(c,a)):u(a)?xe(s)?c[l]=mt(s.text+a):""!==a&&c.push(mt(a)):xe(a)&&xe(s)?c[l]=mt(s.text+a.text):(o(t._isVList)&&i(a.tag)&&r(a.key)&&i(e)&&(a.key="__vlist"+e+"_"+n+"__"),c.push(a)));return c}function we(t,e){return(t.__esModule||lt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function Me(t,e,n,r,i){var o=yt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:r,tag:i},o}function Se(t,e,n){if(o(t.error)&&i(t.errorComp))return t.errorComp;if(i(t.resolved))return t.resolved;if(o(t.loading)&&i(t.loadingComp))return t.loadingComp;if(!i(t.contexts)){var a=t.contexts=[n],u=!0,s=function(){for(var t=0,e=a.length;t<e;t++)a[t].$forceUpdate()},c=R(function(n){t.resolved=we(n,e),u||s()}),f=R(function(e){i(t.errorComp)&&(t.error=!0,s())}),h=t(c,f);return l(h)&&("function"===typeof h.then?r(t.resolved)&&h.then(c,f):i(h.component)&&"function"===typeof h.component.then&&(h.component.then(c,f),i(h.error)&&(t.errorComp=we(h.error,e)),i(h.loading)&&(t.loadingComp=we(h.loading,e),0===h.delay?t.loading=!0:setTimeout(function(){r(t.resolved)&&r(t.error)&&(t.loading=!0,s())},h.delay||200)),i(h.timeout)&&setTimeout(function(){r(t.resolved)&&f(null)},h.timeout))),u=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(n)}function ke(t){return t.isComment&&t.asyncFactory}function Oe(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(i(n)&&(i(n.componentOptions)||ke(n)))return n}}function Ee(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Te(t,e)}function Ae(t,e,n){n?fe.$once(t,e):fe.$on(t,e)}function Ce(t,e){fe.$off(t,e)}function Te(t,e,n){fe=t,pe(e,n||{},Ae,Ce,t),fe=void 0}function Pe(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this,i=this;if(Array.isArray(t))for(var o=0,a=t.length;o<a;o++)r.$on(t[o],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this,r=this;if(!arguments.length)return r._events=Object.create(null),r;if(Array.isArray(t)){for(var i=0,o=t.length;i<o;i++)n.$off(t[i],e);return r}var a=r._events[t];if(!a)return r;if(!e)return r._events[t]=null,r;if(e){var u,l=a.length;while(l--)if(u=a[l],u===e||u.fn===e){a.splice(l,1);break}}return r},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?E(n):n;for(var r=E(arguments,1),i=0,o=n.length;i<o;i++)try{n[i].apply(e,r)}catch(n){Yt(n,e,'event handler for "'+t+'"')}}return e}}function je(t,e){var n={};if(!t)return n;for(var r=0,i=t.length;r<i;r++){var o=t[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var u=a.slot,l=n[u]||(n[u]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var s in n)n[s].every(Ne)&&delete n[s];return n}function Ne(t){return t.isComment&&!t.asyncFactory||" "===t.text}function Le(t,e){e=e||{};for(var n=0;n<t.length;n++)Array.isArray(t[n])?Le(t[n],e):e[t[n].key]=t[n].fn;return e}var Re=null;function De(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function ze(t){t.prototype._update=function(t,e){var n=this;n._isMounted&&qe(n,"beforeUpdate");var r=n.$el,i=n._vnode,o=Re;Re=n,n._vnode=t,i?n.$el=n.__patch__(i,t):(n.$el=n.__patch__(n.$el,t,e,!1,n.$options._parentElm,n.$options._refElm),n.$options._parentElm=n.$options._refElm=null),Re=o,r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){qe(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),qe(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Ie(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=yt),qe(t,"beforeMount"),r=function(){t._update(t._render(),n)},new rn(t,r,T,null,!0),n=!1,null==t.$vnode&&(t._isMounted=!0,qe(t,"mounted")),t}function Fe(t,e,r,i,o){var a=!!(o||t.$options._renderChildren||i.data.scopedSlots||t.$scopedSlots!==n);if(t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o,t.$attrs=i.data&&i.data.attrs||n,t.$listeners=r||n,e&&t.$options.props){St.shouldConvert=!1;for(var u=t._props,l=t.$options._propKeys||[],s=0;s<l.length;s++){var c=l[s];u[c]=$t(c,t.$options.props,e,t)}St.shouldConvert=!0,t.$options.propsData=e}if(r){var f=t.$options._parentListeners;t.$options._parentListeners=r,Te(t,r,f)}a&&(t.$slots=je(o,i.context),t.$forceUpdate())}function Be(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function Ue(t,e){if(e){if(t._directInactive=!1,Be(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)Ue(t.$children[n]);qe(t,"activated")}}function He(t,e){if((!e||(t._directInactive=!0,!Be(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)He(t.$children[n]);qe(t,"deactivated")}}function qe(t,e){var n=t.$options[e];if(n)for(var r=0,i=n.length;r<i;r++)try{n[r].call(t)}catch(n){Yt(n,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e)}var $e=[],We=[],Ge={},Xe=!1,Ye=!1,Ve=0;function Ke(){Ve=$e.length=We.length=0,Ge={},Xe=Ye=!1}function Ze(){var t,e;for(Ye=!0,$e.sort(function(t,e){return t.id-e.id}),Ve=0;Ve<$e.length;Ve++)t=$e[Ve],e=t.id,Ge[e]=null,t.run();var n=We.slice(),r=$e.slice();Ke(),tn(n),Je(r),ot&&F.devtools&&ot.emit("flush")}function Je(t){var e=t.length;while(e--){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&qe(r,"updated")}}function Qe(t){t._inactive=!1,We.push(t)}function tn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,Ue(t[e],!0)}function en(t){var e=t.id;if(null==Ge[e]){if(Ge[e]=!0,Ye){var n=$e.length-1;while(n>Ve&&$e[n].id>t.id)n--;$e.splice(n+1,0,t)}else $e.push(t);Xe||(Xe=!0,ue(Ze))}}var nn=0,rn=function(t,e,n,r,i){this.vm=t,i&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++nn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ut,this.newDepIds=new ut,this.expression="","function"===typeof e?this.getter=e:(this.getter=q(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};rn.prototype.get=function(){var t;dt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Yt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&se(t),pt(),this.cleanupDeps()}return t},rn.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},rn.prototype.cleanupDeps=function(){var t=this,e=this.deps.length;while(e--){var n=t.deps[e];t.newDepIds.has(n.id)||n.removeSub(t)}var r=this.depIds;this.depIds=this.newDepIds,this.newDepIds=r,this.newDepIds.clear(),r=this.deps,this.deps=this.newDeps,this.newDeps=r,this.newDeps.length=0},rn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():en(this)},rn.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Yt(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},rn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},rn.prototype.depend=function(){var t=this,e=this.deps.length;while(e--)t.deps[e].depend()},rn.prototype.teardown=function(){var t=this;if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var e=this.deps.length;while(e--)t.deps[e].removeSub(t);this.active=!1}};var on={enumerable:!0,configurable:!0,get:T,set:T};function an(t,e,n){on.get=function(){return this[e][n]},on.set=function(t){this[e][n]=t},Object.defineProperty(t,n,on)}function un(t){t._watchers=[];var e=t.$options;e.props&&ln(t,e.props),e.methods&&gn(t,e.methods),e.data?sn(t):At(t._data={},!0),e.computed&&hn(t,e.computed),e.watch&&e.watch!==et&&vn(t,e.watch)}function ln(t,e){var n=t.$options.propsData||{},r=t._props={},i=t.$options._propKeys=[],o=!t.$parent;St.shouldConvert=o;var a=function(o){i.push(o);var a=$t(o,e,n,t);Ct(r,o,a),o in t||an(t,"_props",o)};for(var u in e)a(u);St.shouldConvert=!0}function sn(t){var e=t.$options.data;e=t._data="function"===typeof e?cn(e,t):e||{},c(e)||(e={});var n=Object.keys(e),r=t.$options.props,i=(t.$options.methods,n.length);while(i--){var o=n[i];0,r&&b(r,o)||B(o)||an(t,"_data",o)}At(e,!0)}function cn(t,e){try{return t.call(e,e)}catch(t){return Yt(t,e,"data()"),{}}}var fn={lazy:!0};function hn(t,e){var n=t._computedWatchers=Object.create(null),r=it();for(var i in e){var o=e[i],a="function"===typeof o?o:o.get;0,r||(n[i]=new rn(t,a||T,T,fn)),i in t||dn(t,i,o)}}function dn(t,e,n){var r=!it();"function"===typeof n?(on.get=r?pn(e):n,on.set=T):(on.get=n.get?r&&!1!==n.cache?pn(e):n.get:T,on.set=n.set?n.set:T),Object.defineProperty(t,e,on)}function pn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),ft.target&&e.depend(),e.value}}function gn(t,e){t.$options.props;for(var n in e)t[n]=null==e[n]?T:O(e[n],t)}function vn(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var i=0;i<r.length;i++)yn(t,n,r[i]);else yn(t,n,r)}}function yn(t,e,n,r){return c(n)&&(r=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,r)}function mn(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=Tt,t.prototype.$delete=Pt,t.prototype.$watch=function(t,e,n){var r=this;if(c(e))return yn(r,t,e,n);n=n||{},n.user=!0;var i=new rn(r,t,e,n);return n.immediate&&e.call(r,i.value),function(){i.teardown()}}}function bn(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function xn(t){var e=_n(t.$options.inject,t);e&&(St.shouldConvert=!1,Object.keys(e).forEach(function(n){Ct(t,n,e[n])}),St.shouldConvert=!0)}function _n(t,e){if(t){for(var n=Object.create(null),r=lt?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),i=0;i<r.length;i++){var o=r[i],a=t[o].from,u=e;while(u){if(u._provided&&a in u._provided){n[o]=u._provided[a];break}u=u.$parent}if(!u)if("default"in t[o]){var l=t[o].default;n[o]="function"===typeof l?l.call(e):l}else 0}return n}}function wn(t,e){var n,r,o,a,u;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),r=0,o=t.length;r<o;r++)n[r]=e(t[r],r);else if("number"===typeof t)for(n=new Array(t),r=0;r<t;r++)n[r]=e(r+1,r);else if(l(t))for(a=Object.keys(t),n=new Array(a.length),r=0,o=a.length;r<o;r++)u=a[r],n[r]=e(t[u],u,r);return i(n)&&(n._isVList=!0),n}function Mn(t,e,n,r){var i,o=this.$scopedSlots[t];if(o)n=n||{},r&&(n=A(A({},r),n)),i=o(n)||e;else{var a=this.$slots[t];a&&(a._rendered=!0),i=a||e}var u=n&&n.slot;return u?this.$createElement("template",{slot:u},i):i}function Sn(t){return qt(this.$options,"filters",t,!0)||j}function kn(t,e,n,r){var i=F.keyCodes[e]||n;return i?Array.isArray(i)?-1===i.indexOf(t):i!==t:r?k(r)!==e:void 0}function On(t,e,n,r,i){if(n)if(l(n)){var o;Array.isArray(n)&&(n=C(n));var a=function(a){if("class"===a||"style"===a||v(a))o=t;else{var u=t.attrs&&t.attrs.type;o=r||F.mustUseProp(e,u,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}if(!(a in o)&&(o[a]=n[a],i)){var l=t.on||(t.on={});l["update:"+a]=function(t){n[a]=t}}};for(var u in n)a(u)}else;return t}function En(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?Array.isArray(r)?xt(r):bt(r):(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Cn(r,"__static__"+t,!1),r)}function An(t,e,n){return Cn(t,"__once__"+e+(n?"_"+n:""),!0),t}function Cn(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!==typeof t[r]&&Tn(t[r],e+"_"+r,n);else Tn(t,e,n)}function Tn(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Pn(t,e){if(e)if(c(e)){var n=t.on=t.on?A({},t.on):{};for(var r in e){var i=n[r],o=e[r];n[r]=i?[].concat(i,o):o}}else;return t}function jn(t){t._o=An,t._n=p,t._s=d,t._l=wn,t._t=Mn,t._q=N,t._i=L,t._m=En,t._f=Sn,t._k=kn,t._b=On,t._v=mt,t._e=yt,t._u=Le,t._g=Pn}function Nn(t,e,r,i,a){var u=a.options;this.data=t,this.props=e,this.children=r,this.parent=i,this.listeners=t.on||n,this.injections=_n(u.inject,i),this.slots=function(){return je(r,i)};var l=Object.create(i),s=o(u._compiled),c=!s;s&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=t.scopedSlots||n),u._scopeId?this._c=function(t,e,n,r){var o=Wn(l,t,e,n,r,c);return o&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return Wn(l,t,e,n,r,c)}}function Ln(t,e,r,o,a){var u=t.options,l={},s=u.props;if(i(s))for(var c in s)l[c]=$t(c,s,e||n);else i(r.attrs)&&Rn(l,r.attrs),i(r.props)&&Rn(l,r.props);var f=new Nn(r,l,a,o,t),h=u.render.call(null,f._c,f);return h instanceof gt&&(h.fnContext=o,h.fnOptions=u,r.slot&&((h.data||(h.data={})).slot=r.slot)),h}function Rn(t,e){for(var n in e)t[w(n)]=e[n]}jn(Nn.prototype);var Dn={init:function(t,e,n,r){if(!t.componentInstance||t.componentInstance._isDestroyed){var i=t.componentInstance=Fn(t,Re,n,r);i.$mount(e?t.elm:void 0,e)}else if(t.data.keepAlive){var o=t;Dn.prepatch(o,o)}},prepatch:function(t,e){var n=e.componentOptions,r=e.componentInstance=t.componentInstance;Fe(r,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,qe(n,"mounted")),t.data.keepAlive&&(e._isMounted?Qe(n):Ue(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?He(e,!0):e.$destroy())}},zn=Object.keys(Dn);function In(t,e,n,a,u){if(!r(t)){var s=n.$options._base;if(l(t)&&(t=s.extend(t)),"function"===typeof t){var c;if(r(t.cid)&&(c=t,t=Se(c,s,n),void 0===t))return Me(c,e,n,a,u);e=e||{},Qn(t),i(e.model)&&Hn(t.options,e);var f=ve(e,t,u);if(o(t.options.functional))return Ln(t,f,e,n,a);var h=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}Bn(e);var p=t.options.name||u,g=new gt("vue-component-"+t.cid+(p?"-"+p:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:f,listeners:h,tag:u,children:a},c);return g}}}function Fn(t,e,n,r){var o={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:n||null,_refElm:r||null},a=t.data.inlineTemplate;return i(a)&&(o.render=a.render,o.staticRenderFns=a.staticRenderFns),new t.componentOptions.Ctor(o)}function Bn(t){t.hook||(t.hook={});for(var e=0;e<zn.length;e++){var n=zn[e],r=t.hook[n],i=Dn[n];t.hook[n]=r?Un(i,r):i}}function Un(t,e){return function(n,r,i,o){t(n,r,i,o),e(n,r,i,o)}}function Hn(t,e){var n=t.model&&t.model.prop||"value",r=t.model&&t.model.event||"input";(e.props||(e.props={}))[n]=e.model.value;var o=e.on||(e.on={});i(o[r])?o[r]=[e.model.callback].concat(o[r]):o[r]=e.model.callback}var qn=1,$n=2;function Wn(t,e,n,r,i,a){return(Array.isArray(n)||u(n))&&(i=r,r=n,n=void 0),o(a)&&(i=$n),Gn(t,e,n,r,i)}function Gn(t,e,n,r,o){if(i(n)&&i(n.__ob__))return yt();if(i(n)&&i(n.is)&&(e=n.is),!e)return yt();var a,u,l;(Array.isArray(r)&&"function"===typeof r[0]&&(n=n||{},n.scopedSlots={default:r[0]},r.length=0),o===$n?r=be(r):o===qn&&(r=me(r)),"string"===typeof e)?(u=t.$vnode&&t.$vnode.ns||F.getTagNamespace(e),a=F.isReservedTag(e)?new gt(F.parsePlatformTagName(e),n,r,void 0,void 0,t):i(l=qt(t.$options,"components",e))?In(l,n,t,r,e):new gt(e,n,r,void 0,void 0,t)):a=In(e,n,t,r);return i(a)?(u&&Xn(a,u),a):yt()}function Xn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),i(t.children))for(var a=0,u=t.children.length;a<u;a++){var l=t.children[a];i(l.tag)&&(r(l.ns)||o(n))&&Xn(l,e,n)}}function Yn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,r=t.$vnode=e._parentVnode,i=r&&r.context;t.$slots=je(e._renderChildren,i),t.$scopedSlots=n,t._c=function(e,n,r,i){return Wn(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return Wn(t,e,n,r,i,!0)};var o=r&&r.data;Ct(t,"$attrs",o&&o.attrs||n,null,!0),Ct(t,"$listeners",e._parentListeners||n,null,!0)}function Vn(t){jn(t.prototype),t.prototype.$nextTick=function(t){return ue(t,this)},t.prototype._render=function(){var t,e=this,r=e.$options,i=r.render,o=r._parentVnode;if(e._isMounted)for(var a in e.$slots){var u=e.$slots[a];(u._rendered||u[0]&&u[0].elm)&&(e.$slots[a]=xt(u,!0))}e.$scopedSlots=o&&o.data.scopedSlots||n,e.$vnode=o;try{t=i.call(e._renderProxy,e.$createElement)}catch(n){Yt(n,e,"render"),t=e._vnode}return t instanceof gt||(t=yt()),t.parent=o,t}}var Kn=0;function Zn(t){t.prototype._init=function(t){var e=this;e._uid=Kn++,e._isVue=!0,t&&t._isComponent?Jn(e,t):e.$options=Ht(Qn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,De(e),Ee(e),Yn(e),qe(e,"beforeCreate"),xn(e),un(e),bn(e),qe(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function Jn(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r,n._parentElm=e._parentElm,n._refElm=e._refElm;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function Qn(t){var e=t.options;if(t.super){var n=Qn(t.super),r=t.superOptions;if(n!==r){t.superOptions=n;var i=tr(t);i&&A(t.extendOptions,i),e=t.options=Ht(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function tr(t){var e,n=t.options,r=t.extendOptions,i=t.sealedOptions;for(var o in n)n[o]!==i[o]&&(e||(e={}),e[o]=er(n[o],r[o],i[o]));return e}function er(t,e,n){if(Array.isArray(t)){var r=[];n=Array.isArray(n)?n:[n],e=Array.isArray(e)?e:[e];for(var i=0;i<t.length;i++)(e.indexOf(t[i])>=0||n.indexOf(t[i])<0)&&r.push(t[i]);return r}return t}function nr(t){this._init(t)}function rr(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=E(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function ir(t){t.mixin=function(t){return this.options=Ht(this.options,t),this}}function or(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,i=t._Ctor||(t._Ctor={});if(i[r])return i[r];var o=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=Ht(n.options,t),a["super"]=n,a.options.props&&ar(a),a.options.computed&&ur(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,z.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=A({},a.options),i[r]=a,a}}function ar(t){var e=t.options.props;for(var n in e)an(t.prototype,"_props",n)}function ur(t){var e=t.options.computed;for(var n in e)dn(t.prototype,n,e[n])}function lr(t){z.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&c(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function sr(t){return t&&(t.Ctor.options.name||t.tag)}function cr(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function fr(t,e){var n=t.cache,r=t.keys,i=t._vnode;for(var o in n){var a=n[o];if(a){var u=sr(a.componentOptions);u&&!e(u)&&hr(n,o,r,i)}}}function hr(t,e,n,r){var i=t[e];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),t[e]=null,y(n,e)}Zn(nr),mn(nr),Pe(nr),ze(nr),Vn(nr);var dr=[String,RegExp,Array],pr={name:"keep-alive",abstract:!0,props:{include:dr,exclude:dr,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){var t=this;for(var e in t.cache)hr(t.cache,e,t.keys)},watch:{include:function(t){fr(this,function(e){return cr(t,e)})},exclude:function(t){fr(this,function(e){return!cr(t,e)})}},render:function(){var t=this.$slots.default,e=Oe(t),n=e&&e.componentOptions;if(n){var r=sr(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!cr(o,r))||a&&r&&cr(a,r))return e;var u=this,l=u.cache,s=u.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;l[c]?(e.componentInstance=l[c].componentInstance,y(s,c),s.push(c)):(l[c]=e,s.push(c),this.max&&s.length>parseInt(this.max)&&hr(l,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},gr={KeepAlive:pr};function vr(t){var e={get:function(){return F}};Object.defineProperty(t,"config",e),t.util={warn:st,extend:A,mergeOptions:Ht,defineReactive:Ct},t.set=Tt,t.delete=Pt,t.nextTick=ue,t.options=Object.create(null),z.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,A(t.options.components,gr),rr(t),ir(t),or(t),lr(t)}vr(nr),Object.defineProperty(nr.prototype,"$isServer",{get:it}),Object.defineProperty(nr.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),nr.version="2.5.13";var yr=g("style,class"),mr=g("input,textarea,option,select,progress"),br=function(t,e,n){return"value"===n&&mr(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},xr=g("contenteditable,draggable,spellcheck"),_r=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),wr="http://www.w3.org/1999/xlink",Mr=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Sr=function(t){return Mr(t)?t.slice(6,t.length):""},kr=function(t){return null==t||!1===t};function Or(t){var e=t.data,n=t,r=t;while(i(r.componentInstance))r=r.componentInstance._vnode,r&&r.data&&(e=Er(r.data,e));while(i(n=n.parent))n&&n.data&&(e=Er(e,n.data));return Ar(e.staticClass,e.class)}function Er(t,e){return{staticClass:Cr(t.staticClass,e.staticClass),class:i(t.class)?[t.class,e.class]:e.class}}function Ar(t,e){return i(t)||i(e)?Cr(t,Tr(e)):""}function Cr(t,e){return t?e?t+" "+e:t:e||""}function Tr(t){return Array.isArray(t)?Pr(t):l(t)?jr(t):"string"===typeof t?t:""}function Pr(t){for(var e,n="",r=0,o=t.length;r<o;r++)i(e=Tr(t[r]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function jr(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var Nr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Lr=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Rr=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Dr=function(t){return Lr(t)||Rr(t)};function zr(t){return Rr(t)?"svg":"math"===t?"math":void 0}var Ir=Object.create(null);function Fr(t){if(!G)return!0;if(Dr(t))return!1;if(t=t.toLowerCase(),null!=Ir[t])return Ir[t];var e=document.createElement(t);return t.indexOf("-")>-1?Ir[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Ir[t]=/HTMLUnknownElement/.test(e.toString())}var Br=g("text,number,password,search,email,tel,url");function Ur(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function Hr(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function qr(t,e){return document.createElementNS(Nr[t],e)}function $r(t){return document.createTextNode(t)}function Wr(t){return document.createComment(t)}function Gr(t,e,n){t.insertBefore(e,n)}function Xr(t,e){t.removeChild(e)}function Yr(t,e){t.appendChild(e)}function Vr(t){return t.parentNode}function Kr(t){return t.nextSibling}function Zr(t){return t.tagName}function Jr(t,e){t.textContent=e}function Qr(t,e,n){t.setAttribute(e,n)}var ti=Object.freeze({createElement:Hr,createElementNS:qr,createTextNode:$r,createComment:Wr,insertBefore:Gr,removeChild:Xr,appendChild:Yr,parentNode:Vr,nextSibling:Kr,tagName:Zr,setTextContent:Jr,setAttribute:Qr}),ei={create:function(t,e){ni(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ni(t,!0),ni(e))},destroy:function(t){ni(t,!0)}};function ni(t,e){var n=t.data.ref;if(n){var r=t.context,i=t.componentInstance||t.elm,o=r.$refs;e?Array.isArray(o[n])?y(o[n],i):o[n]===i&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(i)<0&&o[n].push(i):o[n]=[i]:o[n]=i}}var ri=new gt("",{},[]),ii=["create","activate","update","remove","destroy"];function oi(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&i(t.data)===i(e.data)&&ai(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&r(e.asyncFactory.error))}function ai(t,e){if("input"!==t.tag)return!0;var n,r=i(n=t.data)&&i(n=n.attrs)&&n.type,o=i(n=e.data)&&i(n=n.attrs)&&n.type;return r===o||Br(r)&&Br(o)}function ui(t,e,n){var r,o,a={};for(r=e;r<=n;++r)o=t[r].key,i(o)&&(a[o]=r);return a}function li(t){var e,n,a={},l=t.modules,s=t.nodeOps;for(e=0;e<ii.length;++e)for(a[ii[e]]=[],n=0;n<l.length;++n)i(l[n][ii[e]])&&a[ii[e]].push(l[n][ii[e]]);function c(t){return new gt(s.tagName(t).toLowerCase(),{},[],void 0,t)}function f(t,e){function n(){0===--n.listeners&&h(t)}return n.listeners=e,n}function h(t){var e=s.parentNode(t);i(e)&&s.removeChild(e,t)}function d(t,e,n,r,a){if(t.isRootInsert=!a,!p(t,e,n,r)){var u=t.data,l=t.children,c=t.tag;i(c)?(t.elm=t.ns?s.createElementNS(t.ns,c):s.createElement(c,t),w(t),b(t,l,e),i(u)&&_(t,e),m(n,t.elm,r)):o(t.isComment)?(t.elm=s.createComment(t.text),m(n,t.elm,r)):(t.elm=s.createTextNode(t.text),m(n,t.elm,r))}}function p(t,e,n,r){var a=t.data;if(i(a)){var u=i(t.componentInstance)&&a.keepAlive;if(i(a=a.hook)&&i(a=a.init)&&a(t,!1,n,r),i(t.componentInstance))return v(t,e),o(u)&&y(t,e,n,r),!0}}function v(t,e){i(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(_(t,e),w(t)):(ni(t),e.push(t))}function y(t,e,n,r){var o,u=t;while(u.componentInstance)if(u=u.componentInstance._vnode,i(o=u.data)&&i(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](ri,u);e.push(u);break}m(n,t.elm,r)}function m(t,e,n){i(t)&&(i(n)?n.parentNode===t&&s.insertBefore(t,e,n):s.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)d(e[r],n,t.elm,null,!0)}else u(t.text)&&s.appendChild(t.elm,s.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return i(t.tag)}function _(t,n){for(var r=0;r<a.create.length;++r)a.create[r](ri,t);e=t.data.hook,i(e)&&(i(e.create)&&e.create(ri,t),i(e.insert)&&n.push(t))}function w(t){var e;if(i(e=t.fnScopeId))s.setAttribute(t.elm,e,"");else{var n=t;while(n)i(e=n.context)&&i(e=e.$options._scopeId)&&s.setAttribute(t.elm,e,""),n=n.parent}i(e=Re)&&e!==t.context&&e!==t.fnContext&&i(e=e.$options._scopeId)&&s.setAttribute(t.elm,e,"")}function M(t,e,n,r,i,o){for(;r<=i;++r)d(n[r],o,t,e)}function S(t){var e,n,r=t.data;if(i(r))for(i(e=r.hook)&&i(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(i(e=t.children))for(n=0;n<t.children.length;++n)S(t.children[n])}function k(t,e,n,r){for(;n<=r;++n){var o=e[n];i(o)&&(i(o.tag)?(O(o),S(o)):h(o.elm))}}function O(t,e){if(i(e)||i(t.data)){var n,r=a.remove.length+1;for(i(e)?e.listeners+=r:e=f(t.elm,r),i(n=t.componentInstance)&&i(n=n._vnode)&&i(n.data)&&O(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);i(n=t.data.hook)&&i(n=n.remove)?n(t,e):e()}else h(t.elm)}function E(t,e,n,o,a){var u,l,c,f,h=0,p=0,g=e.length-1,v=e[0],y=e[g],m=n.length-1,b=n[0],x=n[m],_=!a;while(h<=g&&p<=m)r(v)?v=e[++h]:r(y)?y=e[--g]:oi(v,b)?(C(v,b,o),v=e[++h],b=n[++p]):oi(y,x)?(C(y,x,o),y=e[--g],x=n[--m]):oi(v,x)?(C(v,x,o),_&&s.insertBefore(t,v.elm,s.nextSibling(y.elm)),v=e[++h],x=n[--m]):oi(y,b)?(C(y,b,o),_&&s.insertBefore(t,y.elm,v.elm),y=e[--g],b=n[++p]):(r(u)&&(u=ui(e,h,g)),l=i(b.key)?u[b.key]:A(b,e,h,g),r(l)?d(b,o,t,v.elm):(c=e[l],oi(c,b)?(C(c,b,o),e[l]=void 0,_&&s.insertBefore(t,c.elm,v.elm)):d(b,o,t,v.elm)),b=n[++p]);h>g?(f=r(n[m+1])?null:n[m+1].elm,M(t,f,n,p,m,o)):p>m&&k(t,e,h,g)}function A(t,e,n,r){for(var o=n;o<r;o++){var a=e[o];if(i(a)&&oi(t,a))return o}}function C(t,e,n,u){if(t!==e){var l=e.elm=t.elm;if(o(t.isAsyncPlaceholder))i(e.asyncFactory.resolved)?j(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var c,f=e.data;i(f)&&i(c=f.hook)&&i(c=c.prepatch)&&c(t,e);var h=t.children,d=e.children;if(i(f)&&x(e)){for(c=0;c<a.update.length;++c)a.update[c](t,e);i(c=f.hook)&&i(c=c.update)&&c(t,e)}r(e.text)?i(h)&&i(d)?h!==d&&E(l,h,d,n,u):i(d)?(i(t.text)&&s.setTextContent(l,""),M(l,null,d,0,d.length-1,n)):i(h)?k(l,h,0,h.length-1):i(t.text)&&s.setTextContent(l,""):t.text!==e.text&&s.setTextContent(l,e.text),i(f)&&i(c=f.hook)&&i(c=c.postpatch)&&c(t,e)}}}function T(t,e,n){if(o(n)&&i(t.parent))t.parent.data.pendingInsert=e;else for(var r=0;r<e.length;++r)e[r].data.hook.insert(e[r])}var P=g("attrs,class,staticClass,staticStyle,key");function j(t,e,n,r){var a,u=e.tag,l=e.data,s=e.children;if(r=r||l&&l.pre,e.elm=t,o(e.isComment)&&i(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(i(l)&&(i(a=l.hook)&&i(a=a.init)&&a(e,!0),i(a=e.componentInstance)))return v(e,n),!0;if(i(u)){if(i(s))if(t.hasChildNodes())if(i(a=l)&&i(a=a.domProps)&&i(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var c=!0,f=t.firstChild,h=0;h<s.length;h++){if(!f||!j(f,s[h],n,r)){c=!1;break}f=f.nextSibling}if(!c||f)return!1}else b(e,s,n);if(i(l)){var d=!1;for(var p in l)if(!P(p)){d=!0,_(e,n);break}!d&&l["class"]&&se(l["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,u,l,f){if(!r(e)){var h=!1,p=[];if(r(t))h=!0,d(e,p,l,f);else{var g=i(t.nodeType);if(!g&&oi(t,e))C(t,e,p,u);else{if(g){if(1===t.nodeType&&t.hasAttribute(D)&&(t.removeAttribute(D),n=!0),o(n)&&j(t,e,p))return T(e,p,!0),t;t=c(t)}var v=t.elm,y=s.parentNode(v);if(d(e,p,v._leaveCb?null:y,s.nextSibling(v)),i(e.parent)){var m=e.parent,b=x(e);while(m){for(var _=0;_<a.destroy.length;++_)a.destroy[_](m);if(m.elm=e.elm,b){for(var w=0;w<a.create.length;++w)a.create[w](ri,m);var M=m.data.hook.insert;if(M.merged)for(var O=1;O<M.fns.length;O++)M.fns[O]()}else ni(m);m=m.parent}}i(y)?k(y,[t],0,0):i(t.tag)&&S(t)}}return T(e,p,h),e.elm}i(t)&&S(t)}}var si={create:ci,update:ci,destroy:function(t){ci(t,ri)}};function ci(t,e){(t.data.directives||e.data.directives)&&fi(t,e)}function fi(t,e){var n,r,i,o=t===ri,a=e===ri,u=di(t.data.directives,t.context),l=di(e.data.directives,e.context),s=[],c=[];for(n in l)r=u[n],i=l[n],r?(i.oldValue=r.value,gi(i,"update",e,t),i.def&&i.def.componentUpdated&&c.push(i)):(gi(i,"bind",e,t),i.def&&i.def.inserted&&s.push(i));if(s.length){var f=function(){for(var n=0;n<s.length;n++)gi(s[n],"inserted",e,t)};o?ge(e,"insert",f):f()}if(c.length&&ge(e,"postpatch",function(){for(var n=0;n<c.length;n++)gi(c[n],"componentUpdated",e,t)}),!o)for(n in u)l[n]||gi(u[n],"unbind",t,t,a)}var hi=Object.create(null);function di(t,e){var n,r,i=Object.create(null);if(!t)return i;for(n=0;n<t.length;n++)r=t[n],r.modifiers||(r.modifiers=hi),i[pi(r)]=r,r.def=qt(e.$options,"directives",r.name,!0);return i}function pi(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function gi(t,e,n,r,i){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,r,i)}catch(r){Yt(r,n.context,"directive "+t.name+" "+e+" hook")}}var vi=[ei,si];function yi(t,e){var n=e.componentOptions;if((!i(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(t.data.attrs)||!r(e.data.attrs))){var o,a,u,l=e.elm,s=t.data.attrs||{},c=e.data.attrs||{};for(o in i(c.__ob__)&&(c=e.data.attrs=A({},c)),c)a=c[o],u=s[o],u!==a&&mi(l,o,a);for(o in(K||J)&&c.value!==s.value&&mi(l,"value",c.value),s)r(c[o])&&(Mr(o)?l.removeAttributeNS(wr,Sr(o)):xr(o)||l.removeAttribute(o))}}function mi(t,e,n){if(_r(e))kr(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n));else if(xr(e))t.setAttribute(e,kr(n)||"false"===n?"false":"true");else if(Mr(e))kr(n)?t.removeAttributeNS(wr,Sr(e)):t.setAttributeNS(wr,e,n);else if(kr(n))t.removeAttribute(e);else{if(K&&!Z&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var bi={create:yi,update:yi};function xi(t,e){var n=e.elm,o=e.data,a=t.data;if(!(r(o.staticClass)&&r(o.class)&&(r(a)||r(a.staticClass)&&r(a.class)))){var u=Or(e),l=n._transitionClasses;i(l)&&(u=Cr(u,Tr(l))),u!==n._prevClass&&(n.setAttribute("class",u),n._prevClass=u)}}var _i,wi={create:xi,update:xi},Mi="__r",Si="__c";function ki(t){if(i(t[Mi])){var e=K?"change":"input";t[e]=[].concat(t[Mi],t[e]||[]),delete t[Mi]}i(t[Si])&&(t.change=[].concat(t[Si],t.change||[]),delete t[Si])}function Oi(t,e,n){var r=_i;return function i(){var o=t.apply(null,arguments);null!==o&&Ai(e,i,n,r)}}function Ei(t,e,n,r,i){e=ae(e),n&&(e=Oi(e,t,r)),_i.addEventListener(t,e,nt?{capture:r,passive:i}:r)}function Ai(t,e,n,r){(r||_i).removeEventListener(t,e._withTask||e,n)}function Ci(t,e){if(!r(t.data.on)||!r(e.data.on)){var n=e.data.on||{},i=t.data.on||{};_i=e.elm,ki(n),pe(n,i,Ei,Ai,e.context),_i=void 0}}var Ti={create:Ci,update:Ci};function Pi(t,e){if(!r(t.data.domProps)||!r(e.data.domProps)){var n,o,a=e.elm,u=t.data.domProps||{},l=e.data.domProps||{};for(n in i(l.__ob__)&&(l=e.data.domProps=A({},l)),u)r(l[n])&&(a[n]="");for(n in l){if(o=l[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===u[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n){a._value=o;var s=r(o)?"":String(o);ji(a,s)&&(a.value=s)}else a[n]=o}}}function ji(t,e){return!t.composing&&("OPTION"===t.tagName||Ni(t,e)||Li(t,e))}function Ni(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}function Li(t,e){var n=t.value,r=t._vModifiers;if(i(r)){if(r.lazy)return!1;if(r.number)return p(n)!==p(e);if(r.trim)return n.trim()!==e.trim()}return n!==e}var Ri={create:Pi,update:Pi},Di=x(function(t){var e={},n=/;(?![^(]*\))/g,r=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(r);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e});function zi(t){var e=Ii(t.style);return t.staticStyle?A(t.staticStyle,e):e}function Ii(t){return Array.isArray(t)?C(t):"string"===typeof t?Di(t):t}function Fi(t,e){var n,r={};if(e){var i=t;while(i.componentInstance)i=i.componentInstance._vnode,i&&i.data&&(n=zi(i.data))&&A(r,n)}(n=zi(t.data))&&A(r,n);var o=t;while(o=o.parent)o.data&&(n=zi(o.data))&&A(r,n);return r}var Bi,Ui=/^--/,Hi=/\s*!important$/,qi=function(t,e,n){if(Ui.test(e))t.style.setProperty(e,n);else if(Hi.test(n))t.style.setProperty(e,n.replace(Hi,""),"important");else{var r=Wi(e);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)t.style[r]=n[i];else t.style[r]=n}},$i=["Webkit","Moz","ms"],Wi=x(function(t){if(Bi=Bi||document.createElement("div").style,t=w(t),"filter"!==t&&t in Bi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<$i.length;n++){var r=$i[n]+e;if(r in Bi)return r}});function Gi(t,e){var n=e.data,o=t.data;if(!(r(n.staticStyle)&&r(n.style)&&r(o.staticStyle)&&r(o.style))){var a,u,l=e.elm,s=o.staticStyle,c=o.normalizedStyle||o.style||{},f=s||c,h=Ii(e.data.style)||{};e.data.normalizedStyle=i(h.__ob__)?A({},h):h;var d=Fi(e,!0);for(u in f)r(d[u])&&qi(l,u,"");for(u in d)a=d[u],a!==f[u]&&qi(l,u,null==a?"":a)}}var Xi={create:Gi,update:Gi};function Yi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Vi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";while(n.indexOf(r)>=0)n=n.replace(r," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Ki(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&A(e,Zi(t.name||"v")),A(e,t),e}return"string"===typeof t?Zi(t):void 0}}var Zi=x(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),Ji=G&&!Z,Qi="transition",to="animation",eo="transition",no="transitionend",ro="animation",io="animationend";Ji&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(eo="WebkitTransition",no="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ro="WebkitAnimation",io="webkitAnimationEnd"));var oo=G?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function ao(t){oo(function(){oo(t)})}function uo(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Yi(t,e))}function lo(t,e){t._transitionClasses&&y(t._transitionClasses,e),Vi(t,e)}function so(t,e,n){var r=fo(t,e),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var u=i===Qi?no:io,l=0,s=function(){t.removeEventListener(u,c),n()},c=function(e){e.target===t&&++l>=a&&s()};setTimeout(function(){l<a&&s()},o+1),t.addEventListener(u,c)}var co=/\b(transform|all)(,|$)/;function fo(t,e){var n,r=window.getComputedStyle(t),i=r[eo+"Delay"].split(", "),o=r[eo+"Duration"].split(", "),a=ho(i,o),u=r[ro+"Delay"].split(", "),l=r[ro+"Duration"].split(", "),s=ho(u,l),c=0,f=0;e===Qi?a>0&&(n=Qi,c=a,f=o.length):e===to?s>0&&(n=to,c=s,f=l.length):(c=Math.max(a,s),n=c>0?a>s?Qi:to:null,f=n?n===Qi?o.length:l.length:0);var h=n===Qi&&co.test(r[eo+"Property"]);return{type:n,timeout:c,propCount:f,hasTransform:h}}function ho(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return po(e)+po(t[n])}))}function po(t){return 1e3*Number(t.slice(0,-1))}function go(t,e){var n=t.elm;i(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Ki(t.data.transition);if(!r(o)&&!i(n._enterCb)&&1===n.nodeType){var a=o.css,u=o.type,s=o.enterClass,c=o.enterToClass,f=o.enterActiveClass,h=o.appearClass,d=o.appearToClass,g=o.appearActiveClass,v=o.beforeEnter,y=o.enter,m=o.afterEnter,b=o.enterCancelled,x=o.beforeAppear,_=o.appear,w=o.afterAppear,M=o.appearCancelled,S=o.duration,k=Re,O=Re.$vnode;while(O&&O.parent)O=O.parent,k=O.context;var E=!k._isMounted||!t.isRootInsert;if(!E||_||""===_){var A=E&&h?h:s,C=E&&g?g:f,T=E&&d?d:c,P=E&&x||v,j=E&&"function"===typeof _?_:y,N=E&&w||m,L=E&&M||b,D=p(l(S)?S.enter:S);0;var z=!1!==a&&!Z,I=mo(j),F=n._enterCb=R(function(){z&&(lo(n,T),lo(n,C)),F.cancelled?(z&&lo(n,A),L&&L(n)):N&&N(n),n._enterCb=null});t.data.show||ge(t,"insert",function(){var e=n.parentNode,r=e&&e._pending&&e._pending[t.key];r&&r.tag===t.tag&&r.elm._leaveCb&&r.elm._leaveCb(),j&&j(n,F)}),P&&P(n),z&&(uo(n,A),uo(n,C),ao(function(){uo(n,T),lo(n,A),F.cancelled||I||(yo(D)?setTimeout(F,D):so(n,u,F))})),t.data.show&&(e&&e(),j&&j(n,F)),z||I||F()}}}function vo(t,e){var n=t.elm;i(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Ki(t.data.transition);if(r(o)||1!==n.nodeType)return e();if(!i(n._leaveCb)){var a=o.css,u=o.type,s=o.leaveClass,c=o.leaveToClass,f=o.leaveActiveClass,h=o.beforeLeave,d=o.leave,g=o.afterLeave,v=o.leaveCancelled,y=o.delayLeave,m=o.duration,b=!1!==a&&!Z,x=mo(d),_=p(l(m)?m.leave:m);0;var w=n._leaveCb=R(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(lo(n,c),lo(n,f)),w.cancelled?(b&&lo(n,s),v&&v(n)):(e(),g&&g(n)),n._leaveCb=null});y?y(M):M()}function M(){w.cancelled||(t.data.show||((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),h&&h(n),b&&(uo(n,s),uo(n,f),ao(function(){uo(n,c),lo(n,s),w.cancelled||x||(yo(_)?setTimeout(w,_):so(n,u,w))})),d&&d(n,w),b||x||w())}}function yo(t){return"number"===typeof t&&!isNaN(t)}function mo(t){if(r(t))return!1;var e=t.fns;return i(e)?mo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function bo(t,e){!0!==e.data.show&&go(e)}var xo=G?{create:bo,activate:bo,remove:function(t,e){!0!==t.data.show?vo(t,e):e()}}:{},_o=[bi,wi,Ti,Ri,Xi,xo],wo=_o.concat(vi),Mo=li({nodeOps:ti,modules:wo});Z&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Po(t,"input")});var So={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?ge(n,"postpatch",function(){So.componentUpdated(t,e,n)}):ko(t,e,n.context),t._vOptions=[].map.call(t.options,Ao)):("textarea"===n.tag||Br(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("change",To),Q||(t.addEventListener("compositionstart",Co),t.addEventListener("compositionend",To)),Z&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){ko(t,e,n.context);var r=t._vOptions,i=t._vOptions=[].map.call(t.options,Ao);if(i.some(function(t,e){return!N(t,r[e])})){var o=t.multiple?e.value.some(function(t){return Eo(t,i)}):e.value!==e.oldValue&&Eo(e.value,i);o&&Po(t,"change")}}}};function ko(t,e,n){Oo(t,e,n),(K||J)&&setTimeout(function(){Oo(t,e,n)},0)}function Oo(t,e,n){var r=e.value,i=t.multiple;if(!i||Array.isArray(r)){for(var o,a,u=0,l=t.options.length;u<l;u++)if(a=t.options[u],i)o=L(r,Ao(a))>-1,a.selected!==o&&(a.selected=o);else if(N(Ao(a),r))return void(t.selectedIndex!==u&&(t.selectedIndex=u));i||(t.selectedIndex=-1)}}function Eo(t,e){return e.every(function(e){return!N(e,t)})}function Ao(t){return"_value"in t?t._value:t.value}function Co(t){t.target.composing=!0}function To(t){t.target.composing&&(t.target.composing=!1,Po(t.target,"input"))}function Po(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function jo(t){return!t.componentInstance||t.data&&t.data.transition?t:jo(t.componentInstance._vnode)}var No={bind:function(t,e,n){var r=e.value;n=jo(n);var i=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&i?(n.data.show=!0,go(n,function(){t.style.display=o})):t.style.display=r?o:"none"},update:function(t,e,n){var r=e.value,i=e.oldValue;if(r!==i){n=jo(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,r?go(n,function(){t.style.display=t.__vOriginalDisplay}):vo(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,r,i){i||(t.style.display=t.__vOriginalDisplay)}},Lo={model:So,show:No},Ro={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Do(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Do(Oe(e.children)):t}function zo(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var i=n._parentListeners;for(var o in i)e[w(o)]=i[o];return e}function Io(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Fo(t){while(t=t.parent)if(t.data.transition)return!0}function Bo(t,e){return e.key===t.key&&e.tag===t.tag}var Uo={name:"transition",props:Ro,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(function(t){return t.tag||ke(t)}),n.length)){0;var r=this.mode;0;var i=n[0];if(Fo(this.$vnode))return i;var o=Do(i);if(!o)return i;if(this._leaving)return Io(t,i);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:u(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=zo(this),s=this._vnode,c=Do(s);if(o.data.directives&&o.data.directives.some(function(t){return"show"===t.name})&&(o.data.show=!0),c&&c.data&&!Bo(o,c)&&!ke(c)&&(!c.componentInstance||!c.componentInstance._vnode.isComment)){var f=c.data.transition=A({},l);if("out-in"===r)return this._leaving=!0,ge(f,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Io(t,i);if("in-out"===r){if(ke(o))return s;var h,d=function(){h()};ge(l,"afterEnter",d),ge(l,"enterCancelled",d),ge(f,"delayLeave",function(t){h=t})}}return i}}},Ho=A({tag:String,moveClass:String},Ro);delete Ho.mode;var qo={props:Ho,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=zo(this),u=0;u<i.length;u++){var l=i[u];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(r){for(var s=[],c=[],f=0;f<r.length;f++){var h=r[f];h.data.transition=a,h.data.pos=h.elm.getBoundingClientRect(),n[h.key]?s.push(h):c.push(h)}this.kept=t(e,null,s),this.removed=c}return t(e,null,o)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach($o),t.forEach(Wo),t.forEach(Go),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;uo(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(no,n._moveCb=function t(r){r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(no,t),n._moveCb=null,lo(n,e))})}}))},methods:{hasMove:function(t,e){if(!Ji)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Vi(n,t)}),Yi(n,e),n.style.display="none",this.$el.appendChild(n);var r=fo(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function $o(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Wo(t){t.data.newPos=t.elm.getBoundingClientRect()}function Go(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,i=e.top-n.top;if(r||i){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+r+"px,"+i+"px)",o.transitionDuration="0s"}}var Xo={Transition:Uo,TransitionGroup:qo};nr.config.mustUseProp=br,nr.config.isReservedTag=Dr,nr.config.isReservedAttr=yr,nr.config.getTagNamespace=zr,nr.config.isUnknownElement=Fr,A(nr.options.directives,Lo),A(nr.options.components,Xo),nr.prototype.__patch__=G?Mo:T,nr.prototype.$mount=function(t,e){return t=t&&G?Ur(t):void 0,Ie(this,t,e)},nr.nextTick(function(){F.devtools&&ot&&ot.emit("init",nr)},0),e["a"]=nr}).call(e,n("DuR2"))},"/whu":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},"1aA0":function(t,e,n){var r=n("ulTY")("meta"),i=n("UKM+"),o=n("WBcL"),a=n("lDLk").f,u=0,l=Object.isExtensible||function(){return!0},s=!n("zgIt")(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++u,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[r].w},d=function(t){return s&&p.NEED&&l(t)&&!o(t,r)&&c(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},"2p1q":function(t,e,n){var r=n("lDLk"),i=n("fU25");t.exports=n("bUqO")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},"3g/S":function(t,e,n){var r=n("OzIq"),i=n("7gX0"),o=n("V3l/"),a=n("M8WE"),u=n("lDLk").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},"7O1s":function(t,e,n){var r=n("DIVP"),i=n("XSOZ"),o=n("kkCw")("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},"7gX0":function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},"7ylX":function(t,e,n){var r=n("DIVP"),i=n("twxM"),o=n("QKXm"),a=n("mZON")("IE_PROTO"),u=function(){},l="prototype",s=function(){var t,e=n("jhxf")("iframe"),r=o.length,i="<",a=">";e.style.display="none",n("d075").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),s=t.F;while(r--)delete s[l][o[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[l]=r(t),n=new u,u[l]=null,n[a]=t):n=s(),void 0===e?n:i(n,e)}},"9GpA":function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},"9vb1":function(t,e,n){var r=n("bN1p"),i=n("kkCw")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},"A0n/":function(t,e,n){"use strict";var r=n("OzIq"),i=n("WBcL"),o=n("bUqO"),a=n("Ds5P"),u=n("R3AP"),l=n("1aA0").KEY,s=n("zgIt"),c=n("VWgF"),f=n("yYvK"),h=n("ulTY"),d=n("kkCw"),p=n("M8WE"),g=n("3g/S"),v=n("C+Ps"),y=n("XO1R"),m=n("DIVP"),b=n("UKM+"),x=n("PHqh"),_=n("s4j0"),w=n("fU25"),M=n("7ylX"),S=n("bG/2"),k=n("x9zv"),O=n("lDLk"),E=n("Qh14"),A=k.f,C=O.f,T=S.f,P=r.Symbol,j=r.JSON,N=j&&j.stringify,L="prototype",R=d("_hidden"),D=d("toPrimitive"),z={}.propertyIsEnumerable,I=c("symbol-registry"),F=c("symbols"),B=c("op-symbols"),U=Object[L],H="function"==typeof P,q=r.QObject,$=!q||!q[L]||!q[L].findChild,W=o&&s(function(){return 7!=M(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(U,e);r&&delete U[e],C(t,e,n),r&&t!==U&&C(U,e,r)}:C,G=function(t){var e=F[t]=M(P[L]);return e._k=t,e},X=H&&"symbol"==typeof P.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof P},Y=function(t,e,n){return t===U&&Y(B,e,n),m(t),e=_(e,!0),m(n),i(F,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=M(n,{enumerable:w(0,!1)})):(i(t,R)||C(t,R,w(1,{})),t[R][e]=!0),W(t,e,n)):C(t,e,n)},V=function(t,e){m(t);var n,r=v(e=x(e)),i=0,o=r.length;while(o>i)Y(t,n=r[i++],e[n]);return t},K=function(t,e){return void 0===e?M(t):V(M(t),e)},Z=function(t){var e=z.call(this,t=_(t,!0));return!(this===U&&i(F,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,R)&&this[R][t])||e)},J=function(t,e){if(t=x(t),e=_(e,!0),t!==U||!i(F,e)||i(B,e)){var n=A(t,e);return!n||!i(F,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},Q=function(t){var e,n=T(x(t)),r=[],o=0;while(n.length>o)i(F,e=n[o++])||e==R||e==l||r.push(e);return r},tt=function(t){var e,n=t===U,r=T(n?B:x(t)),o=[],a=0;while(r.length>a)!i(F,e=r[a++])||n&&!i(U,e)||o.push(F[e]);return o};H||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(B,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),W(this,t,w(1,n))};return o&&$&&W(U,t,{configurable:!0,set:e}),G(t)},u(P[L],"toString",function(){return this._k}),k.f=J,O.f=Y,n("WcO1").f=S.f=Q,n("Y1aA").f=Z,n("Y1N3").f=tt,o&&!n("V3l/")&&u(U,"propertyIsEnumerable",Z,!0),p.f=function(t){return G(d(t))}),a(a.G+a.W+a.F*!H,{Symbol:P});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=E(d.store),it=0;rt.length>it;)g(rt[it++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(I,t+="")?I[t]:I[t]=P(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in I)if(I[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),a(a.S+a.F*!H,"Object",{create:K,defineProperty:Y,defineProperties:V,getOwnPropertyDescriptor:J,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),j&&a(a.S+a.F*(!H||s(function(){var t=P();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){var e,n,r=[t],i=1;while(arguments.length>i)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!X(t))return y(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,N.apply(j,r)}}),P[L][D]||n("2p1q")(P[L],D,P[L].valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},A16L:function(t,e,n){var r=n("R3AP");t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},BbyF:function(t,e,n){var r=n("oeih"),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},"C+Ps":function(t,e,n){var r=n("Qh14"),i=n("Y1N3"),o=n("Y1aA");t.exports=function(t){var e=r(t),n=i.f;if(n){var a,u=n(t),l=o.f,s=0;while(u.length>s)l.call(t,a=u[s++])&&e.push(a)}return e}},CEne:function(t,e,n){"use strict";var r=n("OzIq"),i=n("lDLk"),o=n("bUqO"),a=n("kkCw")("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},DIVP:function(t,e,n){var r=n("UKM+");t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},Ds5P:function(t,e,n){var r=n("OzIq"),i=n("7gX0"),o=n("2p1q"),a=n("R3AP"),u=n("rFzY"),l="prototype",s=function(t,e,n){var c,f,h,d,p=t&s.F,g=t&s.G,v=t&s.S,y=t&s.P,m=t&s.B,b=g?r:v?r[e]||(r[e]={}):(r[e]||{})[l],x=g?i:i[e]||(i[e]={}),_=x[l]||(x[l]={});for(c in g&&(n=e),n)f=!p&&b&&void 0!==b[c],h=(f?b:n)[c],d=m&&f?u(h,r):y&&"function"==typeof h?u(Function.call,h):h,b&&a(b,c,h,t&s.U),x[c]!=h&&o(x,c,d),y&&_[c]!=h&&(_[c]=h)};r.core=i,s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},DuR2:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"===typeof window&&(n=window)}t.exports=n},FryR:function(t,e,n){var r=n("/whu");t.exports=function(t){return Object(r(t))}},IRJ3:function(t,e,n){"use strict";var r=n("7ylX"),i=n("fU25"),o=n("yYvK"),a={};n("2p1q")(a,n("kkCw")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},KB1o:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},KOrd:function(t,e,n){var r=n("WBcL"),i=n("FryR"),o=n("mZON")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},M8WE:function(t,e,n){e.f=n("kkCw")},NQzu:function(t,e,n){(function(e,r){t.exports=r(n("Za4h"))})(0,function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.api=e.__api__=e.Chart=e.Plot=e.GPL=void 0;var r=n(1),i=n(3),o=n(10),a=n(16),u=n(20),l=n(38),s=n(18),c=n(32),f=n(25),h=n(26),d=n(7),p=n(40),g=n(41),v=n(42),y=n(4),m=n(45),b=n(51),x=n(55),_=n(56),w=n(59),M=n(60),S=n(61),k=n(63),O=n(64),E=n(65),A=n(66),C=n(67),T=n(68),P=n(69),j=n(70),N=n(71),L=n(39),R=n(72),D=n(73),z=n(75),I=n(76),F=n(77),B=n(78),U=n(9),H=n(8),q=n(79),$=n(2),W=G($);function G(t){return t&&t.__esModule?t:{default:t}}function X(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}n(82);var Y={},V={},K={UnitDomainPeriodGenerator:s.UnitDomainPeriodGenerator},Z={errorCodes:H.errorCodes,unitsRegistry:f.unitsRegistry,scalesRegistry:h.scalesRegistry,grammarRegistry:d.GrammarRegistry,tickFormat:c.FormatterRegistry,isChartElement:i.utils.isChartElement,d3:W.default,utils:i.utils,svgUtils:o.utilsDraw,tickPeriod:s.UnitDomainPeriodGenerator,colorBrewers:{add:function(t,e){t in Y||(Y[t]=e)},get:function(t){return Y[t]}},d3_animationInterceptor:U.d3_animationInterceptor,pluginsSDK:q.PluginsSDK,plugins:{add:function(t,e){if(t in V)throw new Error("Plugin is already registered.");V[t]=e},get:function(t){return V[t]||function(t){throw new Error(t+" plugin is not defined")}}},globalSettings:{animationSpeed:750,renderingTimeout:1e4,asyncRendering:!1,syncRenderingInterval:50,syncPointerEvents:!1,handleRenderingErrors:!0,experimentalShouldAnimate:function(t){var e=function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg",t);return Object.keys(e).forEach(function(t){return n.setAttribute(t,String(e[t]))}),n},n=document.createElement("div");n.style.position="absolute",n.style.visibility="hidden",document.body.appendChild(n);var r=e("svg",{width:100,height:100});n.appendChild(r);var i,o,a,u=performance.now();for(i=0,a;i<10;i++)for(o=0;o<10;o++)a=e("circle",{fill:"black",r:5,cx:10*i,cy:10*o}),r.appendChild(a);var l=performance.now()-u;return document.body.removeChild(n),t.sources["/"].data.length*l<500},defaultNiceColor:!0,defaultColorBrewer:["#fde725","#fbe723","#f8e621","#f6e620","#f4e61e","#f1e51d","#efe51c","#ece51b","#eae51a","#e7e419","#e5e419","#e2e418","#dfe318","#dde318","#dae319","#d8e219","#d5e21a","#d2e21b","#d0e11c","#cde11d","#cae11f","#c8e020","#c5e021","#c2df23","#c0df25","#bddf26","#bade28","#b8de29","#b5de2b","#b2dd2d","#b0dd2f","#addc30","#aadc32","#a8db34","#a5db36","#a2da37","#a0da39","#9dd93b","#9bd93c","#98d83e","#95d840","#93d741","#90d743","#8ed645","#8bd646","#89d548","#86d549","#84d44b","#81d34d","#7fd34e","#7cd250","#7ad151","#77d153","#75d054","#73d056","#70cf57","#6ece58","#6ccd5a","#69cd5b","#67cc5c","#65cb5e","#63cb5f","#60ca60","#5ec962","#5cc863","#5ac864","#58c765","#56c667","#54c568","#52c569","#50c46a","#4ec36b","#4cc26c","#4ac16d","#48c16e","#46c06f","#44bf70","#42be71","#40bd72","#3fbc73","#3dbc74","#3bbb75","#3aba76","#38b977","#37b878","#35b779","#34b679","#32b67a","#31b57b","#2fb47c","#2eb37c","#2db27d","#2cb17e","#2ab07f","#29af7f","#28ae80","#27ad81","#26ad81","#25ac82","#25ab82","#24aa83","#23a983","#22a884","#22a785","#21a685","#21a585","#20a486","#20a386","#1fa287","#1fa187","#1fa188","#1fa088","#1f9f88","#1f9e89","#1e9d89","#1e9c89","#1e9b8a","#1f9a8a","#1f998a","#1f988b","#1f978b","#1f968b","#1f958b","#1f948c","#20938c","#20928c","#20928c","#21918c","#21908d","#218f8d","#218e8d","#228d8d","#228c8d","#228b8d","#238a8d","#23898e","#23888e","#24878e","#24868e","#25858e","#25848e","#25838e","#26828e","#26828e","#26818e","#27808e","#277f8e","#277e8e","#287d8e","#287c8e","#297b8e","#297a8e","#29798e","#2a788e","#2a778e","#2a768e","#2b758e","#2b748e","#2c738e","#2c728e","#2c718e","#2d718e","#2d708e","#2e6f8e","#2e6e8e","#2e6d8e","#2f6c8e","#2f6b8e","#306a8e","#30698e","#31688e","#31678e","#31668e","#32658e","#32648e","#33638d","#33628d","#34618d","#34608d","#355f8d","#355e8d","#365d8d","#365c8d","#375b8d","#375a8c","#38598c","#38588c","#39568c","#39558c","#3a548c","#3a538b","#3b528b","#3b518b","#3c508b","#3c4f8a","#3d4e8a","#3d4d8a","#3e4c8a","#3e4a89","#3e4989","#3f4889","#3f4788","#404688","#404588","#414487","#414287","#424186","#424086","#423f85","#433e85","#433d84","#443b84","#443a83","#443983","#453882","#453781","#453581","#463480","#46337f","#46327e","#46307e","#472f7d","#472e7c","#472d7b","#472c7a","#472a7a","#482979","#482878","#482677","#482576","#482475","#482374","#482173","#482071","#481f70","#481d6f","#481c6e","#481b6d","#481a6c","#48186a","#481769","#481668","#481467","#471365","#471164","#471063","#470e61","#470d60","#460b5e","#460a5d","#46085c","#46075a","#450559","#450457","#440256","#440154"],defaultClassBrewer:i.utils.range(20).map(function(t){return"color20-"+(1+t)}),log:function(t,e){e=e||"INFO",Array.isArray(t)||(t=[t]),console[e.toLowerCase()].apply(console,t)},facetLabelDelimiter:"  ",excludeNull:!0,minChartWidth:300,minChartHeight:200,minFacetWidth:150,minFacetHeight:100,specEngine:[{name:"COMPACT",width:600,height:400},{name:"AUTO",width:Number.MAX_VALUE,height:Number.MAX_VALUE}],fitModel:"normal",layoutEngine:"EXTRACT",autoRatio:!0,defaultSourceMap:["https://raw.githubusercontent.com","TargetProcess/tauCharts/master/src/addons","world-countries.json"].join("/"),getAxisTickLabelSize:i.utils.memoize(r.utilsDom.getAxisTickLabelSize,function(t){return String(t).length}),getScrollbarSize:r.utilsDom.getScrollbarSize,avoidScrollAtRatio:1.5,xAxisTickLabelLimit:150,yAxisTickLabelLimit:150,xTickWordWrapLinesLimit:2,yTickWordWrapLinesLimit:2,xTickWidth:9,yTickWidth:9,distToXAxisLabel:10,distToYAxisLabel:10,xAxisPadding:20,yAxisPadding:20,xFontLabelDescenderLineHeight:4,xFontLabelHeight:10,yFontLabelHeight:10,xDensityPadding:2,yDensityPadding:2,"xDensityPadding:measure":8,"yDensityPadding:measure":8,utcTime:!1,defaultFormats:{measure:"x-num-auto","measure:time":"x-time-auto"}}};u.Plot.__api__=Z,u.Plot.globalSettings=Z.globalSettings,[["COORDS.RECT",p.Cartesian],["COORDS.MAP",v.GeoMap],["COORDS.PARALLEL",g.Parallel],["ELEMENT.GENERIC.CARTESIAN",y.GenericCartesian],["ELEMENT.POINT",m.Point,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.LINE",_.Line,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.PATH",x.Path,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.AREA",b.Area,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.INTERVAL",w.Interval,"ELEMENT.GENERIC.CARTESIAN"],["ELEMENT.INTERVAL.STACKED",w.Interval,"ELEMENT.GENERIC.CARTESIAN"],["PARALLEL/ELEMENT.LINE",M.ParallelLine]].reduce(function(t,e){return t.reg.apply(t,X(e))},Z.unitsRegistry),[["identity",S.IdentityScale,function(t,e){return i.utils.defaults(t,{references:e.references,refCounter:e.refCounter})}],["color",k.ColorScale,function(t,e){return i.utils.defaults(t,{nice:e.defaultNiceColor,brewer:"measure"===t.dimType?e.defaultColorBrewer:e.defaultClassBrewer})}],["fill",N.FillScale],["size",O.SizeScale],["ordinal",E.OrdinalScale],["period",A.PeriodScale,function(t,e){return i.utils.defaults(t,{utcTime:e.utcTime})}],["time",C.TimeScale,function(t,e){return i.utils.defaults(t,{utcTime:e.utcTime})}],["linear",T.LinearScale],["logarithmic",P.LogarithmicScale],["value",j.ValueScale]].reduce(function(t,e){return t.reg.apply(t,X(e))},Z.scalesRegistry);var J=[function(t){return t.data?[]:["[data] must be specified"]}];Z.chartTypesRegistry=L.chartTypesRegistry.add("scatterplot",z.ChartScatterplot,J).add("line",I.ChartLine,J).add("area",F.ChartArea,J).add("stacked-area",function(t){return(0,F.ChartArea)(i.utils.defaults(t,{stack:!0}))},J).add("bar",function(t){return(0,D.ChartInterval)(i.utils.defaults(t,{flip:!1}))},J).add("horizontalBar",function(t){return(0,D.ChartInterval)(i.utils.defaults({flip:!0},t))},J).add("horizontal-bar",function(t){return(0,D.ChartInterval)(i.utils.defaults({flip:!0},t))},J).add("stacked-bar",function(t){return(0,D.ChartInterval)(i.utils.defaults({flip:!1,stack:!0},t))},J).add("horizontal-stacked-bar",function(t){return(0,D.ChartInterval)(i.utils.defaults({flip:!0,stack:!0},t))},J).add("map",R.ChartMap,J.concat([function(t){var e=t.fill&&t.code;if(t.fill&&!e)return"[code] must be specified when using [fill]"},function(t){var e=t.latitude&&t.longitude;if((t.latitude||t.longitude)&&!e)return"[latitude] and [longitude] both must be specified"}])).add("parallel",B.ChartParallel,J.concat([function(t){var e=t.columns&&t.columns.length>1;if(!e)return"[columns] property must contain at least 2 dimensions"}]));var Q="1.2.2";e.GPL=a.GPL,e.Plot=u.Plot,e.Chart=l.Chart,e.__api__=K,e.api=Z,e.version=Q,e.default={GPL:a.GPL,Plot:u.Plot,Chart:l.Chart,__api__:K,api:Z,version:Q}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utilsDom=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(2),o=u(i),a=n(3);function u(t){return t&&t.__esModule?t:{default:t}}var l=document.createElement("div"),s=new WeakMap,c={appendTo:function(t,e){var n;return t instanceof Node?n=t:(l.insertAdjacentHTML("afterbegin",t),n=l.childNodes[0]),e.appendChild(n),n},getScrollbarSize:function(t){if(s.has(t))return s.get(t);var e=t.style.overflow;t.style.overflow="scroll";var n={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return t.style.overflow=e,s.set(t,n),n},setScrollPadding:function(t,e){e=e||"both";var n="horizontal"===e||"both"===e,r="vertical"===e||"both"===e,i=c.getScrollbarSize(t),o=r?i.width+"px":"0",a=n?i.height+"px":"0";t.style.overflow="hidden",t.style.padding="0 "+o+" "+a+" 0";var u=t.scrollWidth>t.clientWidth,l=t.scrollHeight>t.clientHeight,s=r&&!l?i.width+"px":"0",f=n&&!u?i.height+"px":"0";return t.style.padding="0 "+s+" "+f+" 0",t.style.overflow="",t.style.overflowX=u?"scroll":"hidden",t.style.overflowY=l?"scroll":"hidden",i},getStyle:function(t,e){return window.getComputedStyle(t,void 0).getPropertyValue(e)},getStyleAsNum:function(t,e){return parseInt(this.getStyle(t,e)||0,10)},getContainerSize:function(t){var e=this.getStyleAsNum(t,"padding-left"),n=this.getStyleAsNum(t,"padding-right"),r=this.getStyleAsNum(t,"padding-bottom"),i=this.getStyleAsNum(t,"padding-top"),o=this.getStyleAsNum(t,"border-top-width"),a=this.getStyleAsNum(t,"border-left-width"),u=this.getStyleAsNum(t,"border-right-width"),l=this.getStyleAsNum(t,"border-bottom-width"),s=o+a+u+l,c=t.getBoundingClientRect();return{width:c.width-e-n-2*s,height:c.height-r-i-2*s}},getAxisTickLabelSize:function(t){var e=document.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width="100px",e.style.height="100px",e.style.border="1px solid green",e.style.top="0",document.body.appendChild(e),e.innerHTML='<svg class="graphical-report__svg">\n            <g class="graphical-report__cell cell">\n            <g class="x axis">\n            <g class="tick"><text>'+t+"</text></g>\n            </g>\n            </g>\n            </svg>";var n=o.default.select(e).selectAll(".x.axis .tick text")[0][0],r={width:0,height:0},i=n.getBoundingClientRect();r.width=i.right-i.left,r.height=i.bottom-i.top;var a=0!==t.length?r.width/t.length:0;return r.width=r.width+1.5*a,document.body.removeChild(e),r},getLabelSize:function(t,e){for(var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o="string"===typeof n?n:n+"px",a=0,u=0,l=t.length-1,s=0;s<=l;s++){var f=t.charAt(s),h=c.getCharSize(f,{fontSize:o,fontFamily:r,fontWeight:i});a+=h.width,u=Math.max(u,h.height)}return{width:a,height:parseInt(o)}},getCharSize:a.utils.memoize(function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,o=document.createElement("div");o.style.position="absolute",o.style.visibility="hidden",o.style.border="0px",o.style.top="0",o.style.fontSize=n,o.style.fontFamily=r,o.style.fontWeight=i,document.body.appendChild(o),o.innerHTML=" "===t?"&nbsp;":t;var a={width:0,height:0},u=o.getBoundingClientRect();return a.width=u.right-u.left,a.height=u.bottom-u.top,document.body.removeChild(o),a},function(t,e){return t+"_"+JSON.stringify(e)}),selectOrAppend:function(t,e){var n={".":function(t,e){return e.classed(t,!0)},"#":function(t,e){return e.attr("id",t)}},r=Object.keys(n).join("");if(e.indexOf(" ")>=0)throw new Error("Selector should not contain whitespaces.");if(r.indexOf(e[0])>=0)throw new Error("Selector must have tag at the beginning.");var i=t instanceof Element;i&&(t=o.default.select(t));var a,u=function(t){return i?t.node():t},l=t.selectAll(e).filter(function(){return this.parentNode===t.node()}).filter(function(t,e){return 0===e});if(!l.empty())return u(l);for(var s,c=-1,f=null,h=1,d=e.length;h<=d;h++)(h==d||r.indexOf(e[h])>=0)&&(s=e.substring(c+1,h),c<0?a=t.append(s):n[f].call(null,s,a),f=e[h],c=h);return u(a)},selectImmediate:function(t,e){return c.selectAllImmediate(t,e)[0]||null},selectAllImmediate:function(t,e){for(var n=[],r=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,i=t.firstElementChild;Boolean(i);i=i.nextElementSibling)r.call(i,e)&&n.push(i);return n},sortChildren:function(t,e){if(t.childElementCount>0){var n,r,i=Array.prototype.filter.call(t.childNodes,function(t){return t.nodeType===Node.ELEMENT_NODE}),o=i.slice().sort(e),u=i.reduce(function(t,e,n){return t.set(e,n),t},new Map),l=o.reduce(function(t,e,i){var a=u.get(e),l=i-a;return l!==r&&(n&&t.push(n),r=l,n={from:a,to:i,elements:[]}),n.elements.push(e),i===o.length-1&&t.push(n),t},[]),s=l.slice().sort(function(t,e){return t.from-e.from}),c=s.reduce(function(t,e,n){return t.set(e,n),t},new Map),f=function(t){for(var e,n,r,i=l.map(function(t,e){return{elements:t.elements,from:c.get(t),to:e}}).sort(a.utils.createMultiSorter(function(t,e){return t.elements.length-e.elements.length},t?function(t,e){return e.to-t.to}:function(t,e){return t.to-e.to})),o=0;o<i.length;o++){if(n=i[o],n.from>n.to)for(e=o+1;e<i.length;e++)r=i[e],r.from>=n.to&&r.from<n.from&&r.from++;if(n.from<n.to)for(e=o+1;e<i.length;e++)r=i[e],r.from>n.from&&r.from<=n.to&&r.from--}return i.filter(function(t){return t.from!==t.to})},h=f(!0),d=f(!1),p=h.length<d.length?h:d,g=s.map(function(t){return t.elements});p.forEach(function(e){var n,r=g.splice(e.from,1)[0],i=g[e.to],o=i?i[0]:null;1===e.elements.length?n=r[0]:(n=document.createDocumentFragment(),r.forEach(function(t){n.appendChild(t)})),t.insertBefore(n,o),g.splice(e.to,0,r)})}},classes:function(){for(var t=[],e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.filter(function(t){return Boolean(t)}).forEach(function(e){"string"===typeof e?t.push(e):"object"===("undefined"===typeof e?"undefined":r(e))&&t.push.apply(t,Object.keys(e).filter(function(t){return Boolean(e[t])}))}),a.utils.unique(t).join(" ").trim().replace(/\s{2,}/g," ")}};e.utilsDom=c},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utils=void 0;var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(t){i=!0,o=t}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(4),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var c=function t(e,n,r,i){var o=i(r(e),e);return(o[n]||[]).forEach(function(e){return t(e,n,r,i)}),o},f=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=n(e,i);o&&(e.units||[]).map(function(e){return t(e,n,r,i+1)}),r(e,i)},h=0,d={},p=function(){function t(t){return"object"==("undefined"===typeof t?"undefined":i(t))?JSON.parse(JSON.stringify(t)):t}var e=[];function n(t){for(var e in t)this[e]=t[e]}function r(){this.copiedObjects=[];var t=this;this.recursiveDeepCopy=function(e){return t.deepCopy(e)},this.depth=0}function o(t,e){var n=new r;return e&&(n.maxDepth=e),n.deepCopy(t)}return n.prototype={constructor:n,canCopy:function(t){return!1},create:function(t){},populate:function(t,e,n){}},r.prototype={constructor:r,maxDepth:256,cacheResult:function(t,e){this.copiedObjects.push([t,e])},getCachedResult:function(t){for(var e=this.copiedObjects,n=e.length,r=0;r<n;r++)if(e[r][0]===t)return e[r][1]},deepCopy:function(t){if(null===t)return null;if("object"!==("undefined"===typeof t?"undefined":i(t)))return t;var n=this.getCachedResult(t);if(n)return n;for(var r=0;r<e.length;r++){var o=e[r];if(o.canCopy(t))return this.applyDeepCopier(o,t)}throw new Error("no DeepCopier is able to copy "+t)},applyDeepCopier:function(t,e){var n=t.create(e);if(this.cacheResult(e,n),this.depth++,this.depth>this.maxDepth)throw new Error("Exceeded max recursion depth in deep copy.");return t.populate(this.recursiveDeepCopy,e,n),this.depth--,n}},o.DeepCopier=n,o.deepCopiers=e,o.register=function(t){t instanceof n||(t=new n(t)),e.unshift(t)},o.register({canCopy:function(){return!0},create:function(e){return e instanceof e.constructor?t(e.constructor.prototype):{}},populate:function(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}}),o.register({canCopy:function(t){return t instanceof Array},create:function(t){return new t.constructor},populate:function(t,e,n){for(var r=0;r<e.length;r++)n.push(t(e[r]));return n}}),o.register({canCopy:function(t){return t instanceof Date},create:function(t){return new Date(t)}}),o}(),g=[o.GenericCartesian],v=function(t){return/^(#|rgb\(|rgba\()/.test(t)},y=/(.)^/,m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},x=/\\|'|\r|\n|\u2028|\u2029/g,_="(?:"+Object.keys(m).join("|")+")",w=RegExp(_),M=RegExp(_,"g"),S={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},k={clone:function(t){return p(t)},isDate:function(t){return t instanceof Date&&!isNaN(Number(t))},isObject:function(t){return null!=t&&"object"===("undefined"===typeof t?"undefined":i(t))},isChartElement:function(t){return g.some(function(e){return t instanceof e})},niceZeroBased:function(t){var e=10,n=parseFloat(Math.min.apply(Math,s(t)).toFixed(15)),r=parseFloat(Math.max.apply(Math,s(t)).toFixed(15));if(n===r){var i=r>=0?-1:1,o=r||1;r-=i*o/e}n=Math.min(0,n),r=Math.max(0,r);var a=[n,r],u=a[1]-a[0],l=Math.pow(10,Math.floor(Math.log(u/e)/Math.LN10)),c=e/u*l,f=[[.15,10],[.35,5],[.75,2],[1,1],[2,1]],h=-1;while(c>f[++h][0]);l*=f[h][1],a[0]=Math.floor(a[0]/l)*l,a[1]=Math.ceil(a[1]/l)*l;var d=n-a[0],p=a[1]-r,g=l/2;if(n<0){var v=d>=g?-d:0;a[0]=a[0]-v}if(r>0){var y=p>=g?-p:0;a[1]=a[1]+y}return[parseFloat(a[0].toFixed(15)),parseFloat(a[1].toFixed(15))]},niceTimeDomain:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{utc:!1},i=n.utc,o=u.default.extent(t),a=r(o,2),l=a[0],s=a[1],c=s-l,f=i?u.default.time.scale.utc:u.default.time.scale;if(0===c){var h=864e5;return l=new Date(l.getTime()-h),s=new Date(s.getTime()+h),f().domain([l,s]).nice(e).domain()}var d=f().domain([l,s]).nice(e);if(e)return d.domain();var p=f().domain([l,s]).nice(e).domain(),g=r(p,2),v=g[0],y=g[1],m=d.ticks(),b=m.length-1;return(l-v)/(m[1]-v)<.5&&(l=v),(y-s)/(y-m[b-1])<.5&&(s=y),[l,s]},traverseJSON:c,generateHash:function(t){var e=btoa(encodeURIComponent(t)).replace(/=/g,"_");return d.hasOwnProperty(e)||(d[e]="H"+ ++h),d[e]},generateRatioFunction:function(t,e,n){var r=function(t){return k.isDate(t)?t.getTime():t},i=0,o=null,a=k.memoize(function(t,e){return k.unique(t.map(function(t){return e.reduce(function(e,n){return e.concat(r(t[n]))},[])}),function(t){return JSON.stringify(t)}).reduce(function(t,e){var n=e[0];return t[n]=t[n]||0,t[n]+=1,t},{})},function(t,e){var n=o===t?i:++i;return o=t,e.join("")+"-"+n});return function(r,i,o){var u=o.length,l=n.getSpec(),s=l.sources["/"].data,c=l.unit.units[0].guide||{};c.padding=c.padding||{l:0,r:0,t:0,b:0};var f=0;"x"===t?f=c.padding.l+c.padding.r:"y"===t&&(f=c.padding.t+c.padding.b);var h=function(t){var e=a(s,t);return Object.keys(e).reduce(function(t,n){return t+e[n]},0)},d=function(t,e){return a(s,t)[e]},p=h(e),g=(i-u*f)/p,v=d(e,r);return(v*g+f)/i}},traverseSpec:f,isSpecRectCoordsOnly:function(t){var e=!0;try{k.traverseSpec(t,function(t){if(0===t.type.indexOf("COORDS.")&&"COORDS.RECT"!==t.type)throw new Error("Not applicable")},function(t){return t})}catch(t){"Not applicable"===t.message&&(e=!1)}return e},throttleLastEvent:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("requestAnimationFrame"===r){var i=!1;return function(){if(!i){requestAnimationFrame(function(){i=!1});for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];n.apply(this,o),i=!0}t.e=e,t.ts=new Date}}return function(){var i={e:e,ts:new Date},o=t.e&&t.e===i.e?i.ts-t.ts:r;if(o>=r){for(var a=arguments.length,u=Array(a),l=0;l<a;l++)u[l]=arguments[l];n.apply(this,u)}t.e=i.e,t.ts=i.ts}},splitEvenly:function(t,e){var n=t[0],r=t[1],i=(r-n)/(e-1),o=e>=2?k.range(e-2).map(function(t){return n+i*(t+1)}):[];return[n].concat(s(o),[r])},extRGBColor:function(t){return v(t)?t:""},extCSSClass:function(t){return v(t)?"":t},toRadian:function(t){return t/180*Math.PI},normalizeAngle:function(t){return Math.abs(t)>=360&&(t%=360),t<0&&(t=360+t),t},range:function(t,e){1===arguments.length&&(e=t,t=0);for(var n=[],r=t;r<e;r++)n.push(r);return n},flatten:function(t){var e;return Array.isArray(t)?(e=[]).concat.apply(e,s(t.map(function(t){return k.flatten(t)}))):t},unique:function(t,e){for(var n={},r=[],i=t.length,o=e||function(t){return String(t)},a=0;a<i;++a){var u=t[a],l=o(u);n.hasOwnProperty(l)||(n[l]=!0,r.push(u))}return r},groupBy:function(t,e){return t.reduce(function(t,n){var r=e(n);return t[r]=t[r]||[],t[r].push(n),t},{})},union:function(t,e){return k.unique(t.concat(e))},intersection:function(t,e){return t.filter(function(t){return-1!==e.indexOf(t)})},defaults:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n.length;if(0===i||!t)return t;for(var o=0;o<i;o++)for(var a=n[o],u=k.isObject(a)?Object.keys(a):[],l=u.length,s=0;s<l;s++){var c=u[s];void 0===t[c]&&(t[c]=a[c])}return t},omit:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Object.assign({},t);return n.forEach(function(t){delete i[t]}),i},memoize:function(t,e){var n=function n(r){var i=n.cache,o=String(e?e.apply(this,arguments):r);return i.hasOwnProperty(o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},createMultiSorter:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t,n){var r=0;return e.every(function(e){return r=e(t,n),0===r}),r}},pick:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i={};return null==t?i:n.reduce(function(e,n){var r=t[n];return r&&(e[n]=r),e},{})},escape:function(t){return t=null==t?"":String(t),w.test(t)?t.replace(M,function(t){return m[t]}):t},template:function(t,e,n){!e&&n&&(e=n),e=k.defaults({},e,S);var r=RegExp([(e.escape||y).source,(e.interpolate||y).source,(e.evaluate||y).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,u){return o+=t.slice(i,u).replace(x,function(t){return"\\"+b[t]}),i=u+e.length,n?o+="'+\n((__t=("+n+"))==null?'':utils.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj",o)}catch(t){throw t.source=o,t}var u=function(t){return a.call(this,t)},l=e.variable||"obj";return u.source="function("+l+"){\n"+o+"}",u}};e.utils=k},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GenericCartesian=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(5),o=n(7),a=n(9),u=n(3),l=n(2),s=c(l);function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function g(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.GenericCartesian=function(t){function e(t){d(this,e);var n=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.config=t,n.config.guide=u.utils.defaults(n.config.guide||{},{animationSpeed:0,enableColorToBarPosition:!1}),n.config.guide.size=n.config.guide.size||{};var r=n.config.stack,i=n.config.guide.enableColorToBarPosition,a=[t.flip&&o.GrammarRegistry.get("flip"),r&&o.GrammarRegistry.get("stack"),i&&o.GrammarRegistry.get("positioningByColor")];return n.decorators=(n.config.transformRules||a).concat(t.transformModel||[]),n.adjusters=(n.config.adjustRules||[]).concat(t.adjustScales||[]),n}return g(e,t),r(e,[{key:"defineGrammarModel",value:function(t){var e=this,n=this.config;this.regScale("x",t("pos",n.x,[0,n.options.width])).regScale("y",t("pos",n.y,[n.options.height,0])).regScale("size",t("size",n.size,{})).regScale("color",t("color",n.color,{})).regScale("split",t("split",n.split,{})).regScale("label",t("label",n.label,{})).regScale("identity",t("identity",n.identity,{}));var r=this.getScale("x"),i=this.getScale("y"),o=this.getScale("size"),a=this.getScale("label"),u=this.getScale("color"),l=this.getScale("split"),s=this.getScale("identity"),c=i.domain(),f=i.discrete?c[0]:Math.max(0,Math.min.apply(Math,h(c))),d=i.value(f)+.5*i.stepSize(f),p=u.domain(),g="(@taucharts@)";return{data:function(){return e.data()},flip:!1,scaleX:r,scaleY:i,scaleSize:o,scaleLabel:a,scaleColor:u,scaleSplit:l,scaleIdentity:s,color:function(t){return u.value(t[u.dim])},label:function(t){return a.value(t[a.dim])},group:function(t){return""+t[u.dim]+g+t[l.dim]},order:function(t){var e=t.split(g)[0],n=p.indexOf(e);return n<0?Number.MAX_VALUE:n},size:function(t){return o.value(t[o.dim])},id:function(t){return s.value(t[s.dim],t)},xi:function(t){return r.value(t[r.dim])},yi:function(t){return i.value(t[i.dim])},y0:function(){return d}}}},{key:"getGrammarRules",value:function(){return this.decorators.filter(function(t){return t})}},{key:"getAdjustScalesRules",value:function(){return(this.adjusters||[]).filter(function(t){return t})}},{key:"createScreenModel",value:function(t){var e=t.flip,n=function(t,e,n){return t?e:n};return{flip:e,id:t.id,x:n(e,t.yi,t.xi),y:n(e,t.xi,t.yi),x0:n(e,t.y0,t.xi),y0:n(e,t.xi,t.y0),size:t.size,group:t.group,order:t.order,label:t.label,color:function(e){return t.scaleColor.toColor(t.color(e))},class:function(e){return t.scaleColor.toClass(t.color(e))},model:t,toFibers:function(){var e=t.data(),n=u.utils.groupBy(e,t.group);return Object.keys(n).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(t,e){return t.concat([n[e]])},[])}}}},{key:"drawFrames",value:function(){var t=this,e=this.config.options,n=function(t,e){var n=Math.pow(10,e);return Math.round(n*t)/n},r=function(e){return n(t.screenModel.size(e)/2,4)},i=a.d3_animationInterceptor,o=function(e,n,r){var o=t.config.guide.animationSpeed,a=e.selectAll("."+n).data(function(t){return[t]},t.screenModel.id);a.exit().call(i(o,null,{width:0},function(t){return s.default.select(t).remove()})),a.call(i(o,null,r)),a.enter().append("rect").style("stroke-width",0).call(i(o,{width:0},r))},l=this.config.flip,c=l?"y":"x",h=l?"x":"y",d=l?"x0":"y0",p=l?"height":"width",g=l?"width":"height",v=function(){var e,n,i;o(this,"lvl-top",(e={},f(e,p,function(t){return r(t)}),f(e,g,1),f(e,c,function(e){return t.screenModel[c](e)-r(e)/2}),f(e,h,function(e){return t.screenModel[h](e)}),f(e,"fill",function(e){return t.screenModel.color(e)}),f(e,"class",function(e){return"lvl-top "+t.screenModel.class(e)}),e)),o(this,"lvl-btm",(n={},f(n,p,function(t){return r(t)}),f(n,g,1),f(n,c,function(e){return t.screenModel[c](e)-r(e)/2}),f(n,h,function(e){return t.screenModel[d](e)}),f(n,"fill",function(e){return t.screenModel.color(e)}),f(n,"class",function(e){return"lvl-btm "+t.screenModel.class(e)}),n)),o(this,"lvl-link",(i={},f(i,p,.5),f(i,g,function(e){return Math.abs(t.screenModel[h](e)-t.screenModel[d](e))}),f(i,c,function(e){return t.screenModel[c](e)-.25}),f(i,h,function(e){return Math.min(t.screenModel[h](e),t.screenModel[d](e))}),f(i,"fill",function(e){return t.screenModel.color(e)}),f(i,"class",function(e){return"lvl-link "+t.screenModel.class(e)}),i))},y=function(){this.attr("class","frame-id-"+t.config.uid).call(function(){var e=this.selectAll(".generic").data(function(t){return t},t.screenModel.id);e.exit().remove(),e.call(v),e.enter().append("g").attr("class","generic").call(v)})},m=u.utils.groupBy(this.data(),t.screenModel.group),b=Object.keys(m).sort(function(e,n){return t.screenModel.order(e)-t.screenModel.order(n)}).reduce(function(t,e){return t.concat([m[e]])},[]),x=e.container.selectAll(".frame-id-"+t.config.uid).data(b);x.exit().remove(),x.call(y),x.enter().append("g").call(y)}}]),e}(i.Element)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Element=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(6),o=n(3),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.Element=function(t){function e(t){s(this,e);var n=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.screenModel=null,n._elementNameSpace=t.namespace||"default",n._elementScalesHub={},n}return f(e,t),r(e,[{key:"regScale",value:function(t,e){return this._elementScalesHub[t]=e,this}},{key:"getScale",value:function(t){return this._elementScalesHub[t]||null}},{key:"fireNameSpaceEvent",value:function(t,e){var n=this._elementNameSpace;this.fire(t+"."+n,e)}},{key:"subscribe",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},r=this,i={};[{event:"mouseover",limit:0},{event:"mouseout",limit:0},{event:"click",limit:0},{event:"mousemove",limit:"requestAnimationFrame"}].forEach(function(a){var l=a.event,s=a.limit,c=function(t){var i={data:e.call(this,t),event:n.call(this,u.default.event,t)};r.fire(l,i),r.fireNameSpaceEvent(l,i)};t.on(l,o.utils.throttleLastEvent(i,l,c,s))})}},{key:"allocateRect",value:function(){return{left:0,top:0,width:0,height:0}}},{key:"defineGrammarModel",value:function(t){return{}}},{key:"getGrammarRules",value:function(){return[]}},{key:"getAdjustScalesRules",value:function(){return[]}},{key:"createScreenModel",value:function(t){}},{key:"getClosestElement",value:function(t,e){return null}},{key:"addInteraction",value:function(){}},{key:"draw",value:function(){this.config.options.container=this.config.options.slot(this.config.uid),this.drawFrames(this.config.frames)}},{key:"data",value:function(){return this.config.frames.reduce(function(t,e){return t.concat(e.part())},[])}},{key:"node",value:function(){return this}}]),e}(i.Emitter)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i={},o={};function a(t){var e=o[t];return e||(e=function(){var e,n,r=this,i=0,o=[];while(r=r.handler){if(n=r.callbacks[t],"function"===typeof n){if(!e)for(e=[this],i=0;i<arguments.length;i++)e.push(arguments[i]);o.unshift({fn:n,context:r.context,args:e})}if(n=r.callbacks["*"],"function"===typeof n){if(!e)for(e=[this],i=0;i<arguments.length;i++)e.push(arguments[i]);o.unshift({fn:n,context:r.context,args:[{sender:this,type:t,args:e}]})}}o.forEach(function(t){return t.fn.apply(t.context,t.args)})},o[t]=e),e}var u=function(){function t(){r(this,t),this.handler=null,this.emit_destroy=a("destroy")}return n(t,[{key:"addHandler",value:function(t,e){e=e||this,this.handler={callbacks:t,context:e,handler:this.handler}}},{key:"on",value:function(t,e,n){var r={};return r[t]=e,this.addHandler(r,n),r}},{key:"fire",value:function(t,e){a.call(this,t).call(this,e)}},{key:"removeHandler",value:function(t,e){var n,r=this;e=e||this;while(n=r,r=r.handler)if(r.callbacks===t&&r.context===e)return r.callbacks=i,void(n.handler=r.handler)}},{key:"destroy",value:function(){this.emit_destroy(),this.handler=null}}]),t}();e.Emitter=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GrammarRegistry=void 0;var r=n(3),i=n(8);function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var a={},u={get:function(t){return a[t]},reg:function(t,e){return a[t]=e,this}};u.reg("identity",function(){return{}}).reg("flip",function(t){var e=t.scaleY,n=t.scaleX,r=-.5,i=n.domain(),a=n.discrete?i[0]:Math.max(0,Math.min.apply(Math,o(i))),u=n.value(a)+n.stepSize(a)*r;return{flip:!0,scaleX:e,scaleY:n,xi:function(t){return e.value(t[e.dim])},yi:function(t){return n.value(t[n.dim])},y0:function(){return u}}}).reg("positioningByColor",function(t){var e=t.scaleX.discrete?function(t){var e=t.data(),n=e.reduce(function(e,n){var r=n[t.scaleX.dim],i=n[t.scaleColor.dim];return r in e||(e[r]=[]),e[r].indexOf(i)<0&&e[r].push(i),e},{}),r=t.scaleX,i=t.scaleColor,o=i.discrete?i.domain():i.originalSeries().sort(function(t,e){return t-e}),a=o.length||1,u=function(t){return r.stepSize(t[r.dim])*(a/(1+a))};return{xi:function(e){var r=e[t.scaleX.dim],i=n[r]||[e[t.scaleColor.dim]],o=i.length,l=i.indexOf(e[t.scaleColor.dim]),s=u(e),c=s/(a+1),f=t.xi(e)-(o+1)*c/2,h=(1+l)*c;return f+h}}}:function(){return{}};return e(t)}).reg("groupOrderByAvg",function(t){var e=t.data(),n=function(e){return e.map(t.yi).reduce(function(t,e){return t+e},0)/e.length},r=e.reduce(function(e,n){var r=t.group(n);return e[r]=e[r]||[],e[r].push(n),e},{}),i=Object.keys(r).map(function(t){return[t,n(r[t])]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]});return{order:function(t){var e=i.indexOf(t);return e<0?Number.MAX_VALUE:e}}}).reg("stack",function(t){var e=t.data(),n=t.scaleX,o=t.scaleY;if(o.discrete||o.domain().some(function(t){return"number"!==typeof t}))throw new i.TauChartError("Stacked field ["+o.dim+"] should be a number",i.errorCodes.STACKED_FIELD_NOT_NUMBER,{field:o.dim});var a=function(t){return function(e){var r=e[n.dim],i=e[o.dim],a=i>=0?t.positive:t.negative,u=a[r]||0,l=u+i;return a[r]=l,{nextStack:l,prevStack:u}}},u=a({positive:{},negative:{}}),l=a({positive:{},negative:{}}),s=function(e){return r.utils.memoize(e,t.id)},c=Number.MAX_VALUE,f=Number.MIN_VALUE,h=function(t){return c=t<c?t:c,f=t>f?t:f,o.value(t)},d=s(function(t){return h(u(t).nextStack)}),p=s(function(t){return h(l(t).prevStack)}),g=function(e){return t.group(e)+"/"+(e[o.dim]>=0?1:-1)},v=r.utils.groupBy(e,g),y=Object.keys(v).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(t,e){return t.concat(v[e])},[]);return y.forEach(function(t){d(t),p(t)}),o.fixup(function(t){var e={};return(!t.hasOwnProperty("max")||t.max<f)&&(e.max=f),(!t.hasOwnProperty("min")||t.min>c)&&(e.min=c),e}),{group:g,data:function(){return y},yi:d,y0:p}}).reg("size_distribute_evenly",function(t,e){var n=e.minLimit,r=e.maxLimit,i=e.defMin,o=e.defMax,a=t.data(),u=function(t,e){return t-e},l=t.scaleX.discrete?t.scaleX.stepSize()/2:Number.MAX_VALUE,s=a.map(function(e){return t.xi(e)}).sort(u),c=s[0],f=s.slice(1).map(function(t){var e=t-c;return c=t,e}).filter(function(t){return t>0}).sort(u).concat(Number.MAX_VALUE)[0],h=Math.min(f,l),d="number"===typeof n?n:i,p={minSize:d,maxSize:"number"===typeof r?r:Math.max(d,Math.min(o,h))};return t.scaleSize.fixup(function(t){var e={};return t.fixed?t.maxSize>p.maxSize&&(e.maxSize=p.maxSize):(e.fixed=!0,e.minSize=p.minSize,e.maxSize=p.maxSize),e}),{}}).reg("adjustStaticSizeScale",function(t,e){var n=e.minLimit,r=e.maxLimit,i=e.defMin,o=e.defMax,a={minSize:"number"===typeof n?n:i,maxSize:"number"===typeof r?r:o};return t.scaleSize.fixup(function(t){var e={};return t.fixed||(e.fixed=!0,e.minSize=a.minSize,e.maxSize=a.maxSize),e}),{}}).reg("adjustSigmaSizeScale",function(t,e){var n=e.minLimit,r=e.maxLimit,i=e.defMin,o=e.defMax,a=t.data(),u=function(t,e){return t-e},l=a.map(function(e){return t.xi(e)}).sort(u),s=l[0],c=l.slice(1).map(function(t){var e=t-s;return s=t,e}).filter(function(t){return t>0}).sort(u).concat(Number.MAX_VALUE)[0],f=t.scaleX.discrete?t.scaleX.stepSize()/2:Number.MAX_VALUE,h=Math.min(c,f),d="number"===typeof n?n:i,p="number"===typeof r?r:o,g=function(t){var e=(d+p)/2,n=p,r=d,i=.5;return Math.round(e+(n-e)/(1+Math.exp(-(t-r)/i)))},v={minSize:d,maxSize:Math.max(d,Math.min(p,g(h)))};return t.scaleSize.fixup(function(t){var e={};return t.fixed?t.maxSize>v.maxSize&&(e.maxSize=v.maxSize):(e.fixed=!0,e.minSize=v.minSize,e.maxSize=v.maxSize),e}),{}}).reg("avoidScalesOverflow",function(t,e){var n,r,i=e.sizeDirection,o=function(t,e){return!t||t.discrete||"logarithmic"===t.scaleType||i.indexOf(e)<0},a=o(t.scaleX,"x"),u=o(t.scaleY,"y");if(a&&u)return{};t.scaleSize.fixup(function(t){return n=t.minSize,r=t.maxSize,t});var l=t.data().reduce(function(e,i){var o,l,s=t.size(i),c=(s>=n?s:n+s*(r-n))/2;return a||(o=t.xi(i),e.left=Math.min(e.left,o-c),e.right=Math.max(e.right,o+c)),u||(l=t.yi(i),e.top=Math.min(e.top,l-c),e.bottom=Math.max(e.bottom,l+c)),e},{top:Number.MAX_VALUE,right:-Number.MAX_VALUE,bottom:-Number.MAX_VALUE,left:Number.MAX_VALUE}),s=function(e,n,r,i){var o=e.domain(),a=Math.abs(e.value(o[1])-e.value(o[0])),u=(o[1]-o[0])/a,l=Math.max(0,-n),s=Math.max(0,r-a),c=t.flip?s:l,f=t.flip?l:s,h=Number(o[0])-(i?f:c)*u,d=Number(o[1])+(i?c:f)*u;return e.fixup(function(t){var e={};return t.fixed?(e.min=t.min>h?e.min:t.min,e.max=t.max<d?e.max:t.max):(e.fixed=!0,e.min=h,e.max=d,e.nice=!1),e}),a/(c+a+f)},c=a?1:s(t.scaleX,l.left,l.right,!1),f=u?1:s(t.scaleY,l.top,l.bottom,!0),h=Math.min(n*c,n*f),d=Math.min(r*c,r*f);return t.scaleSize.fixup(function(){return{minSize:h,maxSize:d}}),{}}),e.GrammarRegistry=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(t,i,o){n(this,e);var a=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.name="TauChartError",a.message=t,a.errorCode=i,a.errorArgs=o,a}return i(e,t),e}(Error),a={STACKED_FIELD_NOT_NUMBER:"STACKED_FIELD_NOT_NUMBER",NO_DATA:"NO_DATA",NOT_SUPPORTED_TYPE_CHART:"NOT_SUPPORTED_TYPE_CHART",UNKNOWN_UNIT_TYPE:"UNKNOWN_UNIT_TYPE",INVALID_LOG_DOMAIN:"INVALID_LOG_DOMAIN"};e.TauChartError=o,e.errorCodes=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cutText=e.wrapText=e.d3_selectAllImmediate=e.d3_transition=e.d3_decorator_avoidLabelsCollisions=e.d3_decorator_prettify_categorical_axis_ticks=e.d3_decorator_highlightZeroTick=e.d3_decorator_fixEdgeAxisTicksOverflow=e.d3_decorator_fixHorizontalAxisTicksOverflow=e.d3_decorator_fix_axis_start_line=e.d3_decorator_prettify_axis_label=e.d3_decorator_wrap_tick_label=e.d3_createPathTween=e.d3_animationInterceptor=void 0;var r=n(3),i=n(1),o=n(10),a=n(2),u=f(a),l=n(11),s=f(l),c=n(13);function f(t){return t&&t.__esModule?t:{default:t}}function h(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(){return r.utils.memoize(function(t){return t.node().getComputedTextLength()},function(t){return t.node().textContent.length})},g=function(t,e,n){n=n||p(),t.each(function(){var t=u.default.select(this.parentNode),r=t.data()[0],i=e(r),o=u.default.select(this),a=o.text().split(/\s+/),l=!1,s=a.reduce(function(t,e,r){if(l)return t;var a=r>0?[t,e].join(" "):e,u=n(o.text(a));if(u<i)t=a;else{var s=Math.floor(i/u*a.length);t=a.substr(0,s-4)+"...",l=!0}return t},"");o.text(s)})},v=function(t,e,n,r,i,o){o=o||p();var a=function(t,e,n,r,i,o,a){var u=a*n+o;return t.append("tspan").attr("x",r).attr("y",i).attr("dy",u+"em").text(e)};t.each(function(){var t=u.default.select(this.parentNode),l=t.data()[0],s=e(l),c=u.default.select(this),f=c.text().split(/\s+/),h=1.1,d=c.attr("x"),p=c.attr("y"),g=parseFloat(c.attr("dy"));c.text(null);var v=a(c,null,h,d,p,g,0),y=!1,m=f.length-1,b=f.reduce(function(t,e,r){if(y)return t;var i=t.length===n||r===m,a=t[t.length-1],u=""!==a?a+" "+e:e,l=o(v.text(u)),c=l>s;if(c&&i){var f=Math.floor(s/l*u.length);t[t.length-1]=u.substr(0,f-4)+"...",y=!0}return c&&!i&&t.push(e),c||(t[t.length-1]=u),t},[""]).filter(function(t){return t.length>0});p=i?-1*(b.length-1)*Math.floor(.5*r):p,b.forEach(function(t,e){return a(c,t,h,d,p,g,e)}),v.remove()})},y=function(t,e,n,r){t.selectAll(".tick").each(function(t){if(e(t)){var i=u.default.select(this),o=function(r){var i,o=e(t),a=n?o:0,u=n?0:o;r.attr("transform","translate("+a+","+u+")");var l=.5*e.stepSize(t),s=n?"x":"y",c=n?l:-l;r.select("line").attr((i={},d(i,s+"1",c),d(i,s+"2",c),i))};i.classed("tau-enter")||(i.call(o),i.classed("tau-enter",!0)),k(i,r).call(o)}})},m=function(t,e){var n=e.length&&e[0]instanceof Date;n&&(e=e.map(function(t){return Number(t)}));var r=t.selectAll(".tick").filter(function(t){return e.indexOf(n?Number(t):t)>=0})[0];if(!(r.length<2)){var i=parseFloat(r[0].attributes.transform.value.replace("translate(","")),o=parseFloat(r[1].attributes.transform.value.replace("translate(","")),a=o-i,u=0,l=-1,s=t.selectAll(".tick text").filter(function(t){return e.indexOf(n?Number(t):t)>=0})[0];s.forEach(function(t,e){var n=t.textContent||"",r=n.length;r>u&&(u=r,l=e)});var c=!1;if(l>=0){var f=s[l].getBoundingClientRect();c=a-f.width<8}t.classed({"graphical-report__d3-time-overflown":c})}},b=function(t,e){e=e.map(function(t){return Number(t)});var n=t.selectAll(".tick text").filter(function(t){return e.indexOf(Number(t))>=0})[0];if(0!==n.length){var r=t.node();while(r&&"svg"!==r.tagName)r=r.parentNode;var i=r.getBoundingClientRect();n.forEach(function(t){var e=u.default.select(t);e.attr("dx",0)});var o=function(t,e){var n=u.default.select(t),r=t.getBoundingClientRect(),o=e>0?"right":"left",a=e*(r[o]-i[o]);n.attr("dx",a>0?-e*a:0)};o(n[0],-1),o(n[n.length-1],1)}},x=function(t,e,n,r,a){var u=function(t){return t.attr("transform",o.utilsDraw.translate(0,e?r:0)),t},l=function(t){return e?t.attr("x2",n):t.attr("y2",r),t},s="tau-extra"+(e?"Y":"X")+"Tick",c=i.utilsDom.selectOrAppend(t,"g."+s),f=i.utilsDom.selectOrAppend(c,"line");c.node().hasAttribute("opacity")||c.attr("opacity",1e-6),k(c,a).call(u),k(f,a).call(l)},_=function(t,e,n,r,a){var u=n?1:-1,l=i.utilsDom.selectOrAppend(t,"text.label").attr("class",i.utilsDom.classes("label",e.cssClass)).attr("transform",o.utilsDraw.rotate(e.rotate)),s=k(l,a).attr("x",u*e.size*.5).attr("y",u*e.padding).style("text-anchor",e.textAnchor),c="  ",f=function(t){for(var e=[],n=0;n<t.length-1;n++)e.push(t[n],c);return e.push(t[n]),e}(e.text.split(c)),h=l.selectAll("tspan").data(f);if(h.enter().append("tspan").attr("class",function(t,e){return e%2?"label-token-delimiter label-token-delimiter-"+e:"label-token label-token-"+e}).text(function(t){return t}),h.exit().remove(),["left","right"].indexOf(e.dock)>=0){var d={left:[-r,0],right:[0,r]};s.attr("x",d[e.dock][Number(n)])}},w=function(t,e,n,i,a){var u=r.utils.normalizeAngle(n.rotate),l=t.selectAll(".tick text").attr("transform",o.utilsDraw.rotate(u)).style("text-anchor",n.textAnchor),s=Math.abs(u/90);if(s%2>0){var c=u<180?1:-1,f=i?.5:-2,h="top"===n.scaleOrient||"left"===n.scaleOrient?-1:1,d=f*("bottom"===n.scaleOrient||"top"===n.scaleOrient?h<0?0:.71:.32),y=t.selectAll(".tick text"),m={x:9*c,y:0,dx:i?null:d+"em",dy:d+"em"};y.transition(),y.attr(m),k(y,e,"axisTransition").attr(m)}var b=function(t){return Math.max(a.stepSize(t),n.tickFormatWordWrapLimit)};n.tickFormatWordWrap?l.call(v,b,n.tickFormatWordWrapLines,n.tickFontHeight,!i):l.call(g,b,p())},M=function(t,e,n){var r=n.length&&n[0]instanceof Date;r&&(n=n.map(function(t){return Number(t)}));var o=11,a=e?-10:20,l=e?0:1,s=e?1:-1,c=[];t.selectAll(".tick").filter(function(t){return n.indexOf(r?Number(t):t)>=0}).each(function(){var t=u.default.select(this),e=t.attr("transform").replace("translate(","").replace(" ",",").split(",")[l],n=s*parseFloat(e),r=t.selectAll("text"),i=r.node().getBBox().width,o=i/2,a=n-o,f=n+o;c.push({c:n,s:a,e:f,l:0,textRef:r,tickRef:t})});var f=function(t,e){return t.map(function(t,n,r){return e(r[n-1]||{e:-1/0,s:-1/0,l:0},t,r[n+1]||{e:1/0,s:1/0,l:0})})},h=function(t,e){var n={"[T][1]":-1,"[T][-1]":0,"[T][0]":1,"[F][0]":-1},r="["+e.toString().toUpperCase().charAt(0)+"]["+t+"]";return n.hasOwnProperty(r)?n[r]:0},d=c.sort(function(t,e){return t.c-e.c});f(d,function(t,n,r){var u=t.e>n.s,l=r.s<n.e;if(u||l){n.l=h(t.l,u);var s=n.textRef[0].length,c=n.textRef.text();s>1&&(c=c.replace(/([\.]*$)/gi,"")+"...");var f=n.l*o,d=parseFloat(n.textRef.attr("y"))+f,p=e?0:f,g=e?f:0,v=function(t){var e=0;if(!t)return e;var n=t.indexOf("rotate(");if(n>=0){var r=t.indexOf(")",n+7),i=t.substring(n+7,r);e=parseFloat(i.trim())}return e}(n.textRef.attr("transform"));n.textRef.text(function(t,e){return 0===e?c:""}).attr("transform","translate("+p+","+g+") rotate("+v+")");var y={x1:0,x2:0,y1:d+(e?-1:5),y2:a};e||(y.transform="rotate(-90)"),i.utilsDom.selectOrAppend(n.tickRef,"line.label-ref").attr(y)}else n.tickRef.selectAll("line.label-ref").remove();return n})},S=function(t,e){var n=e.ticks(),r=e.domain(),i=n.length-1,o=n.length>1&&r[0]*r[1]<0&&-r[0]>(n[1]-n[0])/2&&r[1]>(n[i]-n[i-1])/2;t.selectAll(".tick").classed("zero-tick",function(t){return 0===t&&o})},k=function(t,e,n){return e>0&&(t=t.transition(n).duration(e),t.attr=O),t.onTransitionEnd=function(t){return C(this,t),this},t},O=function(t,e){var n,r=u.default.transition.prototype.attr.apply(this,arguments);if(0===arguments.length)throw new Error("Unexpected `transition().attr()` arguments.");1===arguments.length?n=t:arguments.length>1&&(n=d({},t,e));var i="__transitionAttrs__",o="__lastTransitions__",a=A();this.each(function(){var t=this,e={};for(var r in n)"function"===typeof n[r]?e[r]=n[r].apply(this,arguments):e[r]=n[r];this[i]=Object.assign(this[i]||{},e),this[i][o]||Object.defineProperty(this[i],o,{value:{}}),Object.keys(e).forEach(function(e){return t[i][o][e]=a})});var l=function(){var t=this;this[i]&&(Object.keys(n).filter(function(e){return t[i][o][e]===a}).forEach(function(e){return delete t[i][e]}),0===Object.keys(this[i]).length&&delete this[i])};return this.each("interrupt."+a,l),this.each("end."+a,l),r},E=0,A=function(){return++E},C=function(t,e){if(u.default.transition.prototype.isPrototypeOf(t)&&!t.empty()){var n=t.size(),r=function(){n--,0===n&&e.call(null,t)};return t.each("interrupt.d3_on_transition_end",r),t.each("end.d3_on_transition_end",r),t}e.call(null,t)},T=function(t,e,n,i){var o=i||function(t){return t},a=function(){o(this)};return function(){var i=this;return e&&(i=i.attr(r.utils.defaults(e,n))),i=k(i,t),i=i.attr(n),t>0?i.each("end.d3_animationInterceptor",a):i.each(a),i}},P=function(t,e){var n=t.node();return t.selectAll(e).filter(function(){return this.parentNode===n})},j=function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"linear",a="__pathPoints__";return function(t){var u=this;this[a]||(this[a]=n.map(function(){return[]}));var l=n.map(function(e,n){var l=r.utils.unique(t,i).map(e),f=(0,c.getLineInterpolator)(o)||(0,c.getLineInterpolator)("linear"),h=f(l),d=u[a][n],p=(0,s.default)(d,h,(0,c.getInterpolatorSplineType)(o));return{pointsFrom:d,pointsTo:h,interpolate:p}});return function(t){if(0===t){var n=l.map(function(t){return t.pointsFrom});return e.apply(void 0,h(n))}if(1===t){var r=l.map(function(t){return t.pointsTo});return u[a]=r,e.apply(void 0,h(r))}var i=l.map(function(e){return e.interpolate(t)});return u[a]=i,e.apply(void 0,h(i))}}};e.d3_animationInterceptor=T,e.d3_createPathTween=j,e.d3_decorator_wrap_tick_label=w,e.d3_decorator_prettify_axis_label=_,e.d3_decorator_fix_axis_start_line=x,e.d3_decorator_fixHorizontalAxisTicksOverflow=m,e.d3_decorator_fixEdgeAxisTicksOverflow=b,e.d3_decorator_highlightZeroTick=S,e.d3_decorator_prettify_categorical_axis_ticks=y,e.d3_decorator_avoidLabelsCollisions=M,e.d3_transition=k,e.d3_selectAllImmediate=P,e.wrapText=v,e.cutText=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utilsDraw=void 0;var r=n(2),i=o(r);function o(t){return t&&t.__esModule?t:{default:t}}var a={translate:function(t,e){return"translate("+t+","+e+")"},rotate:function(t){return"rotate("+t+")"},getOrientation:function(t){return["bottom","top"].indexOf(t.toLowerCase())>=0?"h":"v"},isIntersect:function(t,e,n,r,i,o,a,u){var l,s,c,f,h,d;return l=n-t,s=r-e,c=a-i,f=u-o,h=(-s*(t-i)+l*(e-o))/(-c*s+l*f),d=(c*(e-o)-f*(t-i))/(-c*s+l*f),h>=0&&h<=1&&d>=0&&d<=1},getDeepTransformTranslate:function(t){var e,n,r=function(t){var e={x:0,y:0},n=t.indexOf("translate(");if(n>=0){var r=t.indexOf(")",n+10),i=t.substring(n+10,r),o=i.trim().replace(","," ").replace(/\s+/," ").split(" ");e.x=parseFloat(o[0]),o.length>1&&(e.y=parseFloat(o[1]))}return e},i={x:0,y:0},o=t;while(o&&"SVG"!==o.nodeName.toUpperCase())n=o.getAttribute("transform"),n&&(e=r(n),i.x+=e.x,i.y+=e.y),o=o.parentNode;return i},raiseElements:function(t,e,n){var r=t.selectAll(e).filter(n);if(!r.empty()){var o=i.default.select(r.node().parentNode).selectAll(e).filter(function(t){return!n(t)})[0],a=o[o.length-1];if(a){var u=Array.prototype.indexOf.call(a.parentNode.childNodes,a),l=a.nextSibling;r.each(function(){var t=Array.prototype.indexOf.call(this.parentNode.childNodes,this);t>u||this.parentNode.insertBefore(this,l)})}}}};e.utilsDraw=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(t){i=!0,o=t}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=a;var i=n(3),o=n(12);function a(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"polyline";return function(i){return 0===i?t:1===i?e:(n||(n=("cubic"===r?l:u)(t,e)),n(i))}}function u(t,e){t=t.filter(function(t){return!t.isInterpolated});var n=t.map(function(t){return t.id}),r=e.map(function(t){return t.id}),i=n.filter(function(t){return r.indexOf(t)>=0}),o=t.filter(function(t){return!t.positionIsBeingChanged}),a=e.filter(function(t){return!t.positionIsBeingChanged}),u=w(o,a),l=w(a,o),h=[];return i.forEach(function(o,a){var d=n.indexOf(o),p=r.indexOf(o);if(0===a&&(d>0||p>0)&&h.push(s({polylineFrom:t.slice(0,d+1),polylineTo:e.slice(0,p+1),toOppositeScale:0===p?u:l})),a>0){var g=n.indexOf(i[a-1]),v=r.indexOf(i[a-1]);(d-g>1||p-v>1)&&h.push(c({polylineFrom:t.slice(g,d+1),polylineTo:e.slice(v,p+1)}))}h.push(f({pointFrom:t[d],pointTo:e[p]})),a===i.length-1&&(t.length-d-1>0||e.length-p-1>0)&&h.push(s({polylineFrom:t.slice(d),polylineTo:e.slice(p),toOppositeScale:e.length-p===1?u:l}))}),0===h.length&&(e.length>0&&0===i.length||t.length>0&&0===i.length)&&h.push(d({polylineFrom:t.slice(0),polylineTo:e.slice(0)})),function(t){var e=[];return h.forEach(function(n){var r=n(t);p(e,r)}),e}}function l(t,e){for(var n=2;n<t.length-1;n+=3)t[n-1].isCubicControl=!0,t[n].isCubicControl=!0;for(n=2;n<e.length-1;n+=3)e[n-1].isCubicControl=!0,e[n].isCubicControl=!0;var r,i;for(t=t.filter(function(t){return!t.isInterpolated}),n=t.length-2;n>=0;n--)i=t[n+1],r=t[n],r.isCubicControl||i.isCubicControl||(t.splice(n+1,0,(0,o.getBezierPoint)(1/3,i,r),(0,o.getBezierPoint)(2/3,i,r)),t[n+1].isCubicControl=!0,t[n+2].isCubicControl=!0);var a=t.filter(function(t,e){return e%3===0}),u=e.filter(function(t,e){return e%3===0}),l=a.map(function(t){return t.id}),g=u.map(function(t){return t.id}),v=l.reduce(function(e,n){return e[n]=t.findIndex(function(t){return t.id===n}),e},{}),y=g.reduce(function(t,n){return t[n]=e.findIndex(function(t){return t.id===n}),t},{}),m=l.filter(function(t){return g.indexOf(t)>=0}),b=a.filter(function(t){return!t.positionIsBeingChanged}),x=u.filter(function(t){return!t.positionIsBeingChanged}),_=w(b,x),M=w(x,b),S=[];return m.forEach(function(n,r){var i=v[n],o=y[n];if(0===r&&(i>0||o>0)&&S.push(s({polylineFrom:t.slice(0,i+1),polylineTo:e.slice(0,o+1),toOppositeScale:0===o?_:M,isCubic:!0})),r>0){var a=v[m[r-1]],u=y[m[r-1]];i-a>3||o-u>3?S.push(c({polylineFrom:t.slice(a,i+1),polylineTo:e.slice(u,o+1),isCubic:!0})):S.push(h({polylineFrom:t.slice(a,i+1),polylineTo:e.slice(u,o+1)}))}S.push(f({pointFrom:t[i],pointTo:e[o]})),r===m.length-1&&(t.length-i-1>0||e.length-o-1>0)&&S.push(s({polylineFrom:t.slice(i),polylineTo:e.slice(o),toOppositeScale:e.length-o===1?_:M,isCubic:!0}))}),0===S.length&&(e.length>0&&0===m.length||t.length>0&&0===m.length)&&S.push(d({polylineFrom:t.slice(0),polylineTo:e.slice(0),isCubic:!0})),function(t){var e=[];return S.forEach(function(n){var r=n(t);p(e,r)}),e}}function s(t){var e=t.polylineFrom,n=t.polylineTo,r=t.isCubic,i=t.toOppositeScale,o=e.length>n.length?e:n,a=1===n.length,u=e[0].id!==n[0].id,l=Boolean(u^a);return function(t){var e=(r?b:m)({t:t,polyline:o,decreasing:a,rightToLeft:l});a===l?e.shift():e.pop();var n=e.map(i),u=y(n,e,a?1-t:t);return u.forEach(function(t){return t.positionIsBeingChanged=!0}),u}}function c(t){var e=t.polylineFrom,n=t.polylineTo,r=t.isCubic,i=e.length,o=n.length;if(o!==i){var a=o<i,u=a?n:e,l=a?e:n,s=(r?_:x)({smallerPolyline:u,biggerPolyline:l,decreasing:a}),c=l.slice(1,l.length-1),f=s.slice(1,s.length-1);return function(t){var e=y(f,c,a?1-t:t);return e.forEach(function(t){return t.positionIsBeingChanged=!0}),e}}var h=e.slice(1,e.length-1),d=n.slice(1,n.length-1);return function(t){var e=y(h,d,t);return e.forEach(function(t){return t.positionIsBeingChanged=!0}),e}}function f(t){var e=t.pointFrom,n=t.pointTo;return function(t){return[v(e,n,t)]}}function h(t){var e=t.polylineFrom,n=t.polylineTo;return function(t){return y(e.slice(1,3),n.slice(1,3),t)}}function d(t){var e=t.polylineFrom,n=t.polylineTo,r=t.isCubic,i=0===n.length,o=i,a=i?e:n;return function(t){var e=(r?b:m)({t:t,polyline:a,decreasing:i,rightToLeft:o});return e.forEach(function(t,e){e>0&&(t.positionIsBeingChanged=!0)}),e}}function p(t,e){return Array.prototype.push.apply(t,e)}function g(t,e,n){return void 0===e?t:"number"===typeof e?t+n*(e-t):e}function v(t,e,n){if(t===e)return e;var r={},i=Object.keys(t);return i.forEach(function(i){return r[i]=g(t[i],e[i],n)}),void 0!==e.id&&(r.id=e.id),r}function y(t,e,n){var r=t.map(function(t,r){return v(t,e[r],n)});return r}function m(t){var e=t.t,n=t.polyline,r=t.decreasing,o=t.rightToLeft,a=Boolean(r)!==Boolean(o),u=function(t,e){var n=0;if(t>0){for(var r,o,a,u,l,s=[0],c=0,f=1;f<e.length;f++)a=e[f-1].x,u=e[f-1].y,r=e[f].x,o=e[f].y,l=Math.sqrt((r-a)*(r-a)+(o-u)*(o-u)),c+=l,s.push(c);var h=t*c;for(f=1;f<s.length;f++)if(h<=s[f]){n=Math.min(1,(f-1+(h-s[f-1])/(s[f]-s[f-1]))/(e.length-1));break}}var d=Math.floor((e.length-1)*n)+1,g=e.length-d,y=d,m=e.slice(0,d);if(n<1){var b=n*(e.length-1)%1,x=v(e[d-1],e[d],b);p(m,i.utils.range(g).map(function(t){return Object.assign({},x,{id:e[y+t].id,isInterpolated:!0})}))}return m}(r?1-e:e,a?n.slice(0).reverse():n);return a&&u.reverse(),u}function b(t){var e=t.t,n=t.polyline,r=t.decreasing,o=t.rightToLeft,a=Boolean(r)!==Boolean(o),u=function(t,e){var n=(e.length-1)/3+1,r=0;if(t>0){for(var o,a,u,l,s,c,f,h,d,g=[0],v=0,y=1;y<n;y++)u=e[3*y-3].x,l=e[3*y-3].y,s=e[3*y-2].x,c=e[3*y-2].y,f=e[3*y-1].x,h=e[3*y-1].y,o=e[3*y].x,a=e[3*y].y,d=(M(u,l,s,c)+M(s,c,f,h)+M(f,h,o,a)+M(o,a,u,l))/2,v+=d,g.push(v);var m=t*v;for(y=1;y<g.length;y++)if(m<=g[y]){r=Math.min(1,(y-1+(m-g[y-1])/(g[y]-g[y-1]))/(n-1));break}}var b=Math.floor((n-1)*r)+1,x=n-b,_=3*b,w=e.slice(0,3*(b-1)+1);if(r<1){var k=r*(n-1)%1,O=S(k,e.slice(3*(b-1),3*b+1)),E=O.slice(1,4);E.forEach(function(t){return t.isInterpolated=!0}),E[2].id=e[_].id,p(w,E),i.utils.range(1,x).forEach(function(t){p(w,[{x:E[2].x,y:E[2].y,isCubicControl:!0,isInterpolated:!0},{x:E[2].x,y:E[2].y,isCubicControl:!0,isInterpolated:!0},Object.assign({},E[2],{id:e[_+3*t].id,isInterpolated:!0})])})}return w}(r?1-e:e,a?n.slice(0).reverse():n);return a&&u.reverse(),u}function x(t){var e=t.smallerPolyline,n=t.biggerPolyline,r=t.decreasing,o=e.length-1,a=n.length-1,u=Math.floor(a/o)+1,l=a%o,s=i.utils.range(o).map(function(t){return u+Number(t<l)}),c=[e[0]],f=1;return s.forEach(function(t){i.utils.range(1,t).forEach(function(i){var o;i===t-1?(o=Object.assign({},e[f]),r||(o.id=n[c.length].id)):(o=v(e[f-1],e[f],i/(t-1)),o.id=n[c.length].id,r&&(o.isInterpolated=!0)),c.push(o)}),f++}),c}function _(t){var e=t.smallerPolyline,n=t.biggerPolyline,r=t.decreasing,o=(e.length-1)/3,a=(n.length-1)/3,u=Math.floor(a/o)+1,l=a%o,s=i.utils.range(o).map(function(t){return u+Number(t<l)}),c=[e[0]],f=3;return s.forEach(function(t){if(t>2){var o=k(i.utils.range(1,t-1).map(function(e){return e/(t-1)}),e.slice(f-3,f+1));i.utils.range(t-2).forEach(function(t){return o[3*(t+1)].id=n[c.length-1+3*t].id}),r&&o.forEach(function(t,e){e>0&&e<o.length-1&&(t.isInterpolated=!0)}),p(c,o.slice(1))}else{var a=Object.assign({},e[f-2]),u=Object.assign({},e[f-1]),l=Object.assign({},e[f]);r||(l.id=n[c.length+2].id),c.push(a,u,l)}f+=3}),c}function w(t,e){var n,r,i,o,a=[],u=[],l=0,s=t.length,c=e.length;for(n=0;n<s;n++)for(i=t[n],r=l;r<c;r++)if(o=e[r],i.id===o.id){l=r+1,a.push(i),u.push(o);break}if(a.length<1||u.length<1)return function(t){return t};var f=Object.keys(a[0]).filter(function(t){return"number"===typeof a[0][t]}).filter(function(t){return"id"!==t}),h={},d=function(t,e,n,r){return function(i){return r+(i-e)*(r-n)/(e-t)}},p=function(t,e){return function(n){return n-t+e}};return f.forEach(function(t){for(var e,n,r=a[0][t],i=u[0][t],o=a.length-1;o>0;o--)if(e=a[o][t],e!==r)return n=u[o][t],void(h[t]=d(r,e,i,n));h[t]=p(r,i)}),function(t){var e=Object.assign({},t);return f.forEach(function(n){e[n]=h[n](t[n])}),e}}function M(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}function S(t,e){var n=r(e,4),i=n[0],a=n[1],u=n[2],l=n[3],s=(0,o.splitCubicSegment)(t,i,a,u,l);return[s[1],s[2],s[4],s[5]].forEach(function(t){return t.isCubicControl=!0}),Object.keys(l).forEach(function(e){"x"!==e&&"y"!==e&&"id"!==e&&(s[3][e]=g(i[e],l[e],t))}),s}function k(t,e){for(var n,r,i=[e[0]],o=0;o<t.length;o++)n=0===o?t[0]:t[o]/(1-t[o-1]),r=S(n,e),p(i,r.slice(1,4)),e=r.slice(3);return p(i,e.slice(1)),i}},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t){return 2===(arguments.length<=1?0:arguments.length-1)?(arguments.length<=1?void 0:arguments[1])*(1-t)+(arguments.length<=2?void 0:arguments[2])*t:3===(arguments.length<=1?0:arguments.length-1)?(arguments.length<=1?void 0:arguments[1])*(1-t)*(1-t)+2*(arguments.length<=2?void 0:arguments[2])*(1-t)*t+(arguments.length<=3?void 0:arguments[3])*t*t:(arguments.length<=1?void 0:arguments[1])*(1-t)*(1-t)*(1-t)+3*(arguments.length<=2?void 0:arguments[2])*(1-t)*(1-t)*t+3*(arguments.length<=3?void 0:arguments[3])*(1-t)*t*t+(arguments.length<=4?void 0:arguments[4])*t*t*t}function i(t){for(var e=arguments.length,i=Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];var a=i.map(function(t){return t.x}),u=i.map(function(t){return t.y});return a.unshift(t),u.unshift(t),{x:r.apply(void 0,n(a)),y:r.apply(void 0,n(u))}}function o(t,e,n,r,o){var a=i(t,e,n),u=i(t,e,n,r),l=i(t,n,r,o),s=i(t,r,o),c=i(t,u,l);return[e,a,u,c,l,s,o]}Object.defineProperty(e,"__esModule",{value:!0}),e.bezier=r,e.getBezierPoint=i,e.splitCubicSegment=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLineInterpolator=u,e.getInterpolatorSplineType=l;var r=n(14),i=n(15),o={linear:function(t){return t},step:i.getStepLine,"step-before":i.getStepBeforeLine,"step-after":i.getStepAfterLine},a={smooth:r.getCurve,"smooth-keep-extremum":r.getCurveKeepingExtremums};function u(t){return o[t]||a[t]}function l(t){return void 0!==a[t]?"cubic":"polyline"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCurve=i,e.getCurveKeepingExtremums=o;var r=n(12);function i(t){return a(t,!1)}function o(t){return a(t,!0)}function a(t,e){if(t.length<2)return t.slice(0);if(2===t.length)return[t[0],{x:u(t[0].x,t[1].x,1/3),y:u(t[0].y,t[1].y,1/3)},{x:u(t[0].x,t[1].x,2/3),y:u(t[0].y,t[1].y,2/3)},t[1]];for(var n,i,o,a,l,s,c,f,h,d,p,g,v,y,m=new Array(3*(t.length-1)+1),b=0;b<t.length;b++)m[3*b]=t[b],b>0&&(m[3*b-2]=(0,r.getBezierPoint)(1/3,t[b-1],t[b]),m[3*b-1]=(0,r.getBezierPoint)(2/3,t[b-1],t[b]));for(var x,_=m.slice(0),w=0;w<3;w++){for(b=6;b<_.length;b+=3)n=_[b-5],i=_[b-3],o=_[b-1],(i.x-n.x)*(o.x-i.x)*1e12<1?(a=u(n.x,i.x,.5),s=u(i.x,o.x,.5),l=u(n.y,i.y,.5),c=u(i.y,o.y,.5)):(d=(i.x-n.x)/(o.x-n.x),f=(i.x-n.x*(1-d)*(1-d)-o.x*d*d)/(2*(1-d)*d),h=(i.y-n.y*(1-d)*(1-d)-o.y*d*d)/(2*(1-d)*d),a=u(n.x,f,d),s=u(f,o.x,d),l=u(n.y,h,d),c=u(h,o.y,d),e&&(g=i.x-a,v=s-i.x,p=(c-i.y)/v,(i.y-n.y)*(o.y-i.y)<=0?p=0:(i.y>n.y===c>o.y&&(y=(o.y-i.y)/(c-i.y),v=u(v*y,v,1/(1+Math.abs(y))),p=(o.y-i.y)/v),i.y>n.y===l<n.y&&(y=(i.y-n.y)/(i.y-l),g=u(g*y,g,1/(1+Math.abs(y))),p=(i.y-n.y)/g)),a=i.x-g,s=i.x+v,l=i.y-p*g,c=i.y+p*v)),m[b-4]={x:a,y:l},m[b-2]={x:s,y:c};m[1]={x:u(m[0].x,m[3].x,1/3),y:u(m[0].y,u(m[3].y,m[2].y,1.5),2/3)},x=m.length-1,m[x-1]={x:u(m[x].x,m[x-3].x,1/3),y:u(m[x].y,u(m[x-3].y,m[x-2].y,1.5),2/3)},_=m.slice(0)}return _}function u(t,e,n){return t+n*(e-t)}},function(t,e){"use strict";function n(t){for(var e,n,r,i,o=[],a=void 0!==t[0].id,u=void 0!==t[0].size,l=1;l<t.length;l++)e=t[l-1],n=t[l],r={x:(e.x+n.x)/2,y:e.y},i={x:(e.x+n.x)/2,y:n.y},a&&(r.id=e.id+"-"+n.id+"-1",i.id=e.id+"-"+n.id+"-2"),u&&(r.size=e.size,i.size=n.size),1===l&&o.push(e),o.push(r,i,n);return o}function r(t){for(var e,n,r,i=[],o=void 0!==t[0].id,a=void 0!==t[0].size,u=1;u<t.length;u++)e=t[u-1],n=t[u],r={x:e.x,y:n.y},o&&(r.id=e.id+"-"+n.id),a&&(r.size=n.size),1===u&&i.push(e),i.push(r,n);return i}function i(t){for(var e,n,r,i=[],o=void 0!==t[0].id,a=void 0!==t[0].size,u=1;u<t.length;u++)e=t[u-1],n=t[u],r={x:n.x,y:e.y},o&&(r.id=e.id+"-"+n.id),a&&(r.size=e.size),1===u&&i.push(e),i.push(r,n);return i}Object.defineProperty(e,"__esModule",{value:!0}),e.getStepLine=n,e.getStepBeforeLine=r,e.getStepAfterLine=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GPL=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(6),o=n(3),a=n(17),u=n(19);function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var h=function(t){return o.utils.isDate(t)?t.getTime():t},d=function(t){var e=this;Object.keys(t).forEach(function(n){return e[n]=t[n]})},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(new d(t),e)},g=function(t,e,n){return t.map(function(t){return"string"===typeof t?n.get(t):t}).filter(function(t){return t}).reduce(function(t,e){return p(t,e(t,{}))},e)};e.GPL=function(t){function e(t,n,r,i){s(this,e);var a=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.utils.defaults(t.scales,{size_null:{type:"size",source:"?"},split_null:{type:"value",source:"?"},label_null:{type:"value",source:"?"},color_null:{type:"color",source:"?"},identity_null:{type:"identity",source:"?"},"size:default":{type:"size",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"},"label:default":{type:"value",source:"?"},"identity:default":{type:"identity",source:"?"}}),t.settings=t.settings||{},a.config=t,a.sources=t.sources,a.scales=t.scales,a.unitSet=r,a.grammarRules=i,a.scalesHub=n,a.transformations=Object.assign(t.transformations||{},{where:function(t,e){var n=Object.keys(e||{}).map(function(t){return function(n){return h(n[t])===e[t]}});return t.filter(function(t){return n.every(function(e){return e(t)})})}}),a}return f(e,t),r(e,[{key:"unfoldStructure",value:function(){return this.root=this._expandUnitsStructure(this.config.unit),this.config}},{key:"getDrawScenarioQueue",value:function(t){var e=this,n=this.grammarRules,r=this._flattenDrawScenario(t,function(t,r,i){var o=!1===r.expression.inherit?null:i,a=e._createFrameScalesFactoryMethod(o),u=e.unitSet.create(r.type,Object.assign({},r,{options:t.allocateRect(i.key)})),l=new d(u.defineGrammarModel(a)),s=g(u.getGrammarRules(),l,n);return g(u.getAdjustScalesRules(),s,n),u.node().screenModel=u.createScreenModel(s),u}),i=function(){Object.keys(e.scales).forEach(function(t){return e.scalesHub.createScaleInfo(e.scales[t]).commit()})},o=this._flattenDrawScenario(t,function(t,r,i){var o=!1===r.expression.inherit?null:i,a=e._createFrameScalesFactoryMethod(o),u=e.unitSet.create(r.type,Object.assign({},r,{options:t.allocateRect(i.key)})),l=new d(u.defineGrammarModel(a)),s=g(u.getGrammarRules(),l,n);return u.node().screenModel=u.createScreenModel(s),u.parentUnit=t,u.addInteraction(),u});return r.concat(i).concat(o)}},{key:"_flattenDrawScenario",value:function(t,n){var r={},i=[],a=[t],u=function(t){return a.unshift(t)},l=function(){return a.shift()},s=function(){return a[0]},c=e.traverseSpec({unit:this.root},function(t,e,a){t.uid=function(){var n=o.utils.generateHash((e?e.uid+"/":"")+JSON.stringify(Object.keys(t).filter(function(e){return"string"===typeof t[e]}).reduce(function(e,n){return e[n]=t[n],e},{}))+"-"+JSON.stringify(a.pipe));return n in r?n+="-"+ ++r[n]:r[n]=0,n}(),t.guide=o.utils.clone(t.guide);var l=n(s(),t,a);i.push(l),0===t.type.indexOf("COORDS.")&&u(l)},function(t){0===t.type.indexOf("COORDS.")&&l()},null,this._datify({source:this.root.expression.source,pipe:[]}));return c.push(function(){return i}),c}},{key:"_expandUnitsStructure",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this;if(!1===t.expression.operator)t.frames=t.frames.map(function(t){return r._datify(t)});else{var i=this._parseExpression(t.expression,n,t.guide);t.transformation=t.transformation||[],t.frames=i.exec().map(function(e){var a=i.inherit?n:[],u=a.concat([{type:"where",args:e}]).concat(t.transformation);return r._datify({key:e,pipe:u,source:i.source,units:t.units?t.units.map(function(t){var e=o.utils.clone(t);return e.guide=t.guide,e}):[]})})}return t.frames.forEach(function(t){return t.units.forEach(function(n){return e._expandUnitsStructure(n,t.pipe)})}),t}},{key:"_createFrameScalesFactoryMethod",value:function(t){var e=this;return function(n,r,i){var o=r||n+":default";return e.scalesHub.createScaleInfo(e.scales[o],t).create(i)}}},{key:"_datify",value:function(t){return new u.DataFrame(t,this.sources[t.source].data,this.transformations)}},{key:"_parseExpression",value:function(t,e,n){var r=this,i=t.operator||"none",o=t.source,u=!1!==t.inherit,s=t.params,c={source:o,pipe:u?e:[]},f=function(){return r._datify(c).part()},h=a.FramesAlgebra[i];if(!h)throw new Error(i+" operator is not supported");return{source:o,inherit:u,func:h,args:s,exec:function(){return h.apply(void 0,[f].concat(l(s||[]),[n]))}}}}],[{key:"traverseSpec",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=[],a=function t(e,n,r,i,a){o.push(function(){n(e,i,a)}),e.frames&&e.frames.forEach(function(i){(i.units||[]).map(function(o){return t(o,n,r,e,i)})}),o.push(function(){return r(e,i,a)})};return a(t.unit,e,n,r,i),o}}]),e}(i.Emitter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FramesAlgebra=void 0;var r=n(3),i=n(18);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var u=function(t){return r.utils.isDate(t)?t.getTime():t},l={cross:function(t,e,n){var i=t(),o=r.utils.unique(i.map(function(t){return t[e]}),u),a=r.utils.unique(i.map(function(t){return t[n]}),u),l=0===o.length?[null]:o,s=0===a.length?[null]:a;return s.reduce(function(t,r){return t.concat(l.map(function(t){var i={};return e&&(i[e]=u(t)),n&&(i[n]=u(r)),i}))},[])},cross_period:function(t,e,n,o,l,s){var c=t(),f=!!s&&s.utcTime,h=r.utils.unique(c.map(function(t){return t[e]}),u),d=r.utils.unique(c.map(function(t){return t[n]}),u),p=0===h.length?[null]:h,g=0===d.length?[null]:d;return o&&(p=i.UnitDomainPeriodGenerator.generate(Math.min.apply(Math,a(h)),Math.max.apply(Math,a(h)),o,{utc:f})),l&&(g=i.UnitDomainPeriodGenerator.generate(Math.min.apply(Math,a(d)),Math.max.apply(Math,a(d)),l,{utc:f})),g.reduce(function(t,r){return t.concat(p.map(function(t){var i={};return e&&(i[e]=u(t)),n&&(i[n]=u(r)),i}))},[])},groupBy:function(t,e){var n=t(),i=r.utils.unique(n.map(function(t){return t[e]}),u);return i.map(function(t){return o({},e,u(t))})},none:function(){return[null]}};e.FramesAlgebra=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={day:{cast:function(t){var e=new Date(t);return new Date(e.setHours(0,0,0,0))},next:function(t){var e=new Date(t),n=new Date(e.setDate(e.getDate()+1));return this.cast(n)}},week:{cast:function(t){var e=new Date(t);return e=new Date(e.setHours(0,0,0,0)),new Date(e.setDate(e.getDate()-e.getDay()))},next:function(t){var e=new Date(t),n=new Date(e.setDate(e.getDate()+7));return this.cast(n)}},month:{cast:function(t){var e=new Date(t);return e=new Date(e.setHours(0,0,0,0)),e=new Date(e.setDate(1)),e},next:function(t){var e=new Date(t),n=new Date(e.setMonth(e.getMonth()+1));return this.cast(n)}},quarter:{cast:function(t){var e=new Date(t);e=new Date(e.setHours(0,0,0,0)),e=new Date(e.setDate(1));var n=e.getMonth(),r=n-n%3;return new Date(e.setMonth(r))},next:function(t){var e=new Date(t),n=new Date(e.setMonth(e.getMonth()+3));return this.cast(n)}},year:{cast:function(t){var e=new Date(t);return e=new Date(e.setHours(0,0,0,0)),e=new Date(e.setDate(1)),e=new Date(e.setMonth(0)),e},next:function(t){var e=new Date(t),n=new Date(e.setFullYear(e.getFullYear()+1));return this.cast(n)}}},r={day:{cast:function(t){var e=new Date(t);return new Date(e.setUTCHours(0,0,0,0))},next:function(t){var e=new Date(t),n=new Date(e.setUTCDate(e.getUTCDate()+1));return this.cast(n)}},week:{cast:function(t){var e=new Date(t);return e=new Date(e.setUTCHours(0,0,0,0)),new Date(e.setUTCDate(e.getUTCDate()-e.getUTCDay()))},next:function(t){var e=new Date(t),n=new Date(e.setUTCDate(e.getUTCDate()+7));return this.cast(n)}},month:{cast:function(t){var e=new Date(t);return e=new Date(e.setUTCHours(0,0,0,0)),e=new Date(e.setUTCDate(1)),e},next:function(t){var e=new Date(t),n=new Date(e.setUTCMonth(e.getUTCMonth()+1));return this.cast(n)}},quarter:{cast:function(t){var e=new Date(t);e=new Date(e.setUTCHours(0,0,0,0)),e=new Date(e.setUTCDate(1));var n=e.getUTCMonth(),r=n-n%3;return new Date(e.setUTCMonth(r))},next:function(t){var e=new Date(t),n=new Date(e.setUTCMonth(e.getUTCMonth()+3));return this.cast(n)}},year:{cast:function(t){var e=new Date(t);return e=new Date(e.setUTCHours(0,0,0,0)),e=new Date(e.setUTCDate(1)),e=new Date(e.setUTCMonth(0)),e},next:function(t){var e=new Date(t),n=new Date(e.setUTCFullYear(e.getUTCFullYear()+1));return this.cast(n)}}},i={add:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{utc:!1},o=i.utc;return(o?r:n)[t.toLowerCase()]=e,this},get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{utc:!1},i=e.utc,o=t||"";return(i?r:n)[o.toLowerCase()]||null},generate:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{utc:!1},o=r.utc,a=[],u=i.get(n,{utc:o});if(u){var l=u.cast(new Date(e)),s=u.cast(new Date(t));a.push(s);while((s=u.next(new Date(s)))<=l)a.push(s)}return a}};e.UnitDomainPeriodGenerator=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataFrame=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.DataFrame=function(){function t(e,n){var r=e.key,i=e.pipe,a=e.source,u=e.units,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,t),this.key=r,this.pipe=i||[],this.source=a,this.units=u,this._frame={key:r,source:a,pipe:this.pipe},this._data=n,this._pipeReducer=function(t,e){return l[e.type](t,e.args)}}return r(t,[{key:"hash",value:function(){var t=[this._frame.pipe,this._frame.key,this._frame.source].map(JSON.stringify).join("");return i.utils.generateHash(t)}},{key:"full",value:function(){return this._data}},{key:"part",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return this._frame.pipe.map(t).reduce(this._pipeReducer,this._data)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plot=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=n(21),a=n(6),u=n(24),l=n(3),s=n(1),c=n(9),f=n(7),h=n(25),d=n(26),p=n(27),g=n(28),v=n(29),y=n(30),m=n(31),b=n(33),x=n(35),_=n(36),w=n(22),M=n(16),S=n(2),k=A(S),O=n(37),E=A(O);function A(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function P(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var j=s.utilsDom.selectOrAppend,N=s.utilsDom.selectImmediate;e.Plot=function(t){function e(t){C(this,e);var n=T(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));n._nodes=[],n._svg=null,n._filtersStore={filters:{},tick:0},n._layout=(0,v.getLayout)();var r=0;t.settings=e.setupSettings(l.utils.defaults(t.settings||{},{references:new WeakMap,refCounter:function(){return++r}})),2===["sources","scales"].filter(function(e){return t.hasOwnProperty(e)}).length?n.configGPL=t:n.configGPL=new y.SpecConverter(n.setupConfig(t)).convert(),n.configGPL=e.setupPeriodData(n.configGPL);var i=t.plugins||[];return n.transformers=[x.SpecTransformApplyRatio,m.SpecTransformAutoLayout],n.onUnitsStructureExpandedTransformers=[_.SpecTransformExtractAxes,b.SpecTransformCalcSize],n._originData=Object.assign({},n.configGPL.sources),n._chartDataModel=function(t){return t},n._liveSpec=n.configGPL,n._plugins=new u.Plugins(i,n),n._reportProgress=null,n._taskRunner=null,n._renderingPhase=null,n}return P(e,t),r(e,[{key:"destroy",value:function(){this.destroyNodes(),k.default.select(this._svg).remove(),k.default.select(this._layout.layout).remove(),this._cancelRendering(),i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}},{key:"setupChartSourceModel",value:function(t){this._chartDataModel=t}},{key:"setupConfig",value:function(t){if(!t.spec||!t.spec.unit)throw new Error("Provide spec for plot");var n=l.utils.defaults(t,{spec:{},data:[],plugins:[],settings:{}});this._emptyContainer=t.emptyContainer||"",n.spec.dimensions=e.setupMetaInfo(n.spec.dimensions,n.data);var r=n.settings.log;return n.settings.excludeNull&&this.addFilter({tag:"default",src:"/",predicate:g.DataProcessor.excludeNullValues(n.spec.dimensions,function(t){return r([t,"point was excluded, because it has undefined values."],"WARN")})}),n}},{key:"insertToLeftSidebar",value:function(t){return s.utilsDom.appendTo(t,this._layout.leftSidebar)}},{key:"insertToRightSidebar",value:function(t){return s.utilsDom.appendTo(t,this._layout.rightSidebar)}},{key:"insertToFooter",value:function(t){return s.utilsDom.appendTo(t,this._layout.footer)}},{key:"insertToHeader",value:function(t){return s.utilsDom.appendTo(t,this._layout.header)}},{key:"addBalloon",value:function(t){return new o.Tooltip("",t||{})}},{key:"destroyNodes",value:function(){this._nodes.forEach(function(t){return t.destroy()}),this._nodes=[],this._renderedItems=[]}},{key:"onUnitDraw",value:function(t){var e=this;this._nodes.push(t),this.fire("unitdraw",t),["click","mouseover","mouseout"].forEach(function(n){return t.on(n,function(t,r){e.fire("element"+n,{element:t,data:r.data,event:r.event})})})}},{key:"onUnitsStructureExpanded",value:function(t){var e=this;this.onUnitsStructureExpandedTransformers.forEach(function(n){return new n(t).transform(e)}),this.fire(["units","structure","expanded"].join(""),t)}},{key:"_getClosestElementPerUnit",value:function(t,e){return this._renderedItems.filter(function(t){return t.getClosestElement}).map(function(n){var r=n.getClosestElement(t,e),i=n.node();return{unit:i,closest:r}})}},{key:"disablePointerEvents",value:function(){this._layout.layout.style.pointerEvents="none"}},{key:"enablePointerEvents",value:function(){this._layout.layout.style.pointerEvents=""}},{key:"_handlePointerEvent",value:function(t){var e=this._svg.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top,i=t.type,o="click"===i,a=o?"data-click":"data-hover",u=null,l=null,s=this._getClosestElementPerUnit(n,r),c=s.filter(function(t){return t.closest}).sort(function(t,e){return t.closest.distance===e.closest.distance?t.closest.secondaryDistance-e.closest.secondaryDistance:t.closest.distance-e.closest.distance});if(c.length>0){var f=c.findIndex(function(t){return t.closest.distance!==c[0].closest.distance||t.closest.secondaryDistance!==c[0].closest.secondaryDistance}),h=f<0?c:c.slice(0,f);if(1===h.length)u=h[0].closest.data,l=h[0].closest.node;else{var d=h.reduce(function(t,e){return t+e.closest.x},0)/h.length,p=h.reduce(function(t,e){return t+e.closest.y},0)/h.length,g=Math.atan2(p-r,d-n)+Math.PI,v=h[Math.round((h.length-1)*g/2/Math.PI)].closest;u=v.data,l=v.node}}s.forEach(function(e){return e.unit.fire(a,{event:t,data:u,node:l})})}},{key:"_initPointerEvents",value:function(){var t=this;this._liveSpec.settings.syncPointerEvents||(this._pointerAnimationFrameId=null);var e=k.default.select(this._svg),n=this._liveSpec.settings.syncPointerEvents?function(t){return function(){return t(k.default.event)}}:function(e){return function(){var n=k.default.event;t._pointerAnimationFrameId&&"mousemove"!==n.type&&t._cancelPointerAnimationFrame(),t._pointerAnimationFrameId||(t._pointerAnimationFrameId=requestAnimationFrame(function(){t._pointerAnimationFrameId=null,e(n)}))}},r=function(e){return t._handlePointerEvent(e)};e.on("mousemove",n(r)),e.on("click",n(r)),e.on("mouseleave",n(function(e){"none"!==window.getComputedStyle(t._svg).pointerEvents&&t.select(function(){return!0}).forEach(function(t){return t.fire("data-hover",{event:e,data:null,node:null})})}))}},{key:"_cancelPointerAnimationFrame",value:function(){cancelAnimationFrame(this._pointerAnimationFrameId),this._pointerAnimationFrameId=null}},{key:"_setupTaskRunner",value:function(t){var e=this;return this._resetTaskRunner(),this._taskRunner=new E.default({timeout:t.settings.renderingTimeout||Number.MAX_SAFE_INTEGER,syncInterval:t.settings.asyncRendering?t.settings.syncRenderingInterval:Number.MAX_SAFE_INTEGER,callbacks:{done:function(){e._completeRendering(),e._renderingPhase=null},timeout:function(t,n){e._displayTimeoutWarning({timeout:t,proceed:function(){e.disablePointerEvents(),n.setTimeout(Number.MAX_SAFE_INTEGER),n.run()},cancel:function(){e._cancelRendering()}}),e.enablePointerEvents(),e.fire("renderingtimeout")},progress:function(t){var n={spec:0,draw:1},r=n[e._renderingPhase]/2+t/2;e._reportProgress(r)},error:t.settings.handleRenderingErrors?function(n){e._cancelRendering(),e._displayRenderingError(n),e.fire("renderingerror",n),t.settings.log(["An error occured during chart rendering.",'Set "handleRenderingErrors: false" in chart settings to debug.',"Error message: "+n.message].join(" "),"ERROR")}:null}}),this._taskRunner}},{key:"_resetTaskRunner",value:function(){this._taskRunner&&this._taskRunner.isRunning()&&(this._taskRunner.stop(),this._taskRunner=null)}},{key:"renderTo",value:function(t,e){this._resetProgressLayout();var n=this._createLiveSpec(t,e);if(!n)return this._svg=null,this._layout.content.innerHTML=this._emptyContainer,void this.enablePointerEvents();var r=this._createGPL(n),i=this._setupTaskRunner(n);this._scheduleDrawScenario(i,r),this._scheduleDrawing(i,r),i.run()}},{key:"_createLiveSpec",value:function(t,e){var n=this;this.disablePointerEvents(),this._target=t,this._defaultSize=Object.assign({},e);var r=k.default.select(t).node();if(null===r)throw new Error("Target element not found");this._layout.layout.parentNode!==r&&r.appendChild(this._layout.layout);var i=this._layout.content,o=s.utilsDom.getScrollbarSize(this._layout.contentContainer);this._layout.contentContainer.style.padding="0 "+o.width+"px "+o.height+"px 0",s.utilsDom.setScrollPadding(this._layout.rightSidebarContainer,"vertical");var a=Object.assign({},e)||{};if(!a.width||!a.height){var u=i.parentElement,c=u.scrollLeft,f=u.scrollTop;i.style.display="none",a=l.utils.defaults(a,s.utilsDom.getContainerSize(i.parentNode)),i.style.display="",i.parentElement.scrollLeft=c,i.parentElement.scrollTop=f,a.height||(a.height=s.utilsDom.getContainerSize(this._layout.layout).height)}return this.configGPL.settings.size=a,this._liveSpec=l.utils.clone(l.utils.omit(this.configGPL,"plugins")),this._liveSpec.sources=this.getDataSources(),this._liveSpec.settings=this.configGPL.settings,this._experimentalSetupAnimationSpeed(this._liveSpec),this.isEmptySources(this._liveSpec.sources)?null:(this._liveSpec=this.transformers.reduce(function(t,e){return new e(t).transform(n)},this._liveSpec),this.destroyNodes(),this.fire("specready",this._liveSpec),this._liveSpec)}},{key:"_experimentalSetupAnimationSpeed",value:function(t){t.settings.initialAnimationSpeed=t.settings.initialAnimationSpeed||t.settings.animationSpeed;var e=t.settings.experimentalShouldAnimate(t)?t.settings.initialAnimationSpeed:0;t.settings.animationSpeed=e;var n=function t(n){n.guide=n.guide||{},n.guide.animationSpeed=e,n.units&&n.units.forEach(t)};n(t.unit)}},{key:"_createGPL",value:function(t){var e=new M.GPL(t,this.getScaleFactory(),h.unitsRegistry,f.GrammarRegistry),n=e.unfoldStructure();return this.onUnitsStructureExpanded(n),e}},{key:"_scheduleDrawScenario",value:function(t,e){var n=this,r=k.default.select(this._layout.content),i=e.config.settings.size;t.addTask(function(){return n._renderingPhase="spec"}),e.getDrawScenarioQueue({allocateRect:function(){return{slot:function(t){return r.selectAll(".uid_"+t)},frameId:"root",left:0,top:0,width:i.width,containerWidth:i.width,height:i.height,containerHeight:i.height}}}).forEach(function(e){return t.addTask(e)})}},{key:"_scheduleDrawing",value:function(t,e){var n=this,r=e.config.settings.size;t.addTask(function(t){n._renderingPhase="draw",n._renderRoot({scenario:t,newSize:r}),n._cancelPointerAnimationFrame(),n._scheduleRenderScenario(t)})}},{key:"_resetProgressLayout",value:function(){this._createProgressBar(),this._clearRenderingError(),this._clearTimeoutWarning()}},{key:"_renderRoot",value:function(t){var e=this,n=t.scenario,r=t.newSize,i=k.default.select(this._layout.content),o=n[0].config.uid,a=j(i,"svg").attr({width:Math.floor(r.width),height:Math.floor(r.height)});a.attr("class")||a.attr("class",w.CSS_PREFIX+"svg"),this._svg=a.node(),this._initPointerEvents(),this.fire("beforerender",this._svg);var u=a.selectAll("g.frame-root").data([o],function(t){return t});u.enter().append("g").classed(w.CSS_PREFIX+"cell cell frame-root uid_"+o,!0),u.call(function(t){t.classed("tau-active",!0),(0,c.d3_transition)(t,e.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1)}),u.exit().call(function(t){t.classed("tau-active",!1),(0,c.d3_transition)(t,e.configGPL.settings.animationSpeed,"frameRootToggle").attr("opacity",1e-6).remove()})}},{key:"_scheduleRenderScenario",value:function(t){var e=this;t.forEach(function(t){e._taskRunner.addTask(function(){t.draw(),e.onUnitDraw(t.node()),e._renderedItems.push(t)})})}},{key:"_completeRendering",value:function(){s.utilsDom.setScrollPadding(this._layout.contentContainer),this._layout.rightSidebar.style.maxHeight=this._liveSpec.settings.size.height+"px",this.enablePointerEvents(),this._svg&&this.fire("render",this._svg),s.utilsDom.setScrollPadding(this._layout.rightSidebarContainer,"vertical")}},{key:"_cancelRendering",value:function(){this.enablePointerEvents(),this._resetTaskRunner(),this._cancelPointerAnimationFrame()}},{key:"_createProgressBar",value:function(){var t=k.default.select(this._layout.header),e=j(t,"div."+w.CSS_PREFIX+"progress");e.select("div."+w.CSS_PREFIX+"progress__value").remove();var n=e.append("div").classed(w.CSS_PREFIX+"progress__value",!0).style("width",0);this._reportProgress=function(t){requestAnimationFrame(function(){e.classed(w.CSS_PREFIX+"progress_active",t<1),n.style("width",100*t+"%")})}}},{key:"_displayRenderingError",value:function(){this._layout.layout.classList.add(w.CSS_PREFIX+"layout_rendering-error")}},{key:"_clearRenderingError",value:function(){this._layout.layout.classList.remove(w.CSS_PREFIX+"layout_rendering-error")}},{key:"getScaleFactory",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new p.ScalesFactory(d.scalesRegistry.instance(this._liveSpec.settings),t||this._liveSpec.sources,this._liveSpec.scales)}},{key:"getScaleInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.getScaleFactory().createScaleInfoByName(t,e)}},{key:"getSourceFiltersIterator",value:function(t){var e=this,n=l.utils.flatten(Object.keys(this._filtersStore.filters).map(function(t){return e._filtersStore.filters[t]})).filter(function(e){return!t(e)}).map(function(t){return t.predicate});return function(t){return n.reduce(function(e,n){return e&&n(t)},!0)}}},{key:"getDataSources",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(t){return function(n){return e.excludeFilter&&-1!==e.excludeFilter.indexOf(n.tag)||n.src!==t}},r=this._chartDataModel(this._originData);return Object.keys(r).filter(function(t){return"?"!==t}).reduce(function(e,i){var o=r[i],a=t.getSourceFiltersIterator(n(i));return e[i]={dims:o.dims,data:o.data.filter(a)},e},{"?":r["?"]})}},{key:"isEmptySources",value:function(t){return!Object.keys(t).filter(function(t){return"?"!==t}).filter(function(e){return t[e].data.length>0}).length}},{key:"getChartModelData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",n=this.getDataSources(t);return n[e].data}},{key:"getDataDims",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return this._originData[t].dims}},{key:"getData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";return this._originData[t].data}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";this._originData[e].data=t,this.refresh()}},{key:"getSVG",value:function(){return this._svg}},{key:"addFilter",value:function(t){t.src=t.src||"/";var e=t.tag,n=this._filtersStore.filters[e]=this._filtersStore.filters[e]||[],r=this._filtersStore.tick++;return t.id=r,n.push(t),r}},{key:"removeFilter",value:function(t){var e=this;return Object.keys(this._filtersStore.filters).map(function(n){e._filtersStore.filters[n]=e._filtersStore.filters[n].filter(function(e){return e.id!==t})}),this}},{key:"refresh",value:function(){this._target&&this.renderTo(this._target,this._defaultSize)}},{key:"resize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.renderTo(this._target,t)}},{key:"select",value:function(t){return this._nodes.filter(t)}},{key:"traverseSpec",value:function(t,e){var n=function t(e,n,r,i){n(e,r,i),e.frames?e.frames.forEach(function(r){(r.units||[]).map(function(i){return t(i,n,e,r)})}):(e.units||[]).map(function(r){return t(r,n,e,null)})};n(t.unit,e,null,null)}},{key:"getSpec",value:function(){return this._liveSpec}},{key:"getLayout",value:function(){return this._layout}},{key:"_displayTimeoutWarning",value:function(t){var e=this,n=t.proceed,r=t.cancel,i=t.timeout,o=200,a=100,u=3,l=1.5,s=o/2,c=Math.round(a/u/l),f=function(t){return Math.round(a/u/l*t)};this._layout.content.style.height="100%",this._layout.content.insertAdjacentHTML("beforeend",'\n            <div class="'+w.CSS_PREFIX+'rendering-timeout-warning">\n            <svg\n                viewBox="0 0 '+o+" "+a+'">\n                <text\n                    text-anchor="middle"\n                    font-size="'+c+'">\n                    <tspan x="'+s+'" y="'+f(1)+'">Rendering took more than '+Math.round(i)/1e3+'s</tspan>\n                    <tspan x="'+s+'" y="'+f(2)+'">Would you like to continue?</tspan>\n                </text>\n                <text\n                    class="'+w.CSS_PREFIX+'rendering-timeout-continue-btn"\n                    text-anchor="end"\n                    font-size="'+c+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(s-c/3)+'"\n                    y="'+f(3)+'">\n                    Continue\n                </text>\n                <text\n                    class="'+w.CSS_PREFIX+'rendering-timeout-cancel-btn"\n                    text-anchor="start"\n                    font-size="'+c+'"\n                    cursor="pointer"\n                    text-decoration="underline"\n                    x="'+(s+c/3)+'"\n                    y="'+f(3)+'">\n                    Cancel\n                </text>\n            </svg>\n            </div>\n        '),this._layout.content.querySelector("."+w.CSS_PREFIX+"rendering-timeout-continue-btn").addEventListener("click",function(){e._clearTimeoutWarning(),n.call(e)}),this._layout.content.querySelector("."+w.CSS_PREFIX+"rendering-timeout-cancel-btn").addEventListener("click",function(){e._clearTimeoutWarning(),r.call(e)})}},{key:"_clearTimeoutWarning",value:function(){var t=N(this._layout.content,"."+w.CSS_PREFIX+"rendering-timeout-warning");t&&(this._layout.content.removeChild(t),this._layout.content.style.height="")}}],[{key:"setupPeriodData",value:function(t){var n=e.__api__.tickPeriod,r=t.settings.log,i=Object.keys(t.scales).map(function(e){return t.scales[e]}),o=i.filter(function(t){return"period"===t.type}).reduce(function(e,i){var o=n.get(i.period,{utc:t.settings.utcTime});return o?e.push({source:i.source,dim:i.dim,period:o}):(r(['Unknown period "'+i.period+'".',"Docs: http://api.taucharts.com/plugins/customticks.html#how-to-add-custom-tick-period"],"WARN"),i.period=null),e},[]),a=function(t){return null===t||void 0===t},u=function(t,e){return t[e.source].data=t[e.source].data.map(function(t){var n=t[e.dim];return a(n)||(t[e.dim]=e.period.cast(n)),t}),t};return t.sources=o.reduce(u,t.sources),t}},{key:"setupMetaInfo",value:function(t,e){var n=t||g.DataProcessor.autoDetectDimTypes(e);return g.DataProcessor.autoAssignScales(n)}},{key:"setupSettings",value:function(t){var n=e.globalSettings,r=Object.keys(n).reduce(function(t,e){return t[e]="function"===typeof n[e]?n[e]:l.utils.clone(n[e]),t},{}),i=l.utils.defaults(t||{},r);return Array.isArray(i.specEngine)||(i.specEngine=[{width:Number.MAX_VALUE,name:i.specEngine}]),i}}]),e}(a.Emitter)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tooltip=void 0;var r=n(22),i=n(23);i.Tooltip.defaults.baseClass=r.CSS_PREFIX+"tooltip",e.Tooltip=i.Tooltip},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.CSS_PREFIX="graphical-report__"},function(t,e,n){var r,i,o;(function(n,a){i=[],r=a,o="function"===typeof r?r.apply(e,i):r,void 0===o||(t.exports=o)})(0,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=t,n.c=e,n.p="",n(0)}([function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return{add:function(e){t.classList.add(e)},remove:function(e){t.classList.remove(e)}}},r=function(t,e){return t.indexOf(e)},i=window,o=i.document,a=o.documentElement,u=["top","bottom"];function l(t,e){for(var n in e)t[n]=e[n];return t}function s(t){return t&&null!=t.setInterval}function c(t){var e=i.pageYOffset||a.scrollTop,n=i.pageXOffset||a.scrollLeft,r={left:0,right:0,top:0,bottom:0,width:0,height:0};if(s(t))r.width=i.innerWidth||a.clientWidth,r.height=i.innerHeight||a.clientHeight;else{if(!a.contains(t)||null==t.getBoundingClientRect)return r;l(r,t.getBoundingClientRect()),r.width=r.right-r.left,r.height=r.bottom-r.top}return r.top=r.top+e-a.clientTop,r.left=r.left+n-a.clientLeft,r.right=r.left+r.width,r.bottom=r.top+r.height,r}function f(t){return 0|Math.round(String(t).replace(/[^\-0-9.]/g,""))}var h=i.getComputedStyle;function d(t){var e=String(h(t,d.propName)),n=e.match(/([0-9.]+)([ms]{1,2})/);return n&&(e=Number(n[1]),"s"===n[2]&&(e*=1e3)),0|e}d.propName=function(){for(var t=o.createElement("div"),e=["transitionDuration","webkitTransitionDuration"],n="1s",r=0;r<e.length;r++)if(t.style[e[r]]=n,t.style[e[r]]===n)return e[r]}();var p=Object.create;function g(t,e){if(!(this instanceof g))return new g(t,e);this.hidden=1,this.options=l(p(g.defaults),e),this._createElement(),t&&this.content(t)}g.prototype._createElement=function(){var t;this.element=o.createElement("div"),this.classes=n(this.element),this.classes.add(this.options.baseClass);for(var e=0;e<g.classTypes.length;e++)t=g.classTypes[e]+"Class",this.options[t]&&this.classes.add(this.options[t])},g.prototype.type=function(t){return this.changeClassType("type",t)},g.prototype.effect=function(t){return this.changeClassType("effect",t)},g.prototype.changeClassType=function(t,e){return t+="Class",this.options[t]&&this.classes.remove(this.options[t]),this.options[t]=e,e&&this.classes.add(e),this},g.prototype.updateSize=function(){return this.hidden&&(this.element.style.visibility="hidden",o.body.appendChild(this.element)),this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,null==this.spacing&&(this.spacing=null!=this.options.spacing?this.options.spacing:f(h(this.element,"top"))),this.hidden?(o.body.removeChild(this.element),this.element.style.visibility=""):this.position(),this},g.prototype.content=function(t){return"object"===typeof t?(this.element.innerHTML="",this.element.appendChild(t)):this.element.innerHTML=t,this.updateSize(),this},g.prototype.place=function(t){return this.options.place=t,this.hidden||this.position(),this},g.prototype.attach=function(t){return this.attachedTo=t,this.hidden||this.position(),this},g.prototype.detach=function(){return this.hide(),this.attachedTo=null,this},g.prototype._pickPlace=function(t){if(!this.options.auto)return this.options.place;var e=c(i),n=this.options.place.split("-"),o=this.spacing;if(-1!==r(u,n[0]))switch(t.top-this.height-o<=e.top?n[0]="bottom":t.bottom+this.height+o>=e.bottom&&(n[0]="top"),n[1]){case"left":t.right-this.width<=e.left&&(n[1]="right");break;case"right":t.left+this.width>=e.right&&(n[1]="left");break;default:t.left+t.width/2+this.width/2>=e.right?n[1]="left":t.right-t.width/2-this.width/2<=e.left&&(n[1]="right")}else switch(t.left-this.width-o<=e.left?n[0]="right":t.right+this.width+o>=e.right&&(n[0]="left"),n[1]){case"top":t.bottom-this.height<=e.top&&(n[1]="bottom");break;case"bottom":t.top+this.height>=e.bottom&&(n[1]="top");break;default:t.top+t.height/2+this.height/2>=e.bottom?n[1]="top":t.bottom-t.height/2-this.height/2<=e.top&&(n[1]="bottom")}return n.join("-")},g.prototype.position=function(t,e){this.attachedTo&&(t=this.attachedTo),null==t&&this._p?(t=this._p[0],e=this._p[1]):this._p=arguments;var n,r,i="number"===typeof t?{left:0|t,right:0|t,top:0|e,bottom:0|e,width:0,height:0}:c(t),o=this.spacing,a=this._pickPlace(i);switch(a!==this.curPlace&&(this.curPlace&&this.classes.remove(this.curPlace),this.classes.add(a),this.curPlace=a),this.curPlace){case"top":n=i.top-this.height-o,r=i.left+i.width/2-this.width/2;break;case"top-left":n=i.top-this.height-o,r=i.right-this.width;break;case"top-right":n=i.top-this.height-o,r=i.left;break;case"bottom":n=i.bottom+o,r=i.left+i.width/2-this.width/2;break;case"bottom-left":n=i.bottom+o,r=i.right-this.width;break;case"bottom-right":n=i.bottom+o,r=i.left;break;case"left":n=i.top+i.height/2-this.height/2,r=i.left-this.width-o;break;case"left-top":n=i.bottom-this.height,r=i.left-this.width-o;break;case"left-bottom":n=i.top,r=i.left-this.width-o;break;case"right":n=i.top+i.height/2-this.height/2,r=i.right+o;break;case"right-top":n=i.bottom-this.height,r=i.right+o;break;case"right-bottom":n=i.top,r=i.right+o;break}return this.element.style.top=Math.round(n)+"px",this.element.style.left=Math.round(r)+"px",this},g.prototype.show=function(t,e){return t=this.attachedTo?this.attachedTo:t,clearTimeout(this.aIndex),null!=t&&this.position(t,e),this.hidden&&(this.hidden=0,o.body.appendChild(this.element)),this.attachedTo&&this._aware(),this.options.inClass&&(this.options.effectClass&&this.element.clientHeight,this.classes.add(this.options.inClass)),this},g.prototype.getElement=function(){return this.element},g.prototype.hide=function(){if(!this.hidden){var t=this,e=0;return this.options.inClass&&(this.classes.remove(this.options.inClass),this.options.effectClass&&(e=d(this.element))),this.attachedTo&&this._unaware(),clearTimeout(this.aIndex),this.aIndex=setTimeout(function(){t.aIndex=0,o.body.removeChild(t.element),t.hidden=1},e),this}},g.prototype.toggle=function(t,e){return this[this.hidden?"show":"hide"](t,e)},g.prototype.destroy=function(){clearTimeout(this.aIndex),this._unaware(),this.hidden||o.body.removeChild(this.element),this.element=this.options=null},g.prototype._aware=function(){var t=r(g.winAware,this);-1===t&&g.winAware.push(this)},g.prototype._unaware=function(){var t=r(g.winAware,this);-1!==t&&g.winAware.splice(t,1)},g.reposition=function(){var t,e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,17)};function n(){!t&&g.winAware.length&&(t=e(r))}function r(){var e;t=0;for(var n=0,r=g.winAware.length;n<r;n++)e=g.winAware[n],e.position()}return n}(),g.winAware=[],window.addEventListener("resize",g.reposition),window.addEventListener("scroll",g.reposition),g.classTypes=["type","effect"],g.defaults={baseClass:"tooltip",typeClass:null,effectClass:null,inClass:"in",place:"top",spacing:null,auto:0},e.Tooltip=g}])})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e,n){r(this,t),this.chart=n,this._plugins=e.map(this.initPlugin,this)}return n(t,[{key:"initPlugin",value:function(t){var e=this;t.init&&t.init(this.chart);var n=function(){};this.chart.on("destroy",t.destroy&&t.destroy.bind(t)||n),Object.keys(t).forEach(function(n){if(0===n.indexOf("on")){var r=n.substr(2);e.chart.on(r.toLowerCase(),t[n].bind(t))}})}}]),t}();e.Plugins=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unitsRegistry=void 0;var r=n(8),i={},o={},a={reg:function(t,e,n){return n?(o[t]=n,i[t]=function(t,e){this.___tauchartsseed___=new e(this.init(t))},i[t].prototype=Object.assign({init:function(t){return t},defineGrammarModel:function(t){return this.node().defineGrammarModel(t)},getGrammarRules:function(t){return this.node().getGrammarRules(t)},getAdjustScalesRules:function(t){return this.node().getAdjustScalesRules(t)},createScreenModel:function(t){return this.node().createScreenModel(t)},addInteraction:function(){this.node().addInteraction()},node:function(){return this.___tauchartsseed___},draw:function(){this.node().draw()}},e)):i[t]=e,this},get:function(t){if(!i.hasOwnProperty(t))throw new r.TauChartError("Unknown unit type: "+t,r.errorCodes.UNKNOWN_UNIT_TYPE);return i[t]},create:function(t,e){var n,r=this.get(t);if(o[t]){var i=this.get(o[t]);n=new r(e,i)}else n=new r(e);return n}};e.unitsRegistry=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i={},o={};e.scalesRegistry=function(){function t(){r(this,t)}return n(t,null,[{key:"reg",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t};return i[t]=e,o[t]=n,this}},{key:"get",value:function(t){return i[t]}},{key:"instance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{create:function(n,r,i){var a=t.get(n),u=o[n];return new a(r,u(i,e))}}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScalesFactory=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(19);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.ScalesFactory=function(){function t(e,n,r){o(this,t),this.registry=e,this.sources=n,this.scales=r}return r(t,[{key:"createScaleInfo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t.dim,r=t.source,o=(this.sources[r].dims[n]||{}).type,a=this.sources[r].data,u=e||new i.DataFrame({source:r},a);return t.dimType=o,this.registry.create(t.type,u,t)}},{key:"createScaleInfoByName",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.createScaleInfo(this.scales[t],e)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataProcessor=void 0;var r=n(3),i={isYFunctionOfX:function(t,e,n){var i=!0,o=null;try{t.reduce(function(t,i){var a=function(t,e){var n=i[e],o=r.utils.isObject(n)?JSON.stringify(n):n;return t.push(o),t},u=e.reduce(a,[]).join("/"),l=n.reduce(a,[]).join("/");if(t.hasOwnProperty(u)){var s=t[u];if(s!==l)throw o={type:"RelationIsNotAFunction",keyX:e.join("/"),keyY:n.join("/"),valX:u,errY:[s,l]},new Error("RelationIsNotAFunction")}else t[u]=l;return t},{})}catch(t){if("RelationIsNotAFunction"!==t.message)throw t;i=!1}return{result:i,error:o}},excludeNullValues:function(t,e){var n=Object.keys(t).reduce(function(e,n){var r=t[n];return r.hasOwnProperty("hasNull")&&!r.hasNull||"measure"!==r.type&&"period"!==r.scale||e.push(n),e},[]);return function(t){var r=!n.some(function(e){return!(e in t)||null===t[e]});return r||e(t),r}},autoAssignScales:function(t){var e="category",n={category:"ordinal",order:"ordinal",measure:"linear"},r={};return Object.keys(t).forEach(function(i){var o=t[i],a=(o.type||e).toLowerCase();r[i]=Object.assign({},o,{type:a,scale:o.scale||n[a],value:o.value})}),r},autoDetectDimTypes:function(t){var e={type:"category",scale:"ordinal"},n=function(t,e){var n=e;return r.utils.isDate(t)?(n.type="measure",n.scale="time"):r.utils.isObject(t)?(n.type="order",n.scale="ordinal"):Number.isFinite(t)&&(n.type="measure",n.scale="linear"),n},i=function(t,i){return Object.keys(i).forEach(function(o){var a=i.hasOwnProperty(o)?i[o]:null;if(t[o]=t[o]||{type:null,hasNull:!1},null===a)t[o].hasNull=!0;else{var u=n(a,r.utils.clone(e)),l=u.type,s=u.scale,c=null!==t[o].type&&t[o].type!==l;t[o].type=c?e.type:l,t[o].scale=c?e.scale:s}}),t};return t.reduce(i,{})},sortByDim:function(t,e,n){var r=t,i=["period","time"].indexOf(n.scale)>=0?function(t){return new Date(t)}:function(t){return t};if("measure"===n.type||"period"===n.scale)r=t.map(function(t){return t}).sort(function(t,n){return i(t[e])-i(n[e])});else if(n.order){var o=n.order.reduce(function(t,e,n){return t[e]=n,t},{}),a=n.order.length,u="(___"+e+"___)";r=t.map(function(t){var n=o[t[e]];return n=n>=0?n:a,t[u]=n,t}).sort(function(t,e){return t[u]-e[u]}).map(function(t){return delete t[u],t})}return r}};e.DataProcessor=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLayout=void 0;var r=n(22),i=function(t,e){var n="div",i=document.createElement(n);return i.classList.add(r.CSS_PREFIX+t),e&&e.appendChild(i),i},o=function(){var t=i("layout"),e=i("layout__header",t),n=i("layout__container",t),r=i("layout__sidebar",n),o=i("layout__content",n),a=i("layout__content__wrap",o),u=i("layout__sidebar-right",n),l=i("layout__sidebar-right__wrap",u),s=i("layout__footer",t);return{layout:t,header:e,content:a,contentContainer:o,leftSidebar:r,rightSidebar:l,rightSidebarContainer:u,footer:s}};e.getLayout=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpecConverter=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.SpecConverter=function(){function t(e){o(this,t),this.spec=e,this.dist={sources:{"?":{dims:{},data:[{}]},"/":{dims:{},data:[]}},scales:{x_null:{type:"ordinal",source:"?"},y_null:{type:"ordinal",source:"?"},size_null:{type:"size",source:"?"},color_null:{type:"color",source:"?"},split_null:{type:"value",source:"?"},"pos:default":{type:"ordinal",source:"?"},"size:default":{type:"size",source:"?"},"label:default":{type:"value",source:"?"},"color:default":{type:"color",source:"?"},"split:default":{type:"value",source:"?"}},settings:e.settings}}return r(t,[{key:"convert",value:function(){var t=this.spec,e=this.dist;return this.ruleAssignSourceDims(t,e),this.ruleAssignStructure(t,e),this.ruleAssignSourceData(t,e),this.ruleApplyDefaults(e),e}},{key:"ruleApplyDefaults",value:function(t){var e=t.settings||{},n=function t(e,n,r){n(e,r),(e.units||[]).map(function(r){return t(r,n,e)})},r=function(t,n){if(t.namespace="chart",t.guide=i.utils.defaults(t.guide||{},{animationSpeed:e.animationSpeed||0,utcTime:e.utcTime||!1}),n&&!t.hasOwnProperty("units")){t=i.utils.defaults(t,{x:n.x,y:n.y});var r=i.utils.clone(n.guide)||{};t.guide.x=i.utils.defaults(t.guide.x||{},r.x),t.guide.y=i.utils.defaults(t.guide.y||{},r.y),t.expression.inherit=n.expression.inherit}return t};n(t.unit,r,null)}},{key:"ruleAssignSourceData",value:function(t,e){var n=t.spec.dimensions||{},r=e.sources["/"].dims,o=function(t,e){var n=t[e];return i.utils.isObject(n)&&!i.utils.isDate(n)&&Object.keys(n).forEach(function(r){return t[e+"."+r]=n[r]}),t};e.sources["/"].data=t.data.map(function(t){var e=Object.keys(t).reduce(o,t);return Object.keys(r).reduce(function(t,e){return t.hasOwnProperty(e)||(t[e]=null),null!==t[e]&&n[e]&&["period","time"].indexOf(n[e].scale)>=0&&(t[e]=new Date(t[e])),t},e)})}},{key:"ruleAssignSourceDims",value:function(t,e){var n=t.spec.dimensions;e.sources["/"].dims=Object.keys(n).reduce(function(t,e){return t[e]={type:n[e].type},t},{})}},{key:"ruleAssignStructure",value:function(t,e){var n=this,r=function t(e){var r=i.utils.clone(i.utils.omit(e,"unit"));return n.ruleCreateScales(e,r),r.expression=n.ruleInferExpression(e),e.unit&&(r.units=e.unit.map(t)),r},o=r(t.spec.unit);o.expression.inherit=!1,e.unit=o}},{key:"ruleCreateScales",value:function(t,e){var n=this,r=t.guide||{};["identity","color","size","label","x","y","split"].forEach(function(i){t.hasOwnProperty(i)&&(e[i]=n.scalesPool(i,t[i],r[i]||{}))})}},{key:"ruleInferDim",value:function(t,e){var n=t,r=this.spec.spec.dimensions;if(!r.hasOwnProperty(n))return n;e.hasOwnProperty("tickLabel")?n=t+"."+e.tickLabel:r[t].value&&(n=t+"."+r[t].value);var i=this.dist.sources["/"].dims;return i.hasOwnProperty(n)||(i[n]={type:i[t].type},delete i[t]),n}},{key:"scalesPool",value:function(t,e,n){var r=t+"_"+e;if(this.dist.scales.hasOwnProperty(r))return r;var i=this.spec.spec.dimensions,o={};return"color"===t&&null!==e&&(o={type:"color",source:"/",dim:this.ruleInferDim(e,n)},n.hasOwnProperty("brewer")&&(o.brewer=n.brewer),i[e]&&i[e].hasOwnProperty("order")&&(o.order=i[e].order),n.hasOwnProperty("min")&&(o.min=n.min),n.hasOwnProperty("max")&&(o.max=n.max),n.hasOwnProperty("nice")&&(o.nice=n.nice)),"size"===t&&null!==e&&(o={type:"size",source:"/",dim:this.ruleInferDim(e,n)},n.hasOwnProperty("func")&&(o.func=n.func),n.hasOwnProperty("min")&&(o.min=n.min),n.hasOwnProperty("max")&&(o.max=n.max),n.hasOwnProperty("minSize")&&(o.minSize=n.minSize),n.hasOwnProperty("maxSize")&&(o.maxSize=n.maxSize)),"label"===t&&null!==e&&(o={type:"value",source:"/",dim:this.ruleInferDim(e,n)}),"split"===t&&null!==e&&(o={type:"value",source:"/",dim:this.ruleInferDim(e,n)}),"identity"===t&&null!==e&&(o={type:"identity",source:"/",dim:this.ruleInferDim(e,n)}),!i.hasOwnProperty(e)||"x"!==t&&"y"!==t||(o={type:i[e].scale,source:"/",dim:this.ruleInferDim(e,n)},i[e].hasOwnProperty("order")&&(o.order=i[e].order),n.hasOwnProperty("min")&&(o.min=n.min),n.hasOwnProperty("max")&&(o.max=n.max),n.hasOwnProperty("autoScale")?o.autoScale=n.autoScale:o.autoScale=!0,n.hasOwnProperty("nice")?o.nice=n.nice:o.nice=o.autoScale,n.hasOwnProperty("niceInterval")?o.niceInterval=n.niceInterval:o.niceInterval=null,n.hasOwnProperty("tickPeriod")&&(o.period=n.tickPeriod,o.type="period"),o.fitToFrameByDims=n.fitToFrameByDims,o.ratio=n.ratio),this.dist.scales[r]=o,r}},{key:"getScaleConfig",value:function(t,e){var n=t+"_"+e;return this.dist.scales[n]}},{key:"ruleInferExpression",value:function(t){var e={operator:"none",params:[]},n=t.guide||{},r=n.x||{},i=n.y||{},o=this.getScaleConfig("x",t.x),a=this.getScaleConfig("y",t.y);return 0===t.type.indexOf("ELEMENT.")?t.color&&(e={operator:"groupBy",params:[this.ruleInferDim(t.color,n.color||{})]}):"COORDS.RECT"===t.type&&1===t.unit.length&&"COORDS.RECT"===t.unit[0].type&&(e=o.period||a.period?{operator:"cross_period",params:[this.ruleInferDim(t.x,r),this.ruleInferDim(t.y,i),o.period,a.period]}:{operator:"cross",params:[this.ruleInferDim(t.x,r),this.ruleInferDim(t.y,i)]}),Object.assign({inherit:!0,source:"/"},e)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpecTransformAutoLayout=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),o=n(32),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(t){return t.reduce(function(t,e){return t+e},0)};function f(t,e,n,r){var i=t.hasOwnProperty(n)?t[n]:{};i=i||{},r.forEach(function(t){Object.assign(e.guide[n][t],i[t])})}var h=function(t,e){var n=e.guide||{},r={x:["label"],y:["label"],size:["label"],color:["label"],padding:[]};return Object.keys(r).forEach(function(e){var i=r[e];f(n,t,e,i)}),Object.assign(t.guide,Object.keys(n).reduce(function(t,e){return r.hasOwnProperty(e)||(t[e]=n[e]),t},{})),t},d=function(t,e,n){return t[e]=i.utils.defaults(t[e]||{},{label:""}),t[e].label=i.utils.isObject(t[e].label)?t[e].label:{text:t[e].label},t[e].label=i.utils.defaults(t[e].label,n||{},{padding:32,rotate:0,textAnchor:"middle",cssClass:"label",dock:null}),t[e]},p=function(t,e,n){return t[e]=i.utils.defaults(t[e],n||{},{padding:0,density:30,rotate:0,tickPeriod:null,tickFormat:null,autoScale:!0}),t[e].tickFormat=t[e].tickFormat||t[e].tickPeriod,t[e].nice=t[e].hasOwnProperty("nice")?t[e].nice:t[e].autoScale,t[e]},g=function(t){return t.options=t.options||{},t.guide=t.guide||{},t.guide.padding=i.utils.defaults(t.guide.padding||{},{l:0,b:0,r:0,t:0}),t.guide.x=d(t.guide,"x"),t.guide.x=p(t.guide,"x",{cssClass:"x axis",scaleOrient:"bottom",textAnchor:"middle"}),t.guide.y=d(t.guide,"y",{rotate:-90}),t.guide.y=p(t.guide,"y",{cssClass:"y axis",scaleOrient:"left",textAnchor:"end"}),t.guide.size=d(t.guide,"size"),t.guide.color=d(t.guide,"color"),t},v=function(t,e){return t.guide=t.guide||{},t.guide.padding=t.guide.padding||{l:0,t:0,r:0,b:0},t.hasOwnProperty("units")||(t=i.utils.defaults(t,e),t.guide=i.utils.defaults(t.guide,i.utils.clone(e.guide)),t.guide.x=i.utils.defaults(t.guide.x,i.utils.clone(e.guide.x)),t.guide.y=i.utils.defaults(t.guide.y,i.utils.clone(e.guide.y))),t},y=function(t){var e=t.units||[],n=!t.hasOwnProperty("units"),r=!e.some(function(t){return t.hasOwnProperty("units")});return{type:t.type,isLeaf:n,isLeafParent:!n&&r}},m=function(t,e,n,r){if(0===t.length)return{width:0,height:0};if(null===e){var i=n("TauChart Library");return i.width=.625*r,i}t.every(function(t){return"number"===typeof t})&&(t=u.default.scale.linear().domain(t).ticks());var o=t.reduce(function(t,n){var r=e(n).toString().length;return!t.computed||r>t.computed?{value:n,computed:r}:t},{}).value;return n(e(o))},b=function(t,e){var n=t.dimType,r=t.scaleType,i="*",o=[n,r,i].join(":"),a=[n,r].join(":");return e[o]||e[a]||e[n]||null},x=function(t,e,n){return t.hasOwnProperty(e+":"+n)?t[e+":"+n]:t[""+e]},_=function(t,e){var n=["day","week","month"];return n.indexOf(t)>=0&&(t+="-short"+(e?"-utc":"")),t},w=function(t,e){var n=t.width,r=t.height,o=Math.abs(i.utils.toRadian(e));return{width:Math.max(Math.cos(o)*n,r),height:Math.max(Math.sin(o)*n,r)}},M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=i.utils.normalizeAngle(t),r="x"===e?[[0,45,"middle"],[45,135,"start"],[135,225,"middle"],[225,315,"end"],[315,360,"middle"]]:[[0,90,"end"],[90,135,"middle"],[135,225,"start"],[225,315,"middle"],[315,360,"end"]],o=r.findIndex(function(t){return n>=t[0]&&n<t[1]});return r[o][2]},S=function(t,e,n){var r=Math.ceil(t.width/e),i=Math.min(r,n);return{height:i*t.height,width:e}},k=function(t,e,n,r,i){var a=n.values,u=r.values,l=n.isEmpty||t.x.hideTicks,s=r.isEmpty||t.y.hideTicks,f=m(a,o.FormatterRegistry.get(t.x.tickFormat,t.x.tickFormatNullAlias),e.getAxisTickLabelSize,e.xAxisTickLabelLimit),h=m(u,o.FormatterRegistry.get(t.y.tickFormat,t.y.tickFormatNullAlias),e.getAxisTickLabelSize,e.yAxisTickLabelLimit),d=f,p=h;f.width>e.xAxisTickLabelLimit&&(t.x.tickFormatWordWrap=!0,t.x.tickFormatWordWrapLines=e.xTickWordWrapLinesLimit,d=S(f,e.xAxisTickLabelLimit,e.xTickWordWrapLinesLimit)),h.width>e.yAxisTickLabelLimit&&(t.y.tickFormatWordWrap=!0,t.y.tickFormatWordWrapLines=e.yTickWordWrapLinesLimit,p=S(h,e.yAxisTickLabelLimit,e.yTickWordWrapLinesLimit));var g=l?0:1,v=s?0:1,y=t.x.label,b=t.y.label,_=y.text&&!y.hide?1:0,M=b.text&&!b.hide?1:0,k=w(d,t.x.rotate),O=w(p,t.y.rotate);i?(y.padding=(-e.xAxisPadding-e.xFontLabelHeight)/2+e.xFontLabelHeight,y.paddingNoTicks=y.padding,b.padding=(-e.yAxisPadding-e.yFontLabelHeight)/2,b.paddingNoTicks=b.padding,_=0,M=0):(y.padding=c([g*(e.xTickWidth+k.height),_*(e.distToXAxisLabel+e.xFontLabelHeight)]),y.paddingNoTicks=_*(e.distToXAxisLabel+e.xFontLabelHeight),b.padding=c([v*(e.yTickWidth+O.width),M*e.distToYAxisLabel]),b.paddingNoTicks=M*e.distToYAxisLabel);var E=e.xFontLabelDescenderLineHeight;return t.padding=Object.assign(t.padding,{b:t.x.hide?0:c([t.x.padding,g*(e.xTickWidth+k.height),_*(e.distToXAxisLabel+e.xFontLabelHeight+E)]),l:t.y.hide?0:c([t.y.padding,v*(e.yTickWidth+O.width),M*(e.distToYAxisLabel+e.yFontLabelHeight)])}),t.paddingNoTicks=Object.assign({},t.paddingNoTicks,{b:t.x.hide?0:c([t.x.padding,_*(e.distToXAxisLabel+e.xFontLabelHeight+E)]),l:t.y.hide?0:c([t.y.padding,M*(e.distToYAxisLabel+e.yFontLabelHeight)])}),t.x=Object.assign(t.x,{density:k.width+2*x(e,"xDensityPadding",n.dimType),tickFontHeight:f.height,$minimalDomain:a.length,$maxTickTextW:d.width,$maxTickTextH:d.height,tickFormatWordWrapLimit:e.xAxisTickLabelLimit}),t.y=Object.assign(t.y,{density:O.height+2*x(e,"yDensityPadding",r.dimType),tickFontHeight:h.height,$minimalDomain:u.length,$maxTickTextW:p.width,$maxTickTextH:p.height,tickFormatWordWrapLimit:e.yAxisTickLabelLimit}),t},O=function(t){var e=t.unit,n=t.meta,r=t.settings,i=t.allowXVertical,o=t.allowYVertical,a=t.inlineLabels,u=n.dimension(e.x),l=n.dimension(e.y),s=n.scaleMeta(e.x,e.guide.x),c=n.scaleMeta(e.y,e.guide.y),f=s.isEmpty,h=c.isEmpty;e.guide.x.tickFormat=_(e.guide.x.tickFormat||b(u,r.defaultFormats),r.utcTime),e.guide.y.tickFormat=_(e.guide.y.tickFormat||b(l,r.defaultFormats),r.utcTime);var d=!!i&&!("measure"===u.dimType),p=!!o&&!("measure"===l.dimType);if(e.guide.x.padding=f?0:r.xAxisPadding,e.guide.x.paddingNoTicks=e.guide.x.padding,e.guide.y.padding=h?0:r.yAxisPadding,e.guide.y.paddingNoTicks=e.guide.y.padding,e.guide.x.rotate=d?-90:0,e.guide.x.textAnchor=M(e.guide.x.rotate,"x"),e.guide.y.rotate=p?-90:0,e.guide.y.textAnchor=M(e.guide.y.rotate,"y"),e.guide=k(e.guide,r,s,c,a),a){var g=e.guide.x.label,v=e.guide.y.label;g.cssClass+=" inline",g.dock="right",g.textAnchor="end",v.cssClass+=" inline",v.dock="right",v.textAnchor="end"}return e},E={NONE:function(t,e,n){var r=i.utils.clone(t);return A(i.utils.clone(r.unit),r.unit,function(t,e){return e.guide.x.tickFontHeight=n.getAxisTickLabelSize("X").height,e.guide.y.tickFontHeight=n.getAxisTickLabelSize("Y").height,e.guide.x.tickFormatWordWrapLimit=n.xAxisTickLabelLimit,e.guide.y.tickFormatWordWrapLimit=n.yAxisTickLabelLimit,e}),r},"BUILD-LABELS":function(t,e){var n=i.utils.clone(t),r=[],o=[],a=null,u=null;i.utils.traverseJSON(n.unit,"units",y,function(t,n){if(t.isLeaf)return n;!a&&n.x&&(a=n),!u&&n.y&&(u=n),n.guide=n.guide||{},n.guide.x=n.guide.x||{label:""},n.guide.y=n.guide.y||{label:""},n.guide.x.label=i.utils.isObject(n.guide.x.label)?n.guide.x.label:{text:n.guide.x.label},n.guide.y.label=i.utils.isObject(n.guide.y.label)?n.guide.y.label:{text:n.guide.y.label},n.x&&(n.guide.x.label.text=n.guide.x.label.text||e.dimension(n.x).dimName),n.y&&(n.guide.y.label.text=n.guide.y.label.text||e.dimension(n.y).dimName);var l=n.guide.x.label.text;l&&(r.push(l),n.guide.x.tickFormatNullAlias=n.guide.x.hasOwnProperty("tickFormatNullAlias")?n.guide.x.tickFormatNullAlias:"No "+l,n.guide.x.label.text="",n.guide.x.label._original_text=l);var s=n.guide.y.label.text;return s&&(o.push(s),n.guide.y.tickFormatNullAlias=n.guide.y.hasOwnProperty("tickFormatNullAlias")?n.guide.y.tickFormatNullAlias:"No "+s,n.guide.y.label.text="",n.guide.y.label._original_text=s),n});var l="  ";return a&&(a.guide.x.label.text=a.guide.x.label.hide?"":r.join(l)),u&&(u.guide.y.label.text=u.guide.y.label.hide?"":o.join(l)),n},"BUILD-GUIDE":function(t,e,n){var r=i.utils.clone(t);return A(i.utils.clone(r.unit),r.unit,function(t,r){if(t.isLeaf)return r;var o=!t.isLeaf&&!t.isLeafParent,a=e.scaleMeta(r.x,r.guide.x),u=e.scaleMeta(r.y,r.guide.y),l=!o&&Boolean(a.dimType)&&"measure"!==a.dimType;return r.guide.x.rotate=l?-90:0,r.guide.x.textAnchor=M(r.guide.x.rotate),r.guide.x.tickFormat=r.guide.x.tickFormat||b(a,n.defaultFormats),r.guide.y.tickFormat=r.guide.y.tickFormat||b(u,n.defaultFormats),r.guide.x.padding=o?0:n.xAxisPadding,r.guide.x.paddingNoTicks=r.guide.x.padding,r.guide.y.padding=o?0:n.yAxisPadding,r.guide.y.paddingNoTicks=r.guide.y.padding,r.guide=k(r.guide,i.utils.defaults({distToXAxisLabel:a.isEmpty?n.xTickWidth:n.distToXAxisLabel,distToYAxisLabel:u.isEmpty?n.yTickWidth:n.distToYAxisLabel},n),a,u),r.guide.x=Object.assign(r.guide.x,{cssClass:o?r.guide.x.cssClass+" facet-axis":r.guide.x.cssClass,avoidCollisions:!!o||r.guide.x.avoidCollisions}),r.guide.y=Object.assign(r.guide.y,{cssClass:o?r.guide.y.cssClass+" facet-axis":r.guide.y.cssClass,avoidCollisions:!o&&r.guide.y.avoidCollisions}),r.guide=Object.assign(r.guide,{showGridLines:r.guide.hasOwnProperty("showGridLines")?r.guide.showGridLines:t.isLeafParent?"xy":""}),r}),r},"BUILD-COMPACT":function(t,e,n){var r=i.utils.clone(t);return A(i.utils.clone(r.unit),r.unit,function(t,r){return t.isLeaf?r:(r.guide.hasOwnProperty("showGridLines")||(r.guide.showGridLines=t.isLeafParent?"xy":""),t.isLeafParent?O({unit:r,meta:e,settings:i.utils.defaults({xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},n),allowXVertical:!0,allowYVertical:!1,inlineLabels:!0}):(r.guide.x.cssClass+=" facet-axis compact",r.guide.x.avoidCollisions=!0,r.guide.y.cssClass+=" facet-axis compact",r.guide.y.avoidCollisions=!0,O({unit:r,meta:e,settings:i.utils.defaults({xAxisPadding:0,yAxisPadding:0,distToXAxisLabel:0,distToYAxisLabel:0,xTickWordWrapLinesLimit:1,yTickWordWrapLinesLimit:1},n),allowXVertical:!1,allowYVertical:!0,inlineLabels:!1})))}),r},AUTO:function(t,e,n){return["BUILD-LABELS","BUILD-GUIDE"].reduce(function(t,r){return E[r](t,e,n)},t)},COMPACT:function(t,e,n){return["BUILD-LABELS","BUILD-COMPACT"].reduce(function(t,r){return E[r](t,e,n)},t)}},A=function t(e,n,r){var o=g(n);o=r(y(o),o),o=h(o,e);var a=i.utils.omit(o,"units");return(o.units||[]).forEach(function(e){return t(i.utils.clone(e),v(e,a),r)}),o},C={get:function(t,e,n,r){var o=E[t]||E.NONE,a={dimension:function(t){var e=n.scales[t],r=n.sources[e.source].dims[e.dim]||{};return{dimName:e.dim,dimType:r.type,scaleType:e.type}},scaleMeta:function(t){var e=r("pos",t),i=e.domain(),o=n.scales[t],a=n.sources[o.source].dims[o.dim]||{};return{dimName:o.dim,dimType:a.type,scaleType:o.type,values:i,isEmpty:null==a.type}}},u={unit:i.utils.clone(n.unit)},l=o(u,a,e);return n.unit=l.unit,n}};e.SpecTransformAutoLayout=function(){function t(e){s(this,t),this.spec=e,this.isApplicable=i.utils.isSpecRectCoordsOnly(e.unit)}return r(t,[{key:"transform",value:function(t){var e=this.spec;if(!this.isApplicable)return e;var n=e.settings.size,r=e.settings.specEngine.find(function(t){return n.width<=t.width||n.height<=t.height});return C.get(r.name,e.settings,e,function(e,n){return t.getScaleInfo(n||e+":default")})}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormatterRegistry=void 0;var r=n(3),i=n(2),o=a(i);function a(t){return t&&t.__esModule?t:{default:t}}var u=o.default.format(".4s"),l=o.default.format(".2r"),s=o.default.format(".1e"),c=function(){var t=/\.0+([^\d].*)?$/,e=/(\.\d+?)0+([^\d].*)?$/;return function(n){return n.replace(t,"$1").replace(e,"$1$2")}}(),f={"x-num-auto":function(t){var e=Math.abs(t),n=c(e<1?0===e?"0":e<1e-6?s(t):l(t):u(t));return n},percent:function(t){var e=parseFloat((100*t).toFixed(2));return e.toString()+"%"},day:o.default.time.format("%d-%b-%Y"),"day-utc":o.default.time.format.utc("%d-%b-%Y"),"day-short":o.default.time.format("%d-%b"),"day-short-utc":o.default.time.format.utc("%d-%b"),week:o.default.time.format("%d-%b-%Y"),"week-utc":o.default.time.format.utc("%d-%b-%Y"),"week-short":o.default.time.format("%d-%b"),"week-short-utc":o.default.time.format.utc("%d-%b"),month:function(t){var e=new Date(t),n=e.getMonth(),r=0===n?"%B, %Y":"%B";return o.default.time.format(r)(t)},"month-utc":function(t){var e=new Date(t),n=e.getUTCMonth(),r=0===n?"%B, %Y":"%B";return o.default.time.format.utc(r)(t)},"month-short":function(t){var e=new Date(t),n=e.getMonth(),r=0===n?"%b '%y":"%b";return o.default.time.format(r)(t)},"month-short-utc":function(t){var e=new Date(t),n=e.getUTCMonth(),r=0===n?"%b '%y":"%b";return o.default.time.format.utc(r)(t)},"month-year":o.default.time.format("%B, %Y"),"month-year-utc":o.default.time.format.utc("%B, %Y"),quarter:function(t){var e=new Date(t),n=e.getMonth(),r=(n-n%3)/3;return"Q"+(r+1)+" "+e.getFullYear()},"quarter-utc":function(t){var e=new Date(t),n=e.getUTCMonth(),r=(n-n%3)/3;return"Q"+(r+1)+" "+e.getUTCFullYear()},year:o.default.time.format("%Y"),"year-utc":o.default.time.format.utc("%Y"),"x-time-auto":null},h={get:function(t,e){var n=e||"",i=function(t){return(null===t||"undefined"===typeof t?n:t).toString()},a=f.hasOwnProperty(t),u=a?f[t]:i;return a&&(u=f[t]),!a&&t&&(u=function(e){var n=r.utils.isDate(e)?o.default.time.format(t):o.default.format(t);return n(e)}),a||t||(u=i),u},add:function(t,e){f[t]=e}};e.FormatterRegistry=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpecTransformCalcSize=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),o=n(34);function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(t){return t.$maxTickTextW},s=function(t){return 0==t.rotate?t.$maxTickTextW:t.$maxTickTextH},c=function(t){return t.density},f=function(t){var e=[],n=[],r=function t(r){if("COORDS.RECT"===r.type&&r.units&&r.units[0]&&"COORDS.RECT"===r.units[0].type){var i=r.x.replace(/^x_/,""),o=r.y.replace(/^y_/,"");"null"!==i&&e.push(i),"null"!==o&&n.push(o),r.units.forEach(t)}};r(t.unit);var i={},o={},a=function t(r){"COORDS.RECT"===r.type&&r.frames.forEach(function(r){if(r.key){var a=Object.keys(r.key);a.forEach(function(t){e.indexOf(t)>=0&&(t in i||(i[t]=[]),i[t].indexOf(r.key[t])<0&&i[t].push(r.key[t])),n.indexOf(t)>=0&&(t in o||(o[t]=[]),o[t].indexOf(r.key[t])<0&&o[t].push(r.key[t]))}),r.units&&r.units.forEach(t)}})};return a(t.unit),{xFacetCount:Object.keys(i).reduce(function(t,e){return t*i[e].length},1),yFacetCount:Object.keys(o).reduce(function(t,e){return t*o[e].length},1)}},h={"entire-view":function(t,e,n,r){var i=n.unit.guide,a=f(n),u=a.xFacetCount,h=a.yFacetCount,d=i.paddingNoTicks?i.padding.l-i.paddingNoTicks.l:0,p=i.paddingNoTicks?i.padding.b-i.paddingNoTicks.b:0,g=i.paddingNoTicks&&t.height-p<n.settings.minChartHeight||h*n.settings.minFacetHeight+p>t.height||u*n.settings.minFacetWidth+d>t.width,v=i.paddingNoTicks&&t.width-d<n.settings.minChartWidth||h*n.settings.minFacetHeight+p>t.height||u*n.settings.minFacetWidth+d>t.width;g&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"x"),v&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"y");var y=t.width,m=e("x",n.unit,l);if(m<=t.width)r(n.unit,n.settings);else{var b=e("x",n.unit,s);if(b>t.width){var x=Math.max(t.width,e("x",n.unit,c));y=Math.min(b,x)}}var _=Math.max(t.height,e("y",n.unit,c));!g&&y>t.width&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"x"),!v&&_>t.height&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"y");var w=t.width,M=t.height;return{newW:w,newH:M}},minimal:function(t,e,n){var r=e("x",n.unit,c),i=e("y",n.unit,c);return{newW:r,newH:i}},normal:function(t,e,n,r){var i=n.unit.guide;i.paddingNoTicks&&(t.width-i.padding.l+i.paddingNoTicks.l<n.settings.minChartWidth&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"y"),t.height-i.padding.b+i.paddingNoTicks.b<n.settings.minChartHeight&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"x"));var a=t.width,u=e("x",n.unit,l);if(u<=t.width)r(n.unit,n.settings);else{var f=e("x",n.unit,s);if(f>t.width){var h=Math.max(t.width,e("x",n.unit,c));a=Math.min(f,h)}}var d=Math.max(t.height,e("y",n.unit,c));return{newW:a,newH:d}},"fit-width":function(t,e,n,r){var i=n.unit.guide,a=i.paddingNoTicks?i.padding.l-i.paddingNoTicks.l:0;(i.paddingNoTicks&&t.width-a<n.settings.minChartWidth||f(n).xFacetCount*n.settings.minFacetWidth+a>t.width)&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"y");var u=e("x",n.unit,l);u<=t.width&&r(n.unit,n.settings);var s=t.width,h=e("y",n.unit,c);return{newW:s,newH:h}},"fit-height":function(t,e,n){var r=n.unit.guide,i=r.paddingNoTicks?r.padding.b-r.paddingNoTicks.b:0;(r.paddingNoTicks&&t.height-i<n.settings.minChartHeight||f(n).yFacetCount*n.settings.minFacetHeight+i>t.height)&&o.SpecTransformOptimize.hideAxisTicks(n.unit,n.settings,"x");var a=e("x",n.unit,c),u=t.height;return{newW:a,newH:u}}};e.SpecTransformCalcSize=function(){function t(e){u(this,t),this.spec=e,this.isApplicable=i.utils.isSpecRectCoordsOnly(e.unit)}return r(t,[{key:"transform",value:function(t){var e=this.spec;if(!this.isApplicable)return e;var n=e.settings.fitModel;if(!n)return e;var r=e.scales,i=function(t,e){return t.reduce(function(t,n){var r=n.key||{},i=r[e];return t[i]=t[i]||[],t[i].push(n),t},{})},u=function(t,e){var n=0;return n=t.discrete?e*t.domain().length:4*e,n},l=function e(n,o,l){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,c="x"===n?o.x:o.y,f="x"===n?o.y:o.x,h=o.guide,d=l("x"===n?h.x:h.y),p="x"===n?h.padding.l+h.padding.r:h.padding.b+h.padding.t;if("ELEMENT.INTERVAL"===o.units[0].type&&"y"===n===Boolean(o.units[0].flip)&&o.units[0].label&&!t.getScaleInfo(o.units[0].label,s).isEmpty()){var g=h.label&&h.label.fontSize?h.label.fontSize:10,v=o.frames.reduce(function(t,e){return e.full().length*g},0),y=u(t.getScaleInfo(c,s),d);return p+Math.max(v,y)}if("COORDS.RECT"!==o.units[0].type){var m=t.getScaleInfo(c,s);return p+u(m,d)}var b=i(o.frames,r[f].dim),x=Object.keys(b).map(function(t){return b[t].map(function(t){return e(n,t.units[0],l,t)}).reduce(function(t,e){return t+e},0)}),_=Math.max.apply(Math,a(x));return p+_},s=e.settings.size,c=s.width,f=s.height,d=h[n];if(d){var p=d(s,l,e,o.SpecTransformOptimize.optimizeXAxisLabel);c=p.newW,f=p.newH}var g=function(n,r,i){var o=e.settings.getScrollbarSize(t.getLayout().contentContainer),a=r.width>n.width&&r.width<=n.width*i?n.width:r.width,u=r.height>n.height&&r.height<=n.height*i?n.height:r.height,l=n.width-a,s=n.height-u,c=s>=0?0:o.width,f=l>=0?0:o.height;return{height:u-f,width:a-c}};return e.settings.size=g(s,{width:c,height:f},e.settings.avoidScrollAtRatio),e}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.SpecTransformOptimize=function(){function t(){r(this,t)}return n(t,null,[{key:"optimizeXAxisLabel",value:function(t,e){var n=e.xAxisTickLabelLimit,r=function t(e){if(!e.guide.x.hide&&!e.guide.x.hideTicks&&0!==e.guide.x.rotate){e.guide.x.rotate=0,e.guide.x.textAnchor="middle";var r=Math.min(n,e.guide.x.$maxTickTextW),o=0-r+e.guide.x.$maxTickTextH;i(e,o)}(e.units||[]).filter(function(t){return"COORDS.RECT"===t.type}).forEach(function(e){return t(e)})},i=function(e,n){t!==e&&"extract-axes"===e.guide.autoLayout?(t.guide.x.padding+=n,t.guide.padding.b+=n):(e.guide.x.label.padding+=e.guide.x.label.padding>0?n:0,e.guide.padding.b+=e.guide.padding.b>0?n:0)};r(t)}},{key:"hideAxisTicks",value:function(t,e,n){var r=function t(e){var r="x"===n?"b":"l",i=e.guide;if(!i[n].hide&&!i[n].hideTicks){i[n].hideTicks=!0;var o=i[n].label.text&&!i[n].label.hide;i.padding[r]=i.paddingNoTicks?i.paddingNoTicks[r]:0,i[n].padding=i[n].paddingNoTicks||0,i[n].label.padding=o?i[n].label.paddingNoTicks:0}(e.units||[]).filter(function(t){return"COORDS.RECT"===t.type}).forEach(function(e){return t(e)})};r(t)}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpecTransformApplyRatio=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.SpecTransformApplyRatio=function(){function t(e){o(this,t),this.spec=e,this.isApplicable=e.settings.autoRatio&&i.utils.isSpecRectCoordsOnly(e.unit)}return r(t,[{key:"transform",value:function(t){var e=this.spec;if(!this.isApplicable)return e;try{this.ruleApplyRatio(e,t)}catch(t){if("Not applicable"!==t.message)throw t}return e}},{key:"ruleApplyRatio",value:function(t,e){var n=function(t){return"COORDS.RECT"===t.type||"RECT"===t.type},r=function(t){return 0===t.type.indexOf("ELEMENT.")},o=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=n(e,i);o&&(e.units||[]).map(function(e){return t(e,n,r,i+1)}),r(e,i)},a=[],u=[],l=function(t,e){if(e>1||!n(t))throw new Error("Not applicable");a.push(t.x),u.push(t.y);var i=t.units||[],o=i.map(function(t){if(!n(t)&&!r(t))throw new Error("Not applicable");return t}).filter(n);return 1===o.length};o(t.unit,l,function(){return 0});var s=function(e){return t.scales[e]},c=function(t){return"/"===t.source&&!t.ratio&&!t.fitToFrameByDims},f=function(t){return"ordinal"===t.type||"period"===t.type&&!t.period},h=a.map(s).filter(c),d=u.map(s).filter(c),p=2;if([h.length,d.length].some(function(t){return t===p})){var g=function(t){return t.dim},v=function(t,e,n){return t.fitToFrameByDims=n.slice(0,e).map(g)},y=function(t,n){n.filter(f).length===p&&(n.forEach(v),n[0].ratio=i.utils.generateRatioFunction(t,n.map(g),e))};y("x",h),y("y",d)}}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpecTransformExtractAxes=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.SpecTransformExtractAxes=function(){function t(e){o(this,t),this.spec=e,this.isApplicable="EXTRACT"===e.settings.layoutEngine&&i.utils.isSpecRectCoordsOnly(e.unit)}return r(t,[{key:"transform",value:function(){var t=this.spec;if(!this.isApplicable)return t;try{this.ruleExtractAxes(t)}catch(t){if("Not applicable"!==t.message)throw t;console.log("[TauCharts]: can't extract axes for the given chart specification")}return t}},{key:"ruleExtractAxes",value:function(t){var e=function(t){return"COORDS.RECT"===t.type||"RECT"===t.type},n=function(t){return 0===t.type.indexOf("ELEMENT.")},r=function(t){return t?10:0},o={l:0,r:10,t:10,b:0},a={l:0,b:0},u=[],l=[],s=function(t,r){if(r>1||!e(t))throw new Error("Not applicable");t.guide=t.guide||{};var i=t.guide,s=i.padding||{l:0,r:0,t:0,b:0},c=i.paddingNoTicks||{l:0,b:0};o.l+=s.l,o.r+=s.r,o.t+=s.t,o.b+=s.b,a.l+=c.l,a.b+=c.b,u.push(Object.assign({},o)),l.push(Object.assign({},a));var f=t.units||[],h=f.map(function(t){if(!e(t)&&!n(t))throw new Error("Not applicable");return t}).filter(e);return 1===h.length},c=function(t){var e=u.pop(),n=l.pop(),i=t.guide||{};i.x=i.x||{},i.x.padding=i.x.padding||0,i.x.paddingNoTicks=i.x.paddingNoTicks||0,i.y=i.y||{},i.y.padding=i.y.padding||0,i.y.paddingNoTicks=i.y.paddingNoTicks||0,i.padding={l:r(t.y),r:r(1),t:r(1),b:r(t.x)},i.paddingNoTicks={l:0,b:0},i.autoLayout="extract-axes",i.x.padding+=o.b-e.b,i.y.padding+=o.l-e.l,i.x.paddingNoTicks+=a.b-n.b,i.y.paddingNoTicks+=a.l-n.l};i.utils.traverseSpec(t.unit,s,c),t.unit.guide.padding=o,t.unit.guide.paddingNoTicks=a}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.src,r=void 0===n?null:n,o=e.timeout,a=void 0===o?Number.MAX_SAFE_INTEGER:o,u=e.syncInterval,l=void 0===u?Number.MAX_SAFE_INTEGER:u,s=e.callbacks,c=void 0===s?{}:s;i(this,t),this.setTimeout(a),this.setSyncInterval(l),this.setCallbacks(c),this._running=!1,this._queue=[],this._result=r,this._syncDuration=0,this._asyncDuration=0,this._lastCall=null,this._requestedFrameId=null,this._tasksCount=0,this._finishedTasksCount=0}return r(t,[{key:"setTimeout",value:function(e){t.checkType(e,"number","timeout"),this._timeout=e}},{key:"setSyncInterval",value:function(e){t.checkType(e,"number","syncInterval"),this._syncInterval=e}},{key:"setCallbacks",value:function(e){t.checkType(e,"object","callbacks"),this._callbacks=Object.assign(this._callbacks||{},e)}},{key:"addTask",value:function(t){return this._queue.push(t),this._tasksCount++,this}},{key:"run",value:function(){if(this._running)throw new Error("Task Runner is already running");this._running=!0,t.runnersInProgress++,this._loopTasks()}},{key:"isRunning",value:function(){return this._running}},{key:"_loopTasks",value:function(){var e,n,r,i,o=0,a=this._syncInterval/t.runnersInProgress;while(this._running&&!(r=this._asyncDuration>this._timeout)&&!(i=o>a)&&(e=this._queue.shift())){if(n=this._runTask(e),null===n)return;this._syncDuration+=n,this._asyncDuration+=n,o+=n}r&&this._queue.length>0&&(this.stop(),this._callbacks.timeout&&this._callbacks.timeout.call(null,this._asyncDuration,this)),!r&&i&&this._queue.length>0&&this._requestFrame(),0===this._queue.length&&(this.stop(),this._callbacks.done&&this._callbacks.done.call(null,this._result,this))}},{key:"_runTask",value:function(t){var e=performance.now();if(this._callbacks.error)try{this._result=t.call(null,this._result,this)}catch(t){return this.stop(),this._callbacks.error.call(null,t,this),null}else this._result=t.call(null,this._result,this);var n=performance.now(),r=n-e;return this._finishedTasksCount++,this._callbacks.progress&&this._callbacks.progress.call(null,this._finishedTasksCount/this._tasksCount,this),r}},{key:"_requestFrame",value:function(){var t=this,e=performance.now();this._requestedFrameId=requestAnimationFrame(function(){t._requestedFrameId=null;var n=performance.now();t._asyncDuration+=n-e,t._loopTasks()})}},{key:"stop",value:function(){if(!this._running)throw new Error("Task Runner is already stopped");this._running=!1,t.runnersInProgress--,this._requestedFrameId&&(cancelAnimationFrame(this._requestedFrameId),this._requestedFrameId=null)}}],[{key:"checkType",value:function(t,e,r){if(("undefined"===typeof t?"undefined":n(t))!==e)throw new Error('Task Runner "'+r+'" property is not "'+e+'"')}}]),t}();e.default=o,o.runnersInProgress=0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chart=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0},o=n(20),a=n(3),u=n(39);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function c(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var f=function(t){function e(t){l(this,e);var n=u.chartTypesRegistry.validate(t.type,t);if(n.length>0)throw new Error(n[0]);var r=u.chartTypesRegistry.get(t.type);t=a.utils.defaults(t,{autoResize:!0}),t.settings=o.Plot.setupSettings(t.settings),t.dimensions=o.Plot.setupMetaInfo(t.dimensions,t.data);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,r(t)));return t.autoResize&&e.winAware.push(i),i}return c(e,t),r(e,[{key:"destroy",value:function(){var t=e.winAware.indexOf(this);-1!==t&&e.winAware.splice(t,1),i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this)}}]),e}(o.Plot);f.winAware=[],f.resizeOnWindowEvent=function(){var t=void 0;function e(){!t&&f.winAware.length&&(t=window.requestAnimationFrame(n))}function n(){t=0;for(var e=0,n=f.winAware.length;e<n;e++)f.winAware[e].resize()}return e}(),window.addEventListener("resize",f.resizeOnWindowEvent),e.Chart=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.chartTypesRegistry=void 0;var r=n(8),i={},o={},a=function(t){var e="Chart type "+t+" is not supported.";throw console.log(e),console.log("Use one of "+Object.keys(i).join(", ")+"."),new r.TauChartError(e,r.errorCodes.NOT_SUPPORTED_TYPE_CHART)},u={validate:function(t,e){return o.hasOwnProperty(t)||a(t),o[t].reduce(function(t,n){return t.concat(n(e)||[])},[])},get:function(t){var e=i[t];return"function"!==typeof e&&a(t),e},add:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return i[t]=e,o[t]=n,this},getAllRegisteredTypes:function(){return i}};e.chartTypesRegistry=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cartesian=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=d(i),a=n(5),u=n(1),l=n(10),s=n(3),c=n(22),f=n(32),h=n(9);function d(t){return t&&t.__esModule?t:{default:t}}function p(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function y(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var m=u.utilsDom.selectOrAppend,b=function(t){var e=20,n=t<=e?1:.75;return Math.max(2,Math.round(t*n))};e.Cartesian=function(t){function e(t){g(this,e);var n=v(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.config=t,n.config.guide=s.utils.defaults(n.config.guide||{},{showGridLines:"xy",padding:{l:50,r:0,t:0,b:50}}),n.config.guide.x=n.config.guide.x||{},n.config.guide.x=s.utils.defaults(n.config.guide.x,{cssClass:"x axis",textAnchor:"middle",padding:10,hide:!1,scaleOrient:"bottom",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100}),"string"===typeof n.config.guide.x.label&&(n.config.guide.x.label={text:n.config.guide.x.label}),n.config.guide.x.label=s.utils.defaults(n.config.guide.x.label,{text:"X",rotate:0,padding:40,textAnchor:"middle"}),n.config.guide.y=n.config.guide.y||{},n.config.guide.y=s.utils.defaults(n.config.guide.y,{cssClass:"y axis",textAnchor:"start",padding:10,hide:!1,scaleOrient:"left",rotate:0,density:20,label:{},tickFormatWordWrapLimit:100}),"string"===typeof n.config.guide.y.label&&(n.config.guide.y.label={text:n.config.guide.y.label}),n.config.guide.y.label=s.utils.defaults(n.config.guide.y.label,{text:"Y",rotate:-90,padding:20,textAnchor:"middle"});var r=n.config,i=r.guide;if("extract-axes"===i.autoLayout){var o=r.options.containerHeight,a=o-(r.options.top+r.options.height);i.x.hide=Math.floor(a)>0,i.y.hide=Math.floor(r.options.left)>0}var u=n.config.options,l=n.config.guide.padding;return n.L=u.left+l.l,n.T=u.top+l.t,n.W=u.width-(l.l+l.r),n.H=u.height-(l.t+l.b),n}return y(e,t),r(e,[{key:"defineGrammarModel",value:function(t){var e=this.W,n=this.H;return this.xScale=t("pos",this.config.x,[0,e]),this.yScale=t("pos",this.config.y,[n,0]),this.regScale("x",this.xScale).regScale("y",this.yScale),{scaleX:this.xScale,scaleY:this.yScale,xi:function(){return e/2},yi:function(){return n/2},sizeX:function(){return e},sizeY:function(){return n}}}},{key:"getGrammarRules",value:function(){return[function(t){var e=t.scaleX,n=t.scaleY;return{xi:function(n){return n?e(n[e.dim]):t.xi(n)},yi:function(e){return e?n(e[n.dim]):t.yi(e)},sizeX:function(n){return n?e.stepSize(n[e.dim]):t.sizeX(n)},sizeY:function(e){return e?n.stepSize(e[n.dim]):t.sizeY(e)}}}]}},{key:"createScreenModel",value:function(t){return t}},{key:"allocateRect",value:function(t){var e=this,n=this.screenModel;return{slot:function(t){return e.config.options.container.selectAll(".uid_"+t)},left:n.xi(t)-n.sizeX(t)/2,top:n.yi(t)-n.sizeY(t)/2,width:n.sizeX(t),height:n.sizeY(t),containerWidth:this.W,containerHeight:this.H}}},{key:"drawFrames",value:function(t){var e=Object.assign({},this.config),n=e.options,r=this.W,i=this.H;if(e.x=this.xScale,e.y=this.yScale,e.x.scaleObj=this.xScale,e.y.scaleObj=this.yScale,e.x.guide=e.guide.x,e.y.guide=e.guide.y,e.x.guide.label.size=r,e.y.guide.label.size=i,(n.container.attr("transform")?(0,h.d3_transition)(n.container,this.config.guide.animationSpeed,"cartesianContainerTransform"):n.container).attr("transform",l.utilsDraw.translate(this.L,this.T)),e.x.guide.hide)this._removeDimAxis(n.container,e.x);else{var o=e.x.guide.scaleOrient,a="top"===o?[0,0-e.guide.x.padding]:[0,i+e.guide.x.padding];this._drawDimAxis(n.container,e.x,a,r)}if(e.y.guide.hide)this._removeDimAxis(n.container,e.y);else{var u=e.y.guide.scaleOrient,s="right"===u?[r+e.guide.y.padding,0]:[0-e.guide.y.padding,0];this._drawDimAxis(n.container,e.y,s,i)}var f=t.reduce(function(t,e){return t.concat((e.units||[]).map(function(t){return t.uid}))},[]),d=this._drawGrid(n.container,e,r,i,n),p=(0,h.d3_selectAllImmediate)(d,".cell").data(f,function(t){return t});p.enter().append("g").attr("class",function(t){return c.CSS_PREFIX+"cell cell uid_"+t}),(0,h.d3_transition)(p.classed("tau-active",!0),this.config.guide.animationSpeed).attr("opacity",1),(0,h.d3_transition)(p.exit().classed("tau-active",!1),this.config.guide.animationSpeed).attr("opacity",1e-6).remove()}},{key:"_drawDimAxis",value:function(t,e,n,r){var i=this,a=o.default.svg.axis().scale(e.scaleObj).orient(e.guide.scaleOrient),u=f.FormatterRegistry.get(e.guide.tickFormat,e.guide.tickFormatNullAlias);null!==u&&(a.ticks(b(r/e.guide.density)),a.tickFormat(u));var s=this.config.guide.animationSpeed;m(t,this._getAxisSelector(e)).classed("tau-active",!0).classed(e.guide.cssClass,!0).call(function(t){var o=(0,h.d3_transition)(t,s,"axisTransition"),u=t.attr("transform"),c=l.utilsDraw.translate.apply(l.utilsDraw,p(n));c!==u&&(u?o:t).attr("transform",l.utilsDraw.translate.apply(l.utilsDraw,p(n))),o.call(a),o.attr("opacity",1);var f="h"===l.utilsDraw.getOrientation(e.guide.scaleOrient),d="ordinal"===e.scaleType||"period"===e.scaleType;if(d&&!e.guide.hideTicks&&(0,h.d3_decorator_prettify_categorical_axis_ticks)(o,e,f,s),"linear"===e.scaleType&&(0,h.d3_decorator_highlightZeroTick)(t,e.scaleObj),(0,h.d3_decorator_wrap_tick_label)(t,s,e.guide,f,e),e.guide.label.hide||(0,h.d3_decorator_prettify_axis_label)(t,e.guide.label,f,r,s),e.guide.hideTicks)return t.selectAll(".tick").remove(),void t.selectAll(".domain").remove();var g=e.scaleObj.ticks?e.scaleObj.ticks():e.scaleObj.domain(),v=function(){d&&e.guide.avoidCollisions&&(0,h.d3_decorator_avoidLabelsCollisions)(t,f,g),f&&"time"===e.scaleType&&(0,h.d3_decorator_fixHorizontalAxisTicksOverflow)(t,g)},y=function(){!f||"time"!==e.scaleType&&"linear"!==e.scaleType||(0,h.d3_decorator_fixEdgeAxisTicksOverflow)(t,g)},m=function(){v(),y()};v();var b="_transitionEndTimeout_"+(f?"h":"v");clearTimeout(i[b]),s>0?i[b]=setTimeout(m,1.5*s):y()})}},{key:"_removeDimAxis",value:function(t,e){var n=(0,h.d3_selectAllImmediate)(t,this._getAxisSelector(e)).classed("tau-active",!1);(0,h.d3_transition)(n,this.config.guide.animationSpeed,"axisTransition").attr("opacity",1e-6).remove()}},{key:"_getAxisSelector",value:function(t){var e="h"===l.utilsDraw.getOrientation(t.guide.scaleOrient);return"g."+(e?"x":"y")+".axis"}},{key:"_drawGrid",value:function(t,e,n,r){var i=this,a=m(t,"g.grid").attr("transform",l.utilsDraw.translate(0,0)).call(function(t){var a=t,u=i.config.guide.animationSpeed,s=(e.guide.showGridLines||"").toLowerCase();if(s.length>0){var c=m(a,"g.grid-lines");if(s.indexOf("x")>-1){var d=e.x,p="top"===d.guide.scaleOrient?-1:1,g=o.default.svg.axis().scale(d.scaleObj).orient(d.guide.scaleOrient).tickSize(p*r),v=f.FormatterRegistry.get(d.guide.tickFormat);null!==v&&(g.ticks(b(n/d.guide.density)),g.tickFormat(v));var y=m(c,"g.grid-lines-x"),x=(0,h.d3_transition)(y,u).call(g),_="h"===l.utilsDraw.getOrientation(d.guide.scaleOrient),w="ordinal"===d.scaleType||"period"===d.scaleType;w&&(0,h.d3_decorator_prettify_categorical_axis_ticks)(x,d,_,u),"linear"!==d.scaleType||d.guide.hideTicks||(0,h.d3_decorator_highlightZeroTick)(y,d.scaleObj);var M=m(c,"g.tau-extraGridLines");(0,h.d3_decorator_fix_axis_start_line)(M,_,n,r,u),d.guide.hideTicks&&y.selectAll(".tick").filter(function(t){return 0!=t}).remove()}if(s.indexOf("y")>-1){var S=e.y,k="right"===S.guide.scaleOrient?1:-1,O=o.default.svg.axis().scale(S.scaleObj).orient(S.guide.scaleOrient).tickSize(k*n),E=f.FormatterRegistry.get(S.guide.tickFormat);null!==E&&(O.ticks(b(r/S.guide.density)),O.tickFormat(E));var A=m(c,"g.grid-lines-y"),C=(0,h.d3_transition)(A,u).call(O),T="h"===l.utilsDraw.getOrientation(S.guide.scaleOrient),P="ordinal"===S.scaleType||"period"===S.scaleType;P&&(0,h.d3_decorator_prettify_categorical_axis_ticks)(C,S,T,u),"linear"!==S.scaleType||S.guide.hideTicks||(0,h.d3_decorator_highlightZeroTick)(A,S.scaleObj);var j=["time","ordinal","period"],N=-1!==j.indexOf(S.scaleType);if(N){var L=m(c,"g.tau-extraGridLines");(0,h.d3_decorator_fix_axis_start_line)(L,T,n,r,u)}S.guide.hideTicks&&A.selectAll(".tick").filter(function(t){return 0!=t}).remove()}c.selectAll("text").remove()}});return a}}]),e}(a.Element)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parallel=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=f(i),a=n(5),u=n(10),l=n(3),s=n(22),c=n(32);function f(t){return t&&t.__esModule?t:{default:t}}function h(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function g(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.Parallel=function(t){function e(t){d(this,e);var n=p(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.config=t,n.config.guide=l.utils.defaults(n.config.guide||{},{padding:{l:50,r:50,t:50,b:50},enableBrushing:!1}),n.columnsBrushes={},n.on("force-brush",function(t,e){return n._forceBrushing(e)});var r=n.config.options,i=n.config.guide.padding;return n.L=r.left+i.l,n.T=r.top+i.t,n.W=r.width-(i.l+i.r),n.H=r.height-(i.t+i.b),n}return g(e,t),r(e,[{key:"defineGrammarModel",value:function(t){var e=this.config,n=this.W,r=this.H;this.columnsScalesMap=e.columns.reduce(function(e,n){return e[n]=t("pos",n,[r,0]),e},{});var i=n/(e.columns.length-1),o=e.columns.reduce(function(t,e,n){return t[e]=n*i,t},{});return this.xBase=function(t){return o[t]},this.regScale("columns",this.columnsScalesMap),{}}},{key:"allocateRect",value:function(){var t=this;return{slot:function(e){return t.config.options.container.selectAll(".uid_"+e)},left:0,top:0,width:this.W,height:this.H,containerWidth:this.W,containerHeight:this.H}}},{key:"drawFrames",value:function(t){var e=this,n=Object.assign({},this.config),r=n.options,i=function(t,e,n){var r=e.selectAll(".layer_"+t).data(n.units,function(t){return t.uid});r.exit().remove(),r.enter().append("g").attr("class",function(e){return"layer_"+t+" uid_"+e.uid})},a=function(t){i(r.frameId,o.default.select(this),t)},u=this._fnDrawGrid(r.container,n,r.frameId,Object.keys(this.columnsScalesMap).reduce(function(t,n){return t.concat([e.columnsScalesMap[n].getHash()])},[]).join("_")),l=u.selectAll(".parent-frame-"+r.frameId).data(t,function(t){return t.hash()});l.exit().remove(),l.each(a),l.enter().append("g").attr("class",function(t){return s.CSS_PREFIX+"cell cell parent-frame-"+r.frameId+" frame-"+t.hash()}).each(a);var c=this._fnDrawColumns(u,n);n.guide.enableBrushing&&this._enableBrushing(c)}},{key:"_fnDrawGrid",value:function(t,e,n,r){var i=t.selectAll(".grid_"+n).data([r],function(t){return t});return i.exit().remove(),i.enter().append("g").attr("class","grid grid_"+n).attr("transform",u.utilsDraw.translate(this.L,this.T)),i}},{key:"_fnDrawColumns",value:function(t,e){var n=e.guide.columns||{},r=this.xBase,i=this.columnsScalesMap,a=o.default.svg.axis().orient("left"),l=t.selectAll(".column").data(e.columns,function(t){return t});return l.exit().remove(),l.enter().append("g").attr("class","column").attr("transform",function(t){return u.utilsDraw.translate(r(t),0)}).call(function(){this.append("g").attr("class","y axis").each(function(t){var e=i[t].dim,r=a.scale(i[t]),u=n[e]||{},l=c.FormatterRegistry.get(u.tickFormat,u.tickFormatNullAlias);null!==l&&r.tickFormat(l),o.default.select(this).call(r)}).append("text").attr("class","label").attr("text-anchor","middle").attr("y",-9).text(function(t){return((n[t]||{}).label||{}).text||i[t].dim})}),l}},{key:"_enableBrushing",value:function(t){var e=this,n=16,r=this.columnsScalesMap,i=this.columnsBrushes,a=function(t){return t},u=function(t){return t},s=function(){var t=Object.keys(i).filter(function(t){return!i[t].empty()}).map(function(t){var e=i[t].extent(),n=[];return n=r[t].discrete?r[t].domain().filter(function(n){var i=r[t](n);return e[0]<=i&&e[1]>=i}):[e[0],e[1]],{dim:r[t].dim,func:r[t].discrete?"inset":"between",args:n}});e.fire("brush",t)};return t.selectAll(".brush").remove(),t.append("g").attr("class","brush").each(function(t){i[t]=o.default.svg.brush().y(r[t]).on("brushstart",a).on("brush",s).on("brushend",u),o.default.select(this).classed("brush-"+l.utils.generateHash(t),!0).call(i[t])}).selectAll("rect").attr("x",n/2*-1).attr("width",n),t}},{key:"_forceBrushing",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.columnsBrushes,n=this.columnsScalesMap;Object.keys(t).filter(function(r){return e[r]&&n[r]&&t[r]}).forEach(function(r){var i=t[r],a=[];if(n[r].discrete){var u=i.map(n[r]).filter(function(t){return t>=0}),s=n[r].stepSize()/2;a=[Math.min.apply(Math,h(u))-s,Math.max.apply(Math,h(u))+s]}else a=[i[0],i[1]];var c=l.utils.generateHash(r);e[r].extent(a),e[r](o.default.select(".brush-"+c)),e[r].event(o.default.select(".brush-"+c))})}}]),e}(a.Element)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeoMap=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=f(i),a=n(3),u=n(43),l=f(u),s=n(44),c=n(5);function f(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}o.default.labeler=s.d3Labeler;var g=5.5,v=10,y=.5,m=["land","continents","georegions","countries","regions","subunits","states","counties"];e.GeoMap=function(t){function e(t){h(this,e);var n=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.config=t,n.config.guide=a.utils.defaults(n.config.guide||{},{defaultFill:"rgba(128,128,128,0.25)",padding:{l:0,r:0,t:0,b:0},showNames:!0}),n.contourToFill=null,n.on("highlight-area",function(t,e){return n._highlightArea(e)}),n.on("highlight-point",function(t,e){return n._highlightPoint(e)}),n.on("highlight",function(t,e){return n._highlightPoint(e)}),n}return p(e,t),r(e,[{key:"defineGrammarModel",value:function(t){var e=this.config,n=e.options,r=e.guide.padding,i=n.width-(r.l+r.r),o=n.height-(r.t+r.b);return this.latScale=t("pos",e.latitude,[0,o]),this.lonScale=t("pos",e.longitude,[i,0]),this.sizeScale=t("size",e.size),this.colorScale=t("color",e.color),this.codeScale=t("value",e.code),this.fillScale=t("fill",e.fill),this.W=i,this.H=o,this.regScale("latitude",this.latScale).regScale("longitude",this.lonScale).regScale("size",this.sizeScale).regScale("color",this.colorScale).regScale("code",this.codeScale).regScale("fill",this.fillScale),{}}},{key:"drawFrames",value:function(t){var e=this,n=this.config.guide;"string"===typeof n.sourcemap?o.default.json(n.sourcemap,function(n,r){if(n)throw n;e._drawMap(t,r)}):this._drawMap(t,n.sourcemap)}},{key:"_calcLabels",value:function(t,e,n){var r=this.W,i=this.H,a={};return e.forEach(function(e){var u=l.default.feature(t,t.objects[e]).features||[],s=u.map(function(t){var i=t.properties||{},o=n.centroid(t),a=n.bounds(t),u=o[0],l=o[1],s=a[1][0],c=a[0][0],f=s-c,h=i.name||"",d=i.abbr||h,p=f<h.length*g,v=p?d:h,y=f<2.5*g,m=y?r-u-3*g:0;return{id:e+"-"+t.id,sx:u,sy:l,x:u+m,y:l,width:v.length*g,height:10,name:v,r:m,isRef:y}}).filter(function(t){return!Number.isNaN(t.x)&&!Number.isNaN(t.y)}),c=s.map(function(t){return{x:t.sx,y:t.sy,r:t.r}});o.default.labeler().label(s).anchor(c).width(r).height(i).start(v),s.filter(function(t){return!t.isRef}).map(function(t){return t.x=t.sx,t.y=t.sy,t}).reduce(function(t,e){return t[e.id]=e,t},a);var f=s.filter(function(t){return t.isRef});f.length<6&&f.reduce(function(t,e){return t[e.id]=e,t},a)}),a}},{key:"_drawMap",value:function(t,e){var n,r,i=this,a=this,u=this.config.guide,s=this.config.options,c=this.config.options.container,f=this.latScale,h=this.lonScale,d=this.sizeScale,p=this.colorScale,v=this.codeScale,b=this.fillScale,x=this.W,_=this.H,w=m.filter(function(t){return(e.objects||{}).hasOwnProperty(t)});if(0===w.length)throw new Error("Invalid map: should contain some contours");if(b.dim){if(!v.georole)throw console.log("Specify [georole] for code scale"),new Error("[georole] is missing");if(-1===w.indexOf(v.georole))throw console.log('There is no contour for georole "'+v.georole+'"'),console.log("Available contours are: "+w.join(" | ")),new Error("Invalid [georole]");n=v.georole}else n=w[w.length-1];if(this.contourToFill=n,f.dim&&h.dim){var M=o.default.extent(f.domain()),S=o.default.extent(h.domain());r=[(S[1]+S[0])/2,(M[1]+M[0])/2]}var k=this._createProjection(e,w[0],r),O=o.default.geo.path().projection(k),E=c.selectAll(".map-container").data([""+x+_+r+w.join("-")],function(t){return t});E.exit().remove(),E.enter().append("g").call(function(){var t=this;t.attr("class","map-container");var n={},r=w.reduceRight(function(t,e){return t.concat(e)},[]);if(u.showNames&&(n=a._calcLabels(e,r,O)),r.forEach(function(r,i){var o=function(t){return n[r+"-"+t.id]};t.selectAll(".map-contour-"+r).data(l.default.feature(e,e.objects[r]).features||[]).enter().append("g").call(function(){var t=this;t.attr("class","map-contour-"+r+" map-contour-level map-contour-level-"+i).attr("fill","none"),t.append("title").text(function(t){return(t.properties||{}).name}),t.append("path").attr("d",O),t.append("text").attr("class","place-label-"+r).attr("transform",function(t){var e=o(t);return e?"translate("+[e.x,e.y]+")":""}).text(function(t){var e=o(t);return e?e.name:""}),t.append("line").attr("class","place-label-link-"+r).attr("stroke","gray").attr("stroke-width",.25).attr("x1",function(t){var e=o(t);return e&&e.isRef?e.sx:0}).attr("y1",function(t){var e=o(t);return e&&e.isRef?e.sy:0}).attr("x2",function(t){var e=o(t);return e&&e.isRef?e.x-.6*e.name.length*g:0}).attr("y2",function(t){var e=o(t);return e&&e.isRef?e.y-3.5:0})})}),e.objects.hasOwnProperty("places")){var i=l.default.feature(e,e.objects.places),s=i.features.map(function(t){var e=k(t.geometry.coordinates);return{x:e[0]+3.5,y:e[1]+3.5,width:t.properties.name.length*g,height:12,name:t.properties.name}}),c=i.features.map(function(t){var e=k(t.geometry.coordinates);return{x:e[0],y:e[1],r:2.5}});o.default.labeler().label(s).anchor(c).width(x).height(_).start(100),t.selectAll(".place").data(c).enter().append("circle").attr("class","place").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).attr("r",function(t){return t.r+"px"}),t.selectAll(".place-label").data(s).enter().append("text").attr("class","place-label").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).text(function(t){return t.name})}}),this.groupByCode=t.reduce(function(t,e){return e.part().reduce(function(t,e){var n=(e[v.dim]||"").toLowerCase();return t[n]=e,t},t)},{});var A=this._resolveFeature.bind(this);if(E.selectAll(".map-contour-"+n).data(l.default.feature(e,e.objects[n]).features).call(function(){this.classed("map-contour",!0).attr("fill",function(t){var e=A(t);return null===e?u.defaultFill:b(e[b.dim])})}).on("mouseover",function(t){return i.fire("area-mouseover",{data:A(t),event:o.default.event})}).on("mouseout",function(t){return i.fire("area-mouseout",{data:A(t),event:o.default.event})}).on("click",function(t){return i.fire("area-click",{data:A(t),event:o.default.event})}),!f.dim||!h.dim)return[];var C=function(){return this.attr({r:function(t){var e=t.data;return d(e[d.dim])},transform:function(t){var e=t.data;return"translate("+k([e[h.dim],e[f.dim]])+")"},class:function(t){var e=t.data;return p(e[p.dim])},opacity:y}).on("mouseover",function(t){var e=t.data;return a.fire("point-mouseover",{data:e,event:o.default.event})}).on("mouseout",function(t){var e=t.data;return a.fire("point-mouseout",{data:e,event:o.default.event})}).on("click",function(t){var e=t.data;return a.fire("point-click",{data:e,event:o.default.event})})},T=function(){this.attr("class",function(t){return"frame frame-"+t.hash}).call(function(){var t=this.selectAll("circle").data(function(t){return t.data.map(function(t){return{data:t,uid:s.uid}})});t.exit().remove(),t.call(C),t.enter().append("circle").call(C)})},P=function(t){return{tags:t.key||{},hash:t.hash(),data:t.part()}},j=E.selectAll(".frame").data(t.map(P),function(t){return t.hash});return j.exit().remove(),j.call(T),j.enter().append("g").call(T),[]}},{key:"_resolveFeature",value:function(t){var e,n=this.groupByCode,r=t.properties,i=["c1","c2","c3","abbr","name"].filter(function(t){return r.hasOwnProperty(t)&&r[t]&&n.hasOwnProperty(r[t].toLowerCase())});if(0===i.length)e=null;else if(i.length>0){var o=r[i[0]].toLowerCase();e=n[o]}return e}},{key:"_highlightArea",value:function(t){var e=this,n=this.config.options.container,r=this.contourToFill;n.selectAll(".map-contour-"+r).classed("map-contour-highlighted",function(n){return t(e._resolveFeature(n))})}},{key:"_highlightPoint",value:function(t){this.config.options.container.selectAll("circle").classed("map-point-highlighted",function(e){var n=e.data;return t(n)}).attr("opacity",function(e){var n=e.data;return t(n)?y:.1})}},{key:"_createProjection",value:function(t,e,n){var r=this.W,i=this.H,a=this.config.guide,u=100,s=[r/2,i/2],c=n||t.center,f=a.projection||t.projection||"mercator",h=this._createD3Projection(f,c,u,s),d=o.default.geo.path().projection(h),p=d.bounds(l.default.feature(t,t.objects[e])),g=u*r/(p[1][0]-p[0][0]),v=u*i/(p[1][1]-p[0][1]);return u=g<v?g:v,s=[r-(p[0][0]+p[1][0])/2,i-(p[0][1]+p[1][1])/2],this._createD3Projection(f,c,u,s)}},{key:"_createD3Projection",value:function(t,e,n,r){var i=o.default.geo[t];if(!i)throw console.log('Unknown projection "'+t+'"'),console.log("See available projection types here: https://github.com/mbostock/d3/wiki/Geo-Projections"),new Error('Invalid map: unknown projection "'+t+'"');var a=i(),u=[{method:"scale",args:n},{method:"center",args:e},{method:"translate",args:r}].filter(function(t){return t.args});return u.reduce(function(t,e){return t[e.method]&&(t=t[e.method](e.args)),t},a)}}]),e}(c.Element)},function(t,e,n){(function(t,n){n(e)})(0,function(t){"use strict";function e(){}function n(t){if(!t)return e;var n,r,i=t.scale[0],o=t.scale[1],a=t.translate[0],u=t.translate[1];return function(t,e){e||(n=r=0),t[0]=(n+=t[0])*i+a,t[1]=(r+=t[1])*o+u}}function r(t){if(!t)return e;var n,r,i=t.scale[0],o=t.scale[1],a=t.translate[0],u=t.translate[1];return function(t,e){e||(n=r=0);var l=(t[0]-a)/i|0,s=(t[1]-u)/o|0;t[0]=l-n,t[1]=s-r,n=l,r=s}}function i(t,e){var n,r=t.length,i=r-e;while(i<--r)n=t[i],t[i++]=t[r],t[r]=n}function o(t,e){var n=0,r=t.length;while(n<r){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}function a(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return u(t,e)})}:u(t,e)}function u(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:l(t,e)};return null==e.id&&delete n.id,n}function l(t,e){var r=n(t.transform),o=t.arcs;function a(t,e){e.length&&e.pop();for(var n,a=o[t<0?~t:t],u=0,l=a.length;u<l;++u)e.push(n=a[u].slice()),r(n,u);t<0&&i(e,l)}function u(t){return t=t.slice(),r(t,0),t}function l(t){for(var e=[],n=0,r=t.length;n<r;++n)a(t[n],e);return e.length<2&&e.push(e[0].slice()),e}function s(t){var e=l(t);while(e.length<4)e.push(e[0].slice());return e}function c(t){return t.map(s)}function f(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(f)}:e in h?{type:e,coordinates:h[e](t)}:null}var h={Point:function(t){return u(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(u)},LineString:function(t){return l(t.arcs)},MultiLineString:function(t){return t.arcs.map(l)},Polygon:function(t){return c(t.arcs)},MultiPolygon:function(t){return t.arcs.map(c)}};return f(e)}function s(t,e){var n={},r={},i={},o=[],a=-1;function u(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function l(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){n[t<0?~t:t]=1}),o.push(i)}}return e.forEach(function(n,r){var i,o=t.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=e[++a],e[a]=n,e[r]=i)}),e.forEach(function(t){var e,n,o=u(t),a=o[0],l=o[1];if(e=i[a])if(delete i[e.end],e.push(t),e.end=l,n=r[l]){delete r[n.start];var s=n===e?e:e.concat(n);r[s.start=e.start]=i[s.end=n.end]=s}else r[e.start]=i[e.end]=e;else if(e=r[l])if(delete r[e.start],e.unshift(t),e.start=a,n=i[a]){delete i[n.end];var c=n===e?e:n.concat(e);r[c.start=n.start]=i[c.end=e.end]=c}else r[e.start]=i[e.end]=e;else e=[t],r[e.start=a]=i[e.end=l]=e}),l(i,r),l(r,i),e.forEach(function(t){n[t<0?~t:t]||o.push([t])}),o}function c(t){return l(t,f.apply(this,arguments))}function f(t,e,n){var r=[];function i(t){var e=t<0?~t:t;(c[e]||(c[e]=[])).push({i:t,g:l})}function o(t){t.forEach(i)}function a(t){t.forEach(o)}function u(t){"GeometryCollection"===t.type?t.geometries.forEach(u):t.type in f&&(l=t,f[t.type](t.arcs))}if(arguments.length>1){var l,c=[],f={LineString:o,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};u(e),c.forEach(arguments.length<3?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)})}else for(var h=0,d=t.arcs.length;h<d;++h)r.push(h);return{type:"MultiLineString",arcs:s(t,r)}}function h(t){var e=t[0],n=t[1],r=t[2];return Math.abs((e[0]-r[0])*(n[1]-e[1])-(e[0]-n[0])*(r[1]-e[1]))}function d(t){var e,n=-1,r=t.length,i=t[r-1],o=0;while(++n<r)e=i,i=t[n],o+=e[0]*i[1]-e[1]*i[0];return o/2}function p(t){return l(t,g.apply(this,arguments))}function g(t,e){var n={},r=[],i=[];function o(t){t.forEach(function(e){e.forEach(function(e){(n[e=e<0?~e:e]||(n[e]=[])).push(t)})}),r.push(t)}function a(e){return d(l(t,{type:"Polygon",arcs:[e]}).coordinates[0])>0}return e.forEach(function(t){"Polygon"===t.type?o(t.arcs):"MultiPolygon"===t.type&&t.arcs.forEach(o)}),r.forEach(function(t){if(!t._){var e=[],r=[t];t._=1,i.push(e);while(t=r.pop())e.push(t),t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].forEach(function(t){t._||(t._=1,r.push(t))})})})}}),r.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:i.map(function(e){var r,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){n[t<0?~t:t].length<2&&i.push(t)})})}),i=s(t,i),(r=i.length)>1)for(var o,u=a(e[0][0]),l=0;l<r;++l)if(u===a(i[l])){o=i[0],i[0]=i[l],i[l]=o;break}return i})}}function v(t){var e={},n=t.map(function(){return[]});function r(t,n){t.forEach(function(t){t<0&&(t=~t);var r=e[t];r?r.push(n):e[t]=[n]})}function i(t,e){t.forEach(function(t){r(t,e)})}function a(t,e){"GeometryCollection"===t.type?t.geometries.forEach(function(t){a(t,e)}):t.type in u&&u[t.type](t.arcs,e)}var u={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(t,e){t.forEach(function(t){i(t,e)})}};for(var l in t.forEach(a),e)for(var s=e[l],c=s.length,f=0;f<c;++f)for(var h=f+1;h<c;++h){var d,p=s[f],g=s[h];(d=n[p])[l=o(d,g)]!==g&&d.splice(l,0,g),(d=n[g])[l=o(d,p)]!==p&&d.splice(l,0,p)}return n}function y(t,e){return t[1][2]-e[1][2]}function m(){var t={},e=[],n=0;function r(t,n){while(n>0){var r=(n+1>>1)-1,i=e[r];if(y(t,i)>=0)break;e[i._=n]=i,e[t._=n=r]=t}}function i(t,r){while(1){var i=r+1<<1,o=i-1,a=r,u=e[a];if(o<n&&y(e[o],u)<0&&(u=e[a=o]),i<n&&y(e[i],u)<0&&(u=e[a=i]),a===r)break;e[u._=r]=u,e[t._=r=a]=t}}return t.push=function(t){return r(e[t._=n]=t,n++),n},t.pop=function(){if(!(n<=0)){var t,r=e[0];return--n>0&&(t=e[n],i(e[t._=0]=t,0)),r}},t.remove=function(t){var o,a=t._;if(e[a]===t)return a!==--n&&(o=e[n],(y(o,t)<0?r:i)(e[o._=a]=o,a)),a},t}function b(t,e){var i=n(t.transform),o=r(t.transform),a=m();function u(t){a.remove(t),t[1][2]=e(t),a.push(t)}return e||(e=h),t.arcs.forEach(function(t){var n,r,l,s,c=[],f=0;for(r=0,l=t.length;r<l;++r)s=t[r],i(t[r]=[s[0],s[1],1/0],r);for(r=1,l=t.length-1;r<l;++r)n=t.slice(r-1,r+2),n[1][2]=e(n),c.push(n),a.push(n);for(r=0,l=c.length;r<l;++r)n=c[r],n.previous=c[r-1],n.next=c[r+1];while(n=a.pop()){var h=n.previous,d=n.next;n[1][2]<f?n[1][2]=f:f=n[1][2],h&&(h.next=d,h[2]=n[2],u(h)),d&&(d.previous=h,d[0]=n[0],u(d))}t.forEach(o)}),t}var x="1.6.24";t.version=x,t.mesh=c,t.meshArcs=f,t.merge=p,t.mergeArcs=g,t.feature=a,t.neighbors=v,t.presimplify=b})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t,e=[],n=[],r=1,i=1,o={},a=5,u=.5,l=.2,s=1,c=30,f=30,h=3,d=!1,p=function(t){var r=e.length,i=0,o=e[t].x-n[t].x,a=n[t].y-e[t].y,u=Math.sqrt(o*o+a*a),d=!0;u>0&&(i+=u*l),o/=u,a/=u,i+=o>0&&a>0?0*h:o<0&&a>0?1*h:o<0&&a<0?2*h:3*h;for(var p,g,v,m,b,x,_,w=e[t].x,M=e[t].y-e[t].height+2,S=e[t].x+e[t].width,k=e[t].y+2,O=0;O<r;O++)O!=t&&(d=y(n[t].x,e[t].x,n[O].x,e[O].x,n[t].y,e[t].y,n[O].y,e[O].y),d&&(i+=s),p=e[O].x,v=e[O].y-e[O].height+2,g=e[O].x+e[O].width,m=e[O].y+2,b=Math.max(0,Math.min(g,S)-Math.max(p,w)),x=Math.max(0,Math.min(m,k)-Math.max(v,M)),_=b*x,i+=_*c),p=n[O].x-n[O].r,v=n[O].y-n[O].r,g=n[O].x+n[O].r,m=n[O].y+n[O].r,b=Math.max(0,Math.min(g,S)-Math.max(p,w)),x=Math.max(0,Math.min(m,k)-Math.max(v,M)),_=b*x,i+=_*f;return i},g=function(o){var u,l,s=Math.floor(Math.random()*e.length),c=e[s].x,f=e[s].y;u=d?t(s,e,n):p(s),e[s].x+=(Math.random()-.5)*a,e[s].y+=(Math.random()-.5)*a,e[s].x>r&&(e[s].x=c),e[s].x<0&&(e[s].x=c),e[s].y>i&&(e[s].y=f),e[s].y<0&&(e[s].y=f),l=d?t(s,e,n):p(s);var h=l-u;Math.random()<Math.exp(-h/o)?1:(e[s].x=c,e[s].y=f,1)},v=function(o){var a,l=Math.floor(Math.random()*e.length),s=e[l].x,c=e[l].y;a=d?t(l,e,n):p(l);var f=(Math.random()-.5)*u,h=Math.sin(f),g=Math.cos(f);e[l].x-=n[l].x,e[l].y-=n[l].y;var v,y=e[l].x*g-e[l].y*h,m=e[l].x*h+e[l].y*g;e[l].x=y+n[l].x,e[l].y=m+n[l].y,e[l].x>r&&(e[l].x=s),e[l].x<0&&(e[l].x=s),e[l].y>i&&(e[l].y=c),e[l].y<0&&(e[l].y=c),v=d?t(l,e,n):p(l);var b=v-a;Math.random()<Math.exp(-b/o)?1:(e[l].x=s,e[l].y=c,1)},y=function(t,e,n,r,i,o,a,u){var l,s,c,f,h;return c=(u-a)*(e-t)-(r-n)*(o-i),f=(r-n)*(i-a)-(u-a)*(t-n),h=(e-t)*(i-a)-(o-i)*(t-n),l=f/c,s=h/c,!(l<0||l>1||s<0||s>1)},m=function(t,e,n){return t-e/n};return o.start=function(t){for(var n=e.length,r=1,i=1,o=0;o<t;o++){for(var a=0;a<n;a++)Math.random()<.5?g(r):v(r);r=m(r,i,t)}},o.width=function(t){return arguments.length?(r=t,o):r},o.height=function(t){return arguments.length?(i=t,o):i},o.label=function(t){return arguments.length?(e=t,o):e},o.anchor=function(t){return arguments.length?(n=t,o):n},o.alt_energy=function(e){return arguments.length?(t=e,d=!0,o):p},o.alt_schedule=function(){return arguments.length?o:m},o};e.d3Labeler=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var r=n(22),i=n(7),o=n(46),a=n(9),u=n(3),l=n(1),s=n(10),c=n(2),f=h(c);function h(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={init:function(t){var e=Object.assign({},t);e.guide=u.utils.defaults(e.guide||{},{animationSpeed:0,avoidScalesOverflow:!0,enableColorToBarPosition:!1,maxHighlightDistance:32}),e.guide.size=e.guide.size||{},e.guide.label=u.utils.defaults(e.guide.label||{},{position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-anchor-overlap"]});var n=e.guide.avoidScalesOverflow,r=e.guide.enableColorToBarPosition;return e.transformRules=[function(t){var e=[t.scaleX,t.scaleY].sort(function(t,e){var n=t.discrete?1:0,r=e.discrete?1:0;return r*e.domain().length-n*t.domain().length})[0],n=t.scaleY===e;return n?i.GrammarRegistry.get("flip")(t):i.GrammarRegistry.get("identity")(t)},e.stack&&i.GrammarRegistry.get("stack"),r&&i.GrammarRegistry.get("positioningByColor")].filter(function(t){return t}),e.adjustRules=[e.stack&&i.GrammarRegistry.get("adjustYScale"),function(t,n){var r=t.scaleSize.isEmptyScale(),o=u.utils.defaults(e.guide.size,{defMinSize:10,defMaxSize:r?10:40,enableDistributeEvenly:!r}),a=Object.assign({},n,{defMin:o.defMinSize,defMax:o.defMaxSize,minLimit:o.minSize,maxLimit:o.maxSize}),l=o.enableDistributeEvenly?i.GrammarRegistry.get("adjustSigmaSizeScale"):i.GrammarRegistry.get("adjustStaticSizeScale");return l(t,a)},n&&function(t,e){var n=Object.assign({},e,{sizeDirection:"xy"});return i.GrammarRegistry.get("avoidScalesOverflow")(t,n)}].filter(function(t){return t}),e},addInteraction:function(){var t=this,e=this.node(),n=function(t,e){return function(n){return n===t||e}};e.on("highlight",function(e,n){return t.highlight(n)}),e.on("data-hover",function(e,r){return t.highlight(n(r.data,null))})},draw:function(){var t=this.node(),e=t.config,n=e.options;n.container=n.slot(e.uid);var i=function(t){return(0,a.d3_transition)(t,e.guide.animationSpeed)},u=r.CSS_PREFIX+"dot dot i-role-element i-role-datum",l=t.screenModel,s=1e4,c={fill:function(t){return l.color(t)},class:function(t){return u+" "+l.class(t)}},f={r:function(t){return Math.round(s*l.size(t)/2)/s},cx:function(t){return l.x(t)},cy:function(t){return l.y(t)}},h=function(){this.attr("class","frame").call(function(){var e=this.selectAll("circle").data(function(t){return t},l.id);i(e.enter().append("circle").attr(c)).attr(f),i(e.attr(c)).attr(f),i(e.exit()).attr({r:0}).remove(),t.subscribe(e)}),i(this).attr("opacity",1)},d=l.toFibers();this._getGroupOrder=function(){var t=d.reduce(function(t,e,n){return t.set(e,n),t},new Map);return function(e){return t.get(e)}}();var p=n.container.selectAll(".frame").data(d,function(t){return l.group(t[0])});p.enter().append("g").attr("opacity",0).call(h),p.call(h),this._boundsInfo=this._getBoundsInfo(p.selectAll(".dot").reduce(function(t,e){return t.concat(e)},[])),i(p.exit()).attr("opacity",0).remove().selectAll("circle").attr("r",0),t.subscribe(new o.LayerLabels(l.model,l.flip,e.guide.label,n).draw(d))},_getBoundsInfo:function(t){if(0===t.length)return null;var e=this.node().screenModel,n=t.map(function(t){var n=f.default.select(t).data()[0],r=e.x(n),i=e.y(n),o=e.size(n)/2;return{node:t,data:n,x:r,y:i,r:o}}).filter(function(t){return!isNaN(t.x)&&!isNaN(t.y)}),r=n.reduce(function(t,e){var n=e.x,r=e.y;return t.left=Math.min(n,t.left),t.right=Math.max(n,t.right),t.top=Math.min(r,t.top),t.bottom=Math.max(r,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),i=n.reduce(function(t,e){var n=e.x+","+e.y;return t[n]||(t[n]=[]),t[n].push(e),t},{}),o=f.default.geom.quadtree().x(function(t){return t[0].x}).y(function(t){return t[0].y})(Object.keys(i).map(function(t){return i[t]}));return{bounds:r,tree:o}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=this.node().config.options.container,a=s.utilsDraw.getDeepTransformTranslate(o.node()),u=t-a.x,l=e-a.y,c=this.node().config.guide.maxHighlightDistance;if(u<r.left-c||u>r.right+c||l<r.top-c||l>r.bottom+c)return null;var f=(i.find([u,l])||[]).map(function(t){var e=Math.sqrt(Math.pow(u-t.x,2)+Math.pow(l-t.y,2));if(e>c)return null;var n=e<t.r?t.r-e:e;return{node:t.node,data:t.data,x:t.x,y:t.y,distance:e,secondaryDistance:n}}).filter(function(t){return t}).sort(function(t,e){return t.secondaryDistance-e.secondaryDistance}),h=f.findIndex(function(t){return t.distance!==f[0].distance||t.secondaryDistance!==f[0].secondaryDistance}),d=h<0?f:f.slice(0,h);if(1===d.length)return d[0];var p=d.reduce(function(t,e){return t+e.x},0)/d.length,g=d.reduce(function(t,e){return t+e.y},0)/d.length,v=Math.atan2(g-l,p-u)+Math.PI,y=d[Math.round((d.length-1)*v/2/Math.PI)];return y},highlight:function(t){var e,n="graphical-report__highlighted",r="graphical-report__dimmed",i=this.node().config.options.container,o=(e={},d(e,n,function(e){return!0===t(e)}),d(e,r,function(e){return!1===t(e)}),e);i.selectAll(".dot").classed(o),i.selectAll(".i-role-label").classed(o),this._sortElements(t)},_sortElements:function(t){var e=this,n=this.node().config.options.container,r=new Map,i=new Map;n.selectAll(".frame").each(function(e){r.set(this,e.some(t)),i.set(this,e)});var o=u.utils.createMultiSorter(function(t,e){return r.get(t)-r.get(e)},function(t,n){return e._getGroupOrder(i.get(t))-e._getGroupOrder(i.get(n))});l.utilsDom.sortChildren(n.node(),function(t,e){return"g"===t.tagName&&"g"===e.tagName?o(t,e):t.tagName.localeCompare(e.tagName)}),s.utilsDraw.raiseElements(n,".dot",t)}};e.Point=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerLabels=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(10),o=n(1),a=n(3),u=n(47),l=n(48),s=n(49),c=n(50),f=n(32);function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function(t,e,n,r,o,a,u,l){return i.utilsDraw.isIntersect(t,o,e,a,n,u,r,l)};e.LayerLabels=function(){function t(e,n,r,i){var o=i.width,u=i.height,l=i.container;d(this,t),this.container=l,this.model=e,this.flip=n,this.w=o,this.h=u,this.guide=a.utils.defaults(r||{},{fontFamily:"Helvetica Neue, Segoe UI, Open Sans, Ubuntu, sans-serif",fontWeight:"normal",fontSize:10,fontColor:"#000",hideEqualLabels:!1,position:[],tickFormat:null,tickFormatNullAlias:""})}return r(t,[{key:"draw",value:function(t){var e=this,n=this.model,r=this.guide,i=u.LayerLabelsModel.seed(n,{fontSize:r.fontSize,fontColor:r.fontColor,flip:e.flip,formatter:f.FormatterRegistry.get(r.tickFormat,r.tickFormatNullAlias),labelRectSize:function(t){return o.utilsDom.getLabelSize(t,r)}}),a={maxWidth:e.w,maxHeight:e.h,data:t.reduce(function(t,e){return t.concat(e)},[])},s=r.position.filter(function(t){return-1===t.indexOf("auto:")}),c=s.map(l.LayerLabelsRules.getRule).reduce(function(t,e){return u.LayerLabelsModel.compose(t,e(t,a))},i),d=function(t,e){for(var n=t.length-1,r=[],i=0;i<=n;i++){var o=0===i?i:i-1,a=i,u=i===n?i:i+1;r.push(e(t[o],t[a],t[u]))}return r},p=t.reduce(function(t,e){var n=e.map(function(t){return{data:t,x:c.x(t)+c.dx(t),y:c.y(t)+c.dy(t),w:c.w(t),h:c.h(t,a),hide:c.hide(t),extr:null,size:c.model.size(t),angle:c.angle(t),label:c.label(t),color:c.color(t)}});return t.text=t.text.concat(n),t.edges=t.edges.concat(d(n,function(t,e,n){return e.y===Math.max(e.y,t.y,n.y)?e.extr="min":e.y===Math.min(e.y,t.y,n.y)?e.extr="max":e.extr="norm",{x0:t.x,x1:e.x,y0:t.y,y1:e.y}})),t},{text:[],edges:[]});p.text=p.text.filter(function(t){return t.label}).map(function(t,e){return Object.assign(t,{i:e})});var g=this.guide.position.filter(function(t){return 0===t.indexOf("auto:avoid")});p=p.text.length>0&&g.length>0?this.autoPosition(p,g):p;var v=this.guide.position.reduce(function(t,e){return Object.assign(t,h({},e,!0))},{});p.text=p.text=v["auto:adjust-on-label-overflow"]?this.adjustOnOverflow(p.text,a):p.text,p.text=v["auto:hide-on-label-edges-overlap"]?this.hideOnLabelEdgesOverlap(p.text,p.edges):p.text,p.text=v["auto:hide-on-label-label-overlap"]?this.hideOnLabelLabelOverlap(p.text):p.text,p.text=v["auto:hide-on-label-anchor-overlap"]?this.hideOnLabelAnchorOverlap(p.text):p.text;var y=p.text,m=function(t){return function(e,n){return y[n][t]}},b=m("x"),x=m("y"),_=m("angle"),w=m("color"),M=m("label"),S=function(){this.style("fill",w).style("font-size",e.guide.fontSize+"px").style("display",function(t,e){return y[e].hide?"none":null}).attr("class","i-role-label").attr("text-anchor","middle").attr("transform",function(t,e){return"translate("+b(t,e)+","+x(t,e)+") rotate("+_(t,e)+")"}).text(M)};r.hideEqualLabels&&y.filter(function(t){return!t.hide}).filter(function(t,e,n){return e<n.length-1&&t.label===n[e+1].label}).forEach(function(t){return t.hide=!0});var k=this.container.selectAll(".i-role-label").data(y.map(function(t){return t.data}));return k.exit().remove(),k.call(S),k.enter().append("text").call(S),k}},{key:"autoPosition",value:function(t,e){var n=function(t,e){var n=4,r=2,i=n+(t.size+t.w)/2,o=r+(t.size+t.h)/2;return{x:i*Math.cos(e),y:o*Math.sin(e)}},r=t.edges,i=t.text.map(function(t){var e={max:-Math.PI/2,min:Math.PI/2,norm:Math.random()*Math.PI*2},r=n(t,e[t.extr]);return{i:t.i,x0:t.x,y0:t.y,x:t.x+r.x,y:t.y+r.y,w:t.w,h:t.h,size:t.size,hide:t.hide,extr:t.extr}}).filter(function(t){return!t.hide}),o=new s.AnnealingSimulator({items:i,transactor:function(t){var e=t.x,r=t.y;return{modify:function(){var e={max:-Math.PI,min:Math.PI,norm:2*Math.PI},r=4,i=e[t.extr],o=i/r+Math.random()*(i*(r-2))/r,a=n(t,o);return t.x=t.x0+a.x,t.y=t.y0+a.y,t},revert:function(){return t.x=e,t.y=r,t}}},penalties:e.map(function(t){return c.LayerLabelsPenalties.get(t)}).filter(function(t){return t}).map(function(t){return t(i,r)})}),a=o.start(5);return t.text=a.reduce(function(t,e){var n=t[e.i];return n.x=e.x,n.y=e.y,t},t.text),t}},{key:"hideOnLabelEdgesOverlap",value:function(t,e){var n=this,r=function(t,e){var r=n.getLabelRect(t);return e.reduce(function(t,e){var n=p(r.x0,r.x1,e.x0,e.x1,r.y0,r.y1,e.y0,e.y1),i=p(r.x0,r.x1,e.x0,e.x1,r.y1,r.y0,e.y0,e.y1);return t+2*(n+i)},0)};return t.filter(function(t){return!t.hide}).forEach(function(t){r(t,e)>0&&(t.hide=!0)}),t}},{key:"hideOnLabelLabelOverlap",value:function(t){var e=this,n={min:0,max:1,norm:2},r={"min/min":function(t,e){return e.y-t.y},"max/max":function(t,e){return t.y-e.y},"min/max":function(){return-1},"min/norm":function(){return-1},"max/norm":function(){return-1},"norm/norm":function(t,e){return t.y-e.y}},i=function(t,i){var o=e.getLabelRect(t),a=e.getLabelRect(i),u=!t.hide&&!i.hide,l=u*Math.max(0,Math.min(a.x1,o.x1)-Math.max(o.x0,a.x0)),s=u*Math.max(0,Math.min(a.y1,o.y1)-Math.max(o.y0,a.y0));if(l*s>0){var c=[t,i];c.sort(function(t,e){return n[t.extr]-n[e.extr]});var f=r[c[0].extr+"/"+c[1].extr](c[0],c[1])<0?c[0]:c[1];f.hide=!0}};return t.filter(function(t){return!t.hide}).sort(function(t,e){return n[t.extr]-n[e.extr]}).forEach(function(e){t.forEach(function(t){e.i!==t.i&&i(e,t)})}),t}},{key:"getLabelRect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x0:t.x-t.w/2-e,x1:t.x+t.w/2+e,y0:t.y-t.h/2-e,y1:t.y+t.h/2+e}}},{key:"getPointRect",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{x0:t.x-t.size/2-e,x1:t.x+t.size/2+e,y0:t.y-t.size/2-e,y1:t.y+t.size/2+e}}},{key:"hideOnLabelAnchorOverlap",value:function(t){var e=this,n=function(t,n){var r=e.getLabelRect(t,2),i=e.getPointRect(n,2),o=Math.max(0,Math.min(i.x1,r.x1)-Math.max(i.x0,r.x0)),a=Math.max(0,Math.min(i.y1,r.y1)-Math.max(i.y0,r.y0));return o*a>.001};return t.filter(function(t){return!t.hide}).forEach(function(e){for(var r=t.length,i=0;i<r;i++){var o=t[i];if(e.i!==o.i&&n(e,o)){e.hide=!0;break}}}),t}},{key:"adjustOnOverflow",value:function(t,e){var n=e.maxWidth,r=e.maxHeight;return t.map(function(t){return t.hide||(t.x=Math.min(Math.max(t.x,t.w/2),n-t.w/2),t.y=Math.max(Math.min(t.y,r-t.h/2),t.h/2)),t})}}]),t}()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(t){return function(){return t}};e.LayerLabelsModel=function(){function t(e){r(this,t),this.model=e.model,this.x=e.x||i(0),this.y=e.y||i(0),this.dx=e.dx||i(0),this.dy=e.dy||i(0),this.w=e.w||i(0),this.h=e.h||i(0),this.hide=e.hide||i(!1),this.label=e.label||i(""),this.color=e.color||i(""),this.angle=e.angle||i(0)}return n(t,null,[{key:"seed",value:function(e,n){var r=n.fontColor,i=n.flip,o=n.formatter,a=n.labelRectSize,u=n.paddingKoeff,l=void 0===u?.5:u,s=i?e.yi:e.xi,c=i?e.xi:e.yi,f=function(t){return o(e.label(t))};return new t({model:e,x:function(t){return s(t)},y:function(t){return c(t)},dy:function(t){return a(f(t)).height*l},w:function(t){return a(f(t)).width},h:function(t){return a(f(t)).height},label:f,color:function(){return r},angle:function(){return 0}})}},{key:"compose",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(n).reduce(function(t,e){return t[e]=n[e],t},new t(e))}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerLabelsRules=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(47);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a={},u=e.LayerLabelsRules=function(){function t(){o(this,t)}return r(t,null,[{key:"regRule",value:function(t,e){return a[t]=e,this}},{key:"getRule",value:function(t){return a[t]}}]),t}(),l=function(t,e,n){return n<e?Math.max(1,Math.floor(n*t.length/e))-1:t.length},s=function(t,e){return 0===e?"":t.slice(0,e).replace(/\.+$/g,"")+""},c=function(t,e){return t.discrete||!t.discrete&&e[t.dim]>=0},f=function(t,e){return!t.discrete&&e[t.dim]<0},h=function(t,e){return t.w(e)/2+Math.floor(t.model.size(e)/5)},d=function(t,e){return t.h(e)/2+Math.floor(t.model.size(e)/5)},p=function(t){return function(e){return{dx:function(n){var r=e.model.scaleY;if("+"===t[2]&&!c(r,n))return e.dx(n);if("-"===t[2]&&!f(r,n))return e.dx(n);var i=t[1],o=t[0]===t[0].toUpperCase()?1:0;return e.dx(n)+i*o*e.model.size(n)/2+i*h(e,n)}}}},g=function(t){return function(e){return{dy:function(n){var r=e.model.scaleY;if("+"===t[2]&&!c(r,n))return e.dy(n);if("-"===t[2]&&!f(r,n))return e.dy(n);var i=t[1],o=t[0]===t[0].toUpperCase()?1:0;return e.dy(n)+i*o*e.model.size(n)/2+i*d(e,n)}}}};u.regRule("l",p(["l",-1,null])).regRule("L",p(["L",-1,null])).regRule("l+",p(["l",-1,"+"])).regRule("l-",p(["l",-1,"-"])).regRule("L+",p(["L",-1,"+"])).regRule("L-",p(["L",-1,"-"])).regRule("r",p(["r",1,null])).regRule("R",p(["R",1,null])).regRule("r+",p(["r",1,"+"])).regRule("r-",p(["r",1,"-"])).regRule("R+",p(["R",1,"+"])).regRule("R-",p(["R",1,"-"])).regRule("t",g(["t",-1,null])).regRule("T",g(["T",-1,null])).regRule("t+",g(["t",-1,"+"])).regRule("t-",g(["t",-1,"-"])).regRule("T+",g(["T",-1,"+"])).regRule("T-",g(["T",-1,"-"])).regRule("b",g(["b",1,null])).regRule("B",g(["B",1,null])).regRule("b+",g(["b",1,"+"])).regRule("b-",g(["b",1,"-"])).regRule("B+",g(["B",1,"+"])).regRule("B-",g(["B",1,"-"])).regRule("rotate-on-size-overflow",function(t,e){var n=e.data,r=function(e){return t.model.size(e)<t.w(e)},i=n.reduce(function(t,e){return t+(r(e)?1:0)},0),o=i/n.length>.5,a={};if(o){var u=.5;a={angle:function(){return-90},w:function(e){return t.h(e)},h:function(e){return t.w(e)},dx:function(e){return t.h(e)*u-2},dy:function(){return 0}}}return a}).regRule("hide-by-label-height-vertical",function(t){return{hide:function(e){var n=void 0,r=void 0;return 0===t.angle(e)?(r=t.h(e),n=Math.abs(t.model.y0(e)-t.model.yi(e))):(r=t.w(e),n=t.model.size(e)),r>n||t.hide(e)}}}).regRule("cut-label-vertical",function(t){return{h:function(e){var n=t.h(e);if(Math.abs(t.angle(e))>0){var r=t.label(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=l(r,n,i);return o<r.length?i:n}return n},w:function(e){var n=t.w(e);if(0===t.angle(e)){var r=t.label(e),i=t.model.size(e),o=l(r,n,i);return o<r.length?i:n}return n},label:function(e){var n=void 0,r=void 0;0===t.angle(e)?(n=t.w(e),r=t.model.size(e)):(n=t.h(e),r=Math.abs(t.model.y0(e)-t.model.yi(e)));var i=t.label(e),o=l(i,n,r);return o<i.length?s(i,o):i},dy:function(e){var n=t.dy(e);if(0!==t.angle(e)){var r=t.h(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=t.label(e),a=l(o,r,i);return a<o.length?i*n/r:n}return n}}}).regRule("cut-outer-label-vertical",function(t){return{h:function(e,n){var r=t.h(e);if(Math.abs(t.angle(e))>0){var i=t.label(e),o=t.model.y0(e)<t.model.yi(e)?n.maxHeight-t.model.yi(e):t.model.yi(e),a=l(i,r,o);return a<i.length?o:r}return r},w:function(e){var n=t.w(e);if(0===t.angle(e)){var r=t.label(e),i=t.model.size(e),o=l(r,n,i);return o<r.length?i:n}return n},label:function(e,n){var r=void 0,i=void 0;0===t.angle(e)?(r=t.w(e),i=t.model.size(e)):(r=t.h(e),i=t.model.y0(e)<t.model.yi(e)?n.maxHeight-t.model.yi(e):t.model.yi(e));var o=t.label(e),a=l(o,r,i);return a<o.length?s(o,a):o},dy:function(e,n){var r=t.dy(e);if(0!==t.angle(e)){var i=t.h(e),o=t.model.y0(e)<t.model.yi(e)?n.maxHeight-t.model.yi(e):t.model.yi(e),a=t.label(e),u=l(a,i,o);return u<a.length?o*r/i:r}return r}}}).regRule("from-beginning",function(t){var e=function(e){return t.model.y0(e)};return t.model.flip?{x:e}:{y:e}}).regRule("to-end",function(t){var e=function(e){return t.model.yi(e)};return t.model.flip?{x:e}:{y:e}}).regRule("towards",function(t){var e=function(t,e){return t.model.yi(e)-t.model.y0(e)>=0?1:-1},n=t.model.flip?h:d,r=function(r){return e(t,r)*n(t,r)};return t.model.flip?{dx:r}:{dy:r}}).regRule("inside-start-then-outside-end-horizontal",function(t,e){var n=[u.getRule("from-beginning"),u.getRule("towards"),u.getRule("cut-label-horizontal")].reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),r=[u.getRule("to-end"),u.getRule("towards"),u.getRule("cut-outer-label-horizontal")].reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),o=function(t){return n.label(t).length>=r.label(t).length};return Object.assign({},n,["x","dx","hide","label"].reduce(function(t,e){return t[e]=function(t){return(o(t)?n:r)[e](t)},t},{}))}).regRule("inside-start-then-outside-end-vertical",function(t,e){var n=[u.getRule("from-beginning"),u.getRule("towards"),u.getRule("cut-label-vertical")].reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),r=[u.getRule("to-end"),u.getRule("towards"),u.getRule("cut-outer-label-vertical")].reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),o=function(t){return n.label(t).length>=r.label(t).length};return Object.assign({},n,["y","dy","hide","label"].reduce(function(t,e){return t[e]=function(t){return(o(t)?n:r)[e](t)},t},{}))}).regRule("outside-then-inside-horizontal",function(t,e){var n=["r+","l-","cut-outer-label-horizontal"].map(u.getRule).reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),r=["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"].map(u.getRule).reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),o=function(t){return r.label(t).length>n.label(t).length};return Object.assign({},n,["x","dx","hide","label"].reduce(function(t,e){return t[e]=function(t){return(o(t)?r:n)[e](t)},t},{}))}).regRule("outside-then-inside-vertical",function(t,e){var n=["t+","b-","cut-outer-label-vertical"].map(u.getRule).reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),r=["t-","b+","hide-by-label-height-vertical","cut-label-vertical"].map(u.getRule).reduce(function(t,n){return i.LayerLabelsModel.compose(t,n(t,e))},t),o=function(t){return r.label(t,e).length>n.label(t,e).length};return Object.assign({},n,["y","dy","hide","label"].reduce(function(t,i){return t[i]=function(t){return(o(t)?r:n)[i](t,e)},t},{}))}).regRule("hide-by-label-height-horizontal",function(t){return{hide:function(e){return t.model.size(e)<t.h(e)||t.hide(e)}}}).regRule("cut-label-horizontal",function(t){return{dx:function(e){var n=t.label(e),r=t.w(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=l(n,r,i),a=t.dx(e);return o<n.length?i*a/r:a},w:function(e){var n=t.label(e),r=t.w(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=l(n,r,i);return o<n.length?i:r},label:function(e){var n=t.label(e),r=t.w(e),i=Math.abs(t.model.y0(e)-t.model.yi(e)),o=l(n,r,i);return o<n.length?s(n,o):n}}}).regRule("cut-outer-label-horizontal",function(t,e){return{dx:function(n){var r=t.label(n),i=t.w(n),o=t.model.y0(n)<t.model.yi(n)?e.maxWidth-t.model.yi(n):t.model.yi(n),a=l(r,i,o),u=t.dx(n);return a<r.length?o*u/i:u},w:function(n){var r=t.label(n),i=t.w(n),o=t.model.y0(n)<t.model.yi(n)?e.maxWidth-t.model.yi(n):t.model.yi(n),a=l(r,i,o);return a<r.length?o:i},label:function(n){var r=t.label(n),i=t.w(n),o=t.model.y0(n)<t.model.yi(n)?e.maxWidth-t.model.yi(n):t.model.yi(n),a=l(r,i,o);return a<r.length?s(r,a):r}}}).regRule("keep-within-diameter-or-top",function(t){return{dy:function(e){return t.model.size(e)/t.w(e)<1?t.dy(e)-t.h(e)/2-t.model.size(e)/2:t.dy(e)}}}).regRule("keep-in-box",function(t,e){var n=e.maxWidth,r=e.maxHeight;return{dx:function(e){var r=t.dx(e),i=t.x(e)+r,o=t.w(e),a=i-o/2,u=i+o/2,l=0-a;if(l>0)return r+l;var s=u-n;return s>0?r-s:r},dy:function(e){var n=t.dy(e),i=t.y(e)+n,o=t.h(e),a=i-o/2,u=i+o/2,l=0-a;if(l>0)return 0;var s=u-r;return s>0?n-s:n}}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.AnnealingSimulator=function(){function t(e){r(this,t),this.minError=Number.MAX_VALUE,this.items=e.items,this.revision=this.items.map(function(t){return{i:t.i,x:t.x,y:t.y}}),this.penalties=e.penalties,this.transactor=e.transactor,this.cooling_schedule=e.cooling_schedule||function(t,e,n){return t-e/n}}return n(t,[{key:"energy",value:function(t){return this.penalties.reduce(function(e,n){return e+n(t)},0)}},{key:"move",value:function(t){var e=Math.floor(Math.random()*this.items.length),n=this.transactor(this.items[e]),r=this.energy(e);this.items[e]=n.modify();var i=this.energy(e),o=i-r,a=o<0?1:Math.exp(-o/t);Math.random()>=a?this.items[e]=n.revert():i<this.minError&&(this.minError=i,this.revision=this.items.map(function(t){return{i:t.i,x:t.x,y:t.y}}))}},{key:"start",value:function(t){var e=1,n=1,r=this.items.length;t:for(var i=0;i<t;i++){for(var o=0;o<r;o++)if(this.move(e),this.minError<=10)break t;e=this.cooling_schedule(e,n,t)}return this.revision}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerLabelsPenalties=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(10);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(t,e,n,r,o,a,u,l){return i.utilsDraw.isIntersect(t,o,e,a,n,u,r,l)},u={},l=e.LayerLabelsPenalties=function(){function t(){o(this,t)}return r(t,null,[{key:"reg",value:function(t,e){return u[t]=e,this}},{key:"get",value:function(t){return u[t]}}]),t}();l.reg("auto:avoid-label-label-overlap",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(e){var r=t[e].x,i=t[e].y-t[e].h+2,o=t[e].x+t[e].w,a=t[e].y+2;return t.reduce(function(t,u,l){var s=l!==e,c=u.x,f=u.y-u.h+2,h=u.x+u.w,d=u.y+2,p=Math.max(0,Math.min(h,o)-Math.max(c,r)),g=Math.max(0,Math.min(d,a)-Math.max(f,i)),v=p*g;return t+s*(v*n)},0)}}).reg("auto:avoid-label-anchor-overlap",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(e){var r=t[e],i=r.x-r.w/2,o=r.x+r.w/2,a=r.y-r.h/2+2,u=r.y+r.h/2+2;return t.reduce(function(t,e){var r=e.x0-e.size/2,l=e.x0+e.size/2,s=e.y0-e.size/2,c=e.y0+e.size/2,f=Math.max(0,Math.min(l,o)-Math.max(r,i)),h=Math.max(0,Math.min(c,u)-Math.max(s,a)),d=f*h;return t+d*n},0)}}).reg("auto:avoid-label-edges-overlap",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function(r){var i=t[r],o=i.x-i.w/2,u=i.x+i.w/2,l=i.y-i.h/2,s=i.y+i.h/2;return e.reduce(function(t,e){var r=a(o,u,e.x0,e.x1,l,s,e.y0,e.y1),i=a(o,u,e.x0,e.x1,s,l,e.y0,e.y1);return t+(r+i)*n},0)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var r=n(2),i=d(r),o=n(22),a=n(3),u=n(52),l=n(53),s=n(7),c=n(9),f=n(13),h=n(54);function d(t){return t&&t.__esModule?t:{default:t}}var p={draw:u.BasePath.draw,getClosestElement:u.BasePath.getClosestElement,highlight:u.BasePath.highlight,highlightDataPoints:u.BasePath.highlightDataPoints,addInteraction:u.BasePath.addInteraction,_getBoundsInfo:u.BasePath._getBoundsInfo,_sortElements:u.BasePath._sortElements,init:function(t){var e=u.BasePath.init(t),n=e.stack;return e.transformRules=[e.flip&&s.GrammarRegistry.get("flip"),!n&&s.GrammarRegistry.get("groupOrderByAvg"),n&&u.BasePath.grammarRuleFillGaps,n&&s.GrammarRegistry.get("stack")],e.adjustRules=[function(t,n){var r=t.scaleSize.isEmptyScale(),i=a.utils.defaults(e.guide.size||{},{defMinSize:2,defMaxSize:r?6:40}),o=Object.assign({},n,{defMin:i.defMinSize,defMax:i.defMaxSize,minLimit:i.minSize,maxLimit:i.maxSize});return s.GrammarRegistry.get("adjustStaticSizeScale")(t,o)}],e},buildModel:function(t){var e=u.BasePath.baseModel(t),n=this.node().config.guide,r=(0,l.getLineClassesByCount)(t.model.scaleColor.domain().length),a=o.CSS_PREFIX+"area area i-role-path "+r+" "+n.cssClass+" ";e.groupAttributes={class:function(t){return a+" "+e.class(t[0])+" frame"}};var s=function(n){return{id:t.id(n),x:e.x(n),y:e.y(n)}},d=function(n){return{id:t.id(n),x:e.x0(n),y:e.y0(n)}},p={fill:function(t){return e.color(t[0])},stroke:function(t){var n=e.color(t[0]);return n.length>0&&(n=i.default.rgb(n).darker(1)),n}};e.pathAttributesEnterInit=p,e.pathAttributesUpdateDone=p;var g="polyline"===(0,f.getInterpolatorSplineType)(n.interpolate);return e.pathElement=g?"polygon":"path",e.pathTween={attr:g?"points":"d",fn:(0,c.d3_createPathTween)(g?"points":"d",g?h.getAreaPolygon:h.getSmoothAreaPath,[s,d],t.id,n.interpolate)},e}};e.Area=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasePath=void 0;var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(n.push(a.value),e&&n.length===e)break}catch(t){i=!0,o=t}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(46),o=n(22),a=n(9),u=n(3),l=n(1),s=n(10),c=n(2),f=h(c);function h(t){return t&&t.__esModule?t:{default:t}}function d(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var g="taucharts_synthetic_record",v=function(t){return!0!==t[g]},y={grammarRuleFillGaps:function(t){var e=t.data(),n=u.utils.groupBy(e,t.group),r=Object.keys(n).sort(function(e,n){return t.order(e)-t.order(n)}).reduce(function(t,e){return t.concat([n[e]])},[]),i=t.scaleX.dim,o=t.scaleY.dim,a=t.scaleColor.dim,l=t.scaleSplit.dim,s=function(t){return t[o]>=0?1:-1},c=function(e,n,r){var u,s=[e,t.id(n),r].join(" ");return u={},p(u,i,e),p(u,o,1e-10*r),p(u,l,n[l]),p(u,a,n[a]),p(u,g,!0),p(u,g+"id",s),u},f=function(t,e,n){var r=u.utils.groupBy(e,function(t){return t[i]}),o=e[0];return t.reduce(function(t,e){return t.concat(r[e]||c(e,o,n))},[])},h=function(t,e){return t-e},d=u.utils.unique(r.reduce(function(t,e){return t.concat(e.map(function(t){return t[i]}))},[])).sort(h),v=r.map(function(e){return e.sort(function(e,n){return t.xi(e)-t.xi(n)})}).reduce(function(t,e){var n=u.utils.groupBy(e,s);return Object.keys(n).reduce(function(t,e){return t.concat(f(d,n[e],e))},t)},[]);return{data:function(){return v},id:function(e){return e[g]?e[g+"id"]:t.id(e)}}},init:function(t){var e=t;return e.guide=u.utils.defaults(e.guide||{},{animationSpeed:0,cssClass:"",maxHighlightDistance:32,widthCssClass:"",color:{},label:{}}),e.guide.label=u.utils.defaults(e.guide.label,{fontSize:11,hideEqualLabels:!0,position:["auto:avoid-label-label-overlap","auto:avoid-label-anchor-overlap","auto:avoid-label-edges-overlap","auto:adjust-on-label-overflow","auto:hide-on-label-label-overlap","auto:hide-on-label-edges-overlap"]}),e.guide.color=u.utils.defaults(e.guide.color||{},{fill:null}),["never","hover","always"].indexOf(e.guide.showAnchors)<0&&(e.guide.showAnchors="hover"),e.transformRules=[],e.adjustRules=[],e},baseModel:function(t){var e="i-role-datum",n=o.CSS_PREFIX+"dot-line dot-line i-role-dot "+e+" "+o.CSS_PREFIX+"dot ",r=1e4,i={gog:t.model,x:t.x,y:t.y,x0:t.x0,y0:t.y0,size:t.size,group:t.group,order:t.order,color:t.color,class:t.class,groupAttributes:{},pathAttributesUpdateInit:{},pathAttributesUpdateDone:{},pathAttributesEnterInit:{},pathAttributesEnterDone:{},pathElement:null,dotAttributes:{r:function(t){return Math.round(r*i.size(t)/2)/r},cx:function(t){return i.x(t)},cy:function(t){return i.y(t)},fill:function(t){return i.color(t)},class:function(t){return n+" "+i.class(t)}},dotAttributesDefault:{r:0,cy:function(t){return i.y0(t)}}};return i},addInteraction:function(){var t=this,e=this.node(),n=this.node().config,r=function(t,e){return function(n){return n===t||e}};e.on("highlight",function(e,n){return t.highlight(n)}),e.on("highlight-data-points",function(e,n){return t.highlightDataPoints(n)}),"never"!==n.guide.showAnchors&&e.on("data-hover",function(e,n){return t.highlightDataPoints(r(n.data,null))})},draw:function(){var t=this.node(),e=t.config,n=e.guide,o=e.options;o.container=o.slot(e.uid);var u=t.screenModel,l=this.buildModel(u),s=a.d3_animationInterceptor,c=function(){this.attr(l.groupAttributes);var r=this.selectAll("circle").data(function(t){return t.length<=1?t:[]},u.id);r.exit().call(s(n.animationSpeed,null,{r:0},function(t){return f.default.select(t).remove()})),r.call(s(n.animationSpeed,null,l.dotAttributes)),r.enter().append("circle").call(s(n.animationSpeed,l.dotAttributesDefault,l.dotAttributes)),t.subscribe(r);var i=function(t){e.guide.animationSpeed>0?(t.attr(l.pathTween.attr,function(t){return l.pathTween.fn.call(this,t)(0)}),(0,a.d3_transition)(t,e.guide.animationSpeed,"pathTransition").attrTween(l.pathTween.attr,l.pathTween.fn)):t.attr(l.pathTween.attr,function(t){return l.pathTween.fn.call(this,t)(1)})},o=this.selectAll(l.pathElement).data(function(t){return t.length>1?[t]:[]},y);if(o.exit().remove(),o.call(s(n.animationSpeed,l.pathAttributesUpdateInit,l.pathAttributesUpdateDone,l.afterPathUpdate)).call(i),o.enter().append(l.pathElement).call(s(n.animationSpeed,l.pathAttributesEnterInit,l.pathAttributesEnterDone,l.afterPathUpdate)).call(i),t.subscribe(o),"never"!==n.showAnchors){var c="i-data-anchor",h={r:"hover"===n.showAnchors?0:function(t){return u.size(t)/2},cx:function(t){return l.x(t)},cy:function(t){return l.y(t)},opacity:"hover"===n.showAnchors?0:1,fill:function(t){return u.color(t)},class:c},d=this.selectAll("."+c).data(function(t){return t.filter(v)},u.id);d.exit().remove(),d.call(s(n.animationSpeed,null,h)),d.enter().append("circle").call(s(n.animationSpeed,{r:0},h)),t.subscribe(d)}},h=u.toFibers(),p=h.map(function(t){return t.filter(v)}),g=o.container.selectAll(".frame"),y=function(){var t=g.empty()?[]:g.data(),e=new Map;g.each(function(t){e.set(t,Number(this.getAttribute("data-id")))});var n=t.reduce(function(t,e){return t.set(e,e.map(u.id)),t},new Map),i=new Map,o=Math.max.apply(Math,[0].concat(d(Array.from(e.values()))));return function(t){if(i.has(t))return i.get(t);var a,l=t.map(function(t){return u.id(t)}),s=(Array.from(n.entries()).find(function(t){var e=r(t,2),n=e[1];return l.some(function(t){return n.some(function(e){return e===t})})})||[null])[0];return s?a=e.get(s):(++o,a=o),i.set(t,a),a}}();this._getDataSetId=y;var m=g.data(h,y);m.exit().remove(),m.call(c),m.enter().append("g").attr("data-id",y).call(c),m.order(),this._boundsInfo=this._getBoundsInfo(o.container.selectAll(".i-data-anchor")[0]),t.subscribe(new i.LayerLabels(u.model,e.flip,e.guide.label,o).draw(p))},_getBoundsInfo:function(t){if(0===t.length)return null;var e=this.node().screenModel,n=this.node().config.flip,r=t.map(function(t){var n=f.default.select(t).data()[0],r=e.x(n),i=e.y(n);return{node:t,data:n,x:r,y:i}}).filter(function(t){return!isNaN(t.x)&&!isNaN(t.y)}),i=r.reduce(function(t,e){var n=e.x,r=e.y;return t.left=Math.min(n,t.left),t.right=Math.max(n,t.right),t.top=Math.min(r,t.top),t.bottom=Math.max(r,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),o=u.utils.unique(r.map(n?function(t){return t.y}:function(t){return t.x})).sort(function(t,e){return t-e}),a=o.reduce(function(t,e){return t[e]=[],t},{});r.forEach(function(t){var e=o.find(n?function(e){return t.y===e}:function(e){return t.x===e});a[e].push(t)});var l=function t(e){if(1===e.length)return a[e];var n=Math.ceil(e.length/2),r=(e[n-1]+e[n])/2;return{middle:r,lower:t(e.slice(0,n)),greater:t(e.slice(n))}},s=l(o);return{bounds:i,tree:s}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=this.node().config.options.container,a=this.node().config.flip,u=s.utilsDraw.getDeepTransformTranslate(o.node()),l=this.node().config.guide.maxHighlightDistance;if(t<r.left+u.x-l||t>r.right+u.x+l||e<r.top+u.y-l||e>r.bottom+u.y+l)return null;var c=a?e-u.y:t-u.x,f=function t(e){return Array.isArray(e)?e:t(c>e.middle?e.greater:e.lower)}(i).map(function(n){var r=n.x+u.x,i=n.y+u.y,o=Math.abs(a?e-i:t-r),l=Math.abs(a?t-r:e-i);return{node:n.node,data:n.data,distance:o,secondaryDistance:l,x:r,y:i}}).sort(function(t,e){return t.distance===e.distance?t.secondaryDistance-e.secondaryDistance:t.distance-e.distance}),h=f.findIndex(function(t){return t.distance!==f[0].distance||t.secondaryDistance!==f[0].secondaryDistance}),d=h<0?f:f.slice(0,h);if(1===d.length)return d[0];var p=d.reduce(function(t,e){return t+e.x},0)/d.length,g=d.reduce(function(t,e){return t+e.y},0)/d.length,v=Math.atan2(g-e,p-t)+Math.PI,y=d[Math.round((d.length-1)*v/2/Math.PI)];return y},highlight:function(t){var e,n,r=this.node().config.options.container,i="graphical-report__highlighted",o="graphical-report__dimmed",a=r.selectAll(".i-role-path"),u=a.data().filter(function(e){return e.filter(v).some(t)}),l=u.length>0;a.classed((e={},p(e,i,function(t){return l&&u.indexOf(t)>=0}),p(e,o,function(t){return l&&u.indexOf(t)<0}),e));var s=(n={},p(n,i,function(e){return!0===t(e)}),p(n,o,function(e){return!1===t(e)}),n);r.selectAll(".i-role-dot").classed(s),r.selectAll(".i-role-label").classed(s),this._sortElements(t)},highlightDataPoints:function(t){var e="i-data-anchor",n=this.node().screenModel,r="hover"===this.node().config.guide.showAnchors,i=4,a=1.25,u=this.node(),s=u.config.options.container,c=s.selectAll("."+e).attr({r:r?function(e){return t(e)?Math.max(i,n.size(e)/2):0}:function(e){var r=n.size(e)/2;return t(e)&&(r=Math.max(i,Math.ceil(r*a))),r},opacity:r?function(e){return t(e)?1:0}:1,fill:function(t){return n.color(t)},class:function(t){return l.utilsDom.classes(e,n.class(t))}}).classed(o.CSS_PREFIX+"highlighted",t),f=u.config.flip,h=c.filter(t),d=s.select(".cursor-line");if(h.empty())d.remove();else{d.empty()&&(d=s.append("line"));var p=u.screenModel.model,g=p.xi(h.data()[0]),v=p.xi(h.data()[0]),y=p.scaleY.domain(),m=p.scaleY(y[0]),b=p.scaleY(y[1]);d.attr("class","cursor-line").attr("x1",f?m:g).attr("y1",f?g:m).attr("x2",f?b:v).attr("y2",f?v:b)}this._sortElements(t)},_sortElements:function(t){var e=this.node().config.options.container,n=new Map,r=new Map,i=this._getDataSetId;e.selectAll(".i-role-path").each(function(e){n.set(this,i(e)),r.set(this,e.filter(v).some(t))});var o=u.utils.createMultiSorter(function(t,e){return r.get(t)-r.get(e)},function(t,e){return n.get(t)-n.get(e)}),a={line:0,g:1,text:2};l.utilsDom.sortChildren(e.node(),function(t,e){return"g"===t.tagName&&"g"===e.tagName?o(t,e):a[t.tagName]-a[e.tagName]})}};e.BasePath=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLineClassesByCount=e.getLineClassesByWidth=void 0;var r=n(22),i=[1,2,3,4,5],o=i.map(function(t){return r.CSS_PREFIX+"line-opacity-"+t}),a=i.map(function(t){return r.CSS_PREFIX+"line-width-"+t});function u(t){return o[t-1]||o[4]}function l(t){var e=0;return t>=160&&t<320?e=1:t>=320&&t<480?e=2:t>=480&&t<640?e=3:t>=640&&(e=4),a[e]}e.getLineClassesByWidth=l,e.getLineClassesByCount=u},function(t,e){"use strict";function n(t,e){if(t.length<2)return"";var n=String.prototype.concat.apply("",t.concat(e.slice().reverse()).map(function(t,e){return(0===e?"":" ")+t.x+","+t.y}));return n}function r(t,e){if(t.length<2)return"";var n=function(t){var e=t.map(function(t,e){var n=(e-1)%3===0?"C":"";return""+n+t.x+","+t.y+" "});return String.prototype.concat.apply("",e)},r=n(t),i=n(e.slice().reverse()),o="M"+r+"L"+i+"Z";return o}Object.defineProperty(e,"__esModule",{value:!0}),e.getAreaPolygon=n,e.getSmoothAreaPath=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Path=void 0;var r=n(22),i=n(7),o=n(52),a=n(3),u=n(53),l=n(9),s={draw:o.BasePath.draw,getClosestElement:o.BasePath.getClosestElement,highlight:o.BasePath.highlight,highlightDataPoints:o.BasePath.highlightDataPoints,addInteraction:o.BasePath.addInteraction,_getBoundsInfo:o.BasePath._getBoundsInfo,_sortElements:o.BasePath._sortElements,init:function(t){var e=o.BasePath.init(t);return e.transformRules=[e.flip&&i.GrammarRegistry.get("flip")],e.adjustRules=[function(t,n){var r=t.scaleSize.isEmptyScale(),o=a.utils.defaults(e.guide.size||{},{defMinSize:2,defMaxSize:r?6:40}),u=Object.assign({},n,{defMin:o.defMinSize,defMax:o.defMaxSize,minLimit:o.minSize,maxLimit:o.maxSize});return i.GrammarRegistry.get("adjustStaticSizeScale")(t,u)}],e},buildModel:function(t){var e=o.BasePath.baseModel(t),n=this.node().config.guide,i=(0,u.getLineClassesByCount)(t.model.scaleColor.domain().length),a=r.CSS_PREFIX+"area area i-role-path "+i+" "+n.cssClass+" ";e.groupAttributes={class:function(t){return a+" "+e.class(t[0])+" frame"}};var s=function(n){return{id:t.id(n),x:e.x(n),y:e.y(n)}},c=function(t,e){return function(n){return n.map(function(n){return[t(n),e(n)].join(",")}).join(" ")}},f={fill:function(t){return e.color(t[0])},stroke:function(t){return e.color(t[0])}};return e.pathAttributesEnterInit=f,e.pathAttributesUpdateDone=f,e.pathElement="polygon",e.pathTween={attr:"points",fn:(0,l.d3_createPathTween)("points",c(function(t){return t.x},function(t){return t.y}),[s],t.id)},e}};e.Path=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var r=n(22),i=n(52),o=n(7),a=n(53),u=n(3),l=n(9),s=n(13),c=n(57),f=n(58),h={draw:i.BasePath.draw,getClosestElement:i.BasePath.getClosestElement,highlight:i.BasePath.highlight,highlightDataPoints:i.BasePath.highlightDataPoints,addInteraction:i.BasePath.addInteraction,_getBoundsInfo:i.BasePath._getBoundsInfo,_sortElements:i.BasePath._sortElements,init:function(t){var e=i.BasePath.init(t),n=e.stack;e.guide=u.utils.defaults(e.guide||{},{avoidScalesOverflow:!0,interpolate:"linear"}),e.transformRules=[e.flip&&o.GrammarRegistry.get("flip"),!n&&o.GrammarRegistry.get("groupOrderByAvg"),n&&i.BasePath.grammarRuleFillGaps,n&&o.GrammarRegistry.get("stack")];var r=e.guide.avoidScalesOverflow,a=function(t){return t.scaleSize.isEmptyScale()};return e.adjustRules=[function(t,n){var r=u.utils.defaults(e.guide.size||{},{defMinSize:2,defMaxSize:a(t)?6:40}),i=Object.assign({},n,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return o.GrammarRegistry.get("adjustStaticSizeScale")(t,i)},r&&function(t,e){if(a(t))return function(){return{}};var n=Object.assign({},e,{sizeDirection:"xy"});return o.GrammarRegistry.get("avoidScalesOverflow")(t,n)}].filter(function(t){return t}),e},buildModel:function(t){var e=this.node().config,n=e.guide,o=e.options,u=!t.model.scaleSize.dim,h=u?n.widthCssClass||(0,a.getLineClassesByWidth)(o.width):"",d=(0,a.getLineClassesByCount)(t.model.scaleColor.domain().length),p=u?"line":"area",g=""+r.CSS_PREFIX+p+" "+p+" i-role-path "+h+" "+d+" "+n.cssClass+" ",v=u?{stroke:function(t){return m.color(t[0])},class:"i-role-datum"}:{fill:function(t){return m.color(t[0])}},y="cubic"===(0,s.getInterpolatorSplineType)(n.interpolate)?u?f.getCurve:c.getBrushCurve:u?f.getPolyline:c.getBrushLine,m=i.BasePath.baseModel(t),b=u?function(e){return{id:t.id(e),x:m.x(e),y:m.y(e)}}:function(e){return{id:t.id(e),x:m.x(e),y:m.y(e),size:m.size(e)}};return m.groupAttributes={class:function(t){return g+" "+m.class(t[0])+" frame"}},m.pathElement="path",m.pathAttributesEnterInit=v,m.pathAttributesUpdateDone=v,m.pathTween={attr:"d",fn:(0,l.d3_createPathTween)("d",y,[b],t.id,n.interpolate)},m}};e.Line=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBrushLine=o,e.getBrushCurve=a;var r=n(12);function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){if(0===t.length)return"";if(1===t.length)return u(t[0]);for(var e=[],n=1;n<t.length;n++)e.push(l(t[n-1],t[n]));return e.join(" ")}function a(t){if(0===t.length)return"";if(1===t.length)return u(t[0]);for(var e=[],n=3;n<t.length;n+=3)e.push(s(t[n-3],t[n-2],t[n-1],t[n]));return e.join(" ")}function u(t){var e=t.size/2;return["M"+t.x+","+(t.y-e),"A"+e+","+e+" 0 0 1",t.x+","+(t.y+e),"A"+e+","+e+" 0 0 1",t.x+","+(t.y-e),"Z"].join(" ")}function l(t,e){var n=v(t,e);return n?["M"+n.left[0].x+","+n.left[0].y,"L"+n.left[1].x+","+n.left[1].y,"A"+e.size/2+","+e.size/2+" 0 "+Number(t.size<e.size)+" 1",n.right[1].x+","+n.right[1].y,"L"+n.right[0].x+","+n.right[0].y,"A"+t.size/2+","+t.size/2+" 0 "+Number(t.size>e.size)+" 1",n.left[0].x+","+n.left[0].y,"Z"].join(" "):u(t.size>e.size?t:e)}function s(t,e,n,r){var i=y(t,e,n,r);if(!i)return l(t,r);var o=f(c(t,i.right[0]),c(t,i.left[0])),a=f(c(r,i.right[1]),c(r,i.left[1]));return["M"+i.left[0].x+","+i.left[0].y,"C"+i.left[1].x+","+i.left[1].y,i.left[2].x+","+i.left[2].y,i.left[3].x+","+i.left[3].y,"A"+r.size/2+","+r.size/2+" 0 "+Number(o>Math.PI)+" 1",i.right[3].x+","+i.right[3].y,"C"+i.right[2].x+","+i.right[2].y,i.right[1].x+","+i.right[1].y,i.right[0].x+","+i.right[0].y,"A"+t.size/2+","+t.size/2+" 0 "+Number(a>Math.PI)+" 1",i.left[0].x+","+i.left[0].y,"Z"].join(" ")}function c(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function f(t,e){return e<t&&(e+=2*Math.PI),e-t}function h(){for(var t=0,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=1;i<n.length;i++)t+=Math.sqrt((n[i].x-n[i-1].x)*(n[i].x-n[i-1].x)+(n[i].y-n[i-1].y)*(n[i].y-n[i-1].y));return t}function d(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}function p(t,e,n,i,o){var a=(0,r.splitCubicSegment)(t,e,n,i,o),u=1/(1+h(a[3],a[4],a[5],a[6],a[3])/h(a[0],a[1],a[2],a[3],a[0]));return a[3].size=e.size*(1-u)+o.size*u,a}function g(t,e,n){var i=(0,r.getBezierPoint)(h(t,e)/h(t,e,n),t,n),o=(0,r.getBezierPoint)(2,i,e);return[t,o,n]}function v(t,e){var n=h(t,e);if(0===n||n+t.size/2<=e.size/2||n+e.size/2<=t.size/2)return null;var r=c(t,e),i=Math.asin((t.size-e.size)/n/2),o=r-Math.PI/2+i,a=r+Math.PI/2-i;return{left:[d(t,t.size/2,o),d(e,e.size/2,o)],right:[d(t,t.size/2,a),d(e,e.size/2,a)]}}function y(t,e,n,o){var a=h(t,o);if(0===a||a+t.size/2<=o.size/2||a+o.size/2<=t.size/2)return null;var u=1/12,l=function(a){var l=a?[o,n,e,t]:[t,e,n,o],s=p.apply(void 0,[2*u].concat(l)),c=p.apply(void 0,[.5].concat(i(s.slice(0,4)))),f=c[3],h=c[6],d=v(l[0],f),y=v(f,h),m=[d.left[0],(0,r.getBezierPoint)(.5,d.left[1],y.left[0]),y.left[1]],b=[d.right[0],(0,r.getBezierPoint)(.5,d.right[1],y.right[0]),y.right[1]],x=g.apply(void 0,m)[1],_=g.apply(void 0,b)[1],w=(0,r.getBezierPoint)(1/3/u,d.left[0],x),M=(0,r.getBezierPoint)(1/3/u,d.right[0],_);return{left:a?[M,b[0]]:[m[0],w],right:a?[w,m[0]]:[b[0],M]}},s=l(!1),c=l(!0);return{left:[].concat(i(s.left),i(c.left)),right:[].concat(i(s.right),i(c.right))}}},function(t,e){"use strict";function n(t){if(t.length<2)return"";for(var e="",n=0;n<t.length;n++)e+=(0===n?"M":" L")+t[n].x+","+t[n].y;return e}function r(t){if(t.length<4)return"";for(var e="M"+t[0].x+","+t[0].y,n=3;n<t.length;n+=3)e+=" C"+t[n-2].x+","+t[n-2].y+" "+t[n-1].x+","+t[n-1].y+" "+t[n].x+","+t[n].y;return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getPolyline=n,e.getCurve=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Interval=void 0;var r=n(22),i=n(7),o=n(46),a=n(9),u=n(3),l=n(1),s=n(10),c=n(2),f=h(c);function h(t){return t&&t.__esModule?t:{default:t}}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){return f.default.select(t).data()[0]},g={init:function(t){var e=Object.assign({},t);e.guide=e.guide||{},e.guide=u.utils.defaults(e.guide,{animationSpeed:0,avoidScalesOverflow:!0,maxHighlightDistance:32,prettify:!0,sortByBarHeight:!0,enableColorToBarPosition:null!=e.guide.enableColorToBarPosition?e.guide.enableColorToBarPosition:!e.stack}),e.guide.size=u.utils.defaults(e.guide.size||{},{enableDistributeEvenly:!0}),e.guide.label=u.utils.defaults(e.guide.label||{},{position:e.flip?e.stack?["r-","l+","hide-by-label-height-horizontal","cut-label-horizontal"]:["outside-then-inside-horizontal","auto:hide-on-label-label-overlap"]:e.stack?["rotate-on-size-overflow","t-","b+","hide-by-label-height-vertical","cut-label-vertical","auto:hide-on-label-label-overlap"]:["rotate-on-size-overflow","outside-then-inside-vertical","auto:hide-on-label-label-overlap"]});var n=e.guide.avoidScalesOverflow,r=e.guide.enableColorToBarPosition,o=e.guide.size.enableDistributeEvenly;return e.transformRules=[e.flip&&i.GrammarRegistry.get("flip"),e.stack&&i.GrammarRegistry.get("stack"),r&&i.GrammarRegistry.get("positioningByColor")].filter(function(t){return t}),e.adjustRules=[o&&function(t,n){var r=u.utils.defaults(e.guide.size||{},{defMinSize:e.guide.prettify?3:0,defMaxSize:e.guide.prettify?40:Number.MAX_VALUE}),o=Object.assign({},n,{defMin:r.defMinSize,defMax:r.defMaxSize,minLimit:r.minSize,maxLimit:r.maxSize});return i.GrammarRegistry.get("size_distribute_evenly")(t,o)},n&&o&&function(t,e){var n=Object.assign({},e,{sizeDirection:"x"});return i.GrammarRegistry.get("avoidScalesOverflow")(t,n)},e.stack&&i.GrammarRegistry.get("adjustYScale")].filter(function(t){return t}),e},addInteraction:function(){var t=this,e=this.node(),n=function(t,e){return function(n){return n===t||e}};e.on("highlight",function(e,n){return t.highlight(n)}),e.on("data-hover",function(e,r){return t.highlight(n(r.data,null))})},draw:function(){var t,e,n=this.node(),i=n.config,l=i.options;l.container=l.slot(i.uid);var s=i.guide.prettify,c="i-role-element i-role-datum bar "+r.CSS_PREFIX+"bar",h=n.screenModel,g=this.buildModel(h,{prettify:s,minBarH:1,minBarW:1,baseCssClass:c}),v=a.d3_animationInterceptor,y=i.flip?"y":"x",m=i.flip?"x":"y",b=i.flip?"width":"height",x=i.flip?"height":"width",_=h.toFibers(),w=_.reduce(function(t,e){return t.concat(e)},[]),M=g.class,S=u.utils.omit(g,"class"),k=l.container.selectAll(".bar").data(w,h.id);k.exit().classed("tau-removing",!0).call(v(i.guide.animationSpeed,null,(t={},d(t,y,function(){var t=f.default.select(this),e=t.attr(y)-0,n=t.attr(x)-0;return e+n/2}),d(t,m,function(){return this.getAttribute("data-zero")}),d(t,x,0),d(t,b,0),t),function(t){var e=f.default.select(t);e.classed("tau-removing")&&e.remove()})),k.call(v(i.guide.animationSpeed,null,S)).attr("class",M).attr("data-zero",h[m+"0"]),k.enter().append("rect").call(v(i.guide.animationSpeed,(e={},d(e,m,h[m+"0"]),d(e,b,0),e),S)).attr("class",M).attr("data-zero",h[m+"0"]),n.subscribe(new o.LayerLabels(h.model,h.model.flip,i.guide.label,l).draw(_));var O=function(t,e){var n=p(t),r=p(e),i=g.width(n),o=g.width(r);if(i===o){var a=g.y(n),u=g.y(r);return a===u?A(t,e):a-u}return o-i},E=function(t,e){var n=p(t),r=p(e),i=g.height(n),o=g.height(r);if(i===o){var a=g.x(n),u=g.x(r);return a===u?A(t,e):a-u}return o-i},A=function(){var t=w.reduce(function(t,e,n){return t.set(e,n+1),t},new Map);return function(e,n){var r=t.get(p(e))||-1,i=t.get(p(n))||-1;return r-i}}();this._barsSorter=i.guide.sortByBarHeight?i.flip?O:E:A;var C={rect:0,text:1};this._typeSorter=function(t,e){return C[t.tagName]-C[e.tagName]},this._sortElements(this._typeSorter,this._barsSorter),n.subscribe(k),this._boundsInfo=this._getBoundsInfo(k[0])},buildModel:function(t,e){var n,r=e.prettify,i=e.minBarH,o=e.minBarW,a=e.baseCssClass,u=function(e){var n=t.size(e);return r&&(n=Math.max(o,n)),n},l=function(e){return e[t.model.scaleY.dim]};if(t.flip){var s=function(e){return Math.abs(t.x(e)-t.x0(e))};n={y:function(e){return t.y(e)-.5*u(e)},x:function(e){var n=Math.min(t.x0(e),t.x(e));if(r){var o=s(e),a=l(e),u=0;0===a&&(u=0),a>0&&(u=o),a<0&&(u=0-i);var c=o<i;return c?n+u:n}return n},height:function(t){return u(t)},width:function(t){var e=s(t);return r?0===l(t)?e:Math.max(i,e):e}}}else{var c=function(e){return Math.abs(t.y(e)-t.y0(e))};n={x:function(e){return t.x(e)-.5*u(e)},y:function(e){var n=Math.min(t.y0(e),t.y(e));if(r){var o=c(e),a=o<i;n=a&&l(e)>0?n-i:n}return n},width:function(t){return u(t)},height:function(t){var e=c(t);return r&&(e=0===l(t)?e:Math.max(i,e)),e}}}return Object.assign(n,{class:function(e){return a+" "+t.class(e)},fill:function(e){return t.color(e)}})},_sortElements:function(){var t=this.node().config.options.container.node();l.utilsDom.sortChildren(t,u.utils.createMultiSorter.apply(u.utils,arguments))},_getBoundsInfo:function(t){if(0===t.length)return null;var e=this.node().screenModel,n=this.node().config.flip,r=t.map(function(t){var n=f.default.select(t).data()[0],r=e.x(n),i=e.x0(n),o=e.y(n),a=e.y0(n),u=Math.abs(r-i),l=Math.abs(o-a),s=(r+i)/2,c=(o+a)/2,h=o>a,d={top:c-l/2,right:s+u/2,bottom:c+l/2,left:s-u/2};return{node:t,data:n,cx:s,cy:c,box:d,invert:h}}),i=r.reduce(function(t,e){var n=e.box;return t.left=Math.min(n.left,t.left),t.right=Math.max(n.right,t.right),t.top=Math.min(n.top,t.top),t.bottom=Math.max(n.bottom,t.bottom),t},{left:Number.MAX_VALUE,right:Number.MIN_VALUE,top:Number.MAX_VALUE,bottom:Number.MIN_VALUE}),o=u.utils.unique(r.map(n?function(t){return t.cy}:function(t){return t.cx})).sort(function(t,e){return t-e}),a=o.reduce(function(t,e){return t[e]=[],t},{});r.forEach(function(t){var e=o.find(n?function(e){return t.cy===e}:function(e){return t.cx===e});a[e].push(t)});var l=function t(e){if(1===e.length)return a[e];var n=Math.ceil(e.length/2),r=(e[n-1]+e[n])/2;return{middle:r,lower:t(e.slice(0,n)),greater:t(e.slice(n))}},s=l(o);return{bounds:i,tree:s}},getClosestElement:function(t,e){if(!this._boundsInfo)return null;var n=this._boundsInfo,r=n.bounds,i=n.tree,o=this.node().config.options.container,a=this.node().config.flip,u=s.utilsDraw.getDeepTransformTranslate(o.node()),l=t-u.x,c=e-u.y,f=this.node().config.guide.maxHighlightDistance;if(l<r.left-f||l>r.right+f||c<r.top-f||c>r.bottom+f)return null;var h=a?c:l,d=a?l:c,p=function(t,e,n){return t>=e&&t<=n},g=function t(e){return Array.isArray(e)?e:t(h>e.middle?e.greater:e.lower)}(i).map(function(t){var e=a?t.box.left:t.box.top,n=a?t.box.right:t.box.bottom,r=p(d,e,n);if(!r&&Math.abs(d-e)>f&&Math.abs(d-n)>f)return null;var i=Math.abs(d-(t.invert!==a?n:e));return Object.assign(t,{distToValue:i,cursorInside:r})}).filter(function(t){return t}).sort(function(t,e){return t.cursorInside!==e.cursorInside?e.cursorInside-t.cursorInside:Math.abs(t.distToValue)-Math.abs(e.distToValue)}).map(function(t){var e=t.cx,n=t.cy,r=Math.abs(a?c-n:l-e),i=Math.abs(a?l-e:c-n);return{node:t.node,data:t.data,distance:r,secondaryDistance:i,x:e,y:n}});return g[0]||null},highlight:function(t){var e,n="graphical-report__highlighted",r="graphical-report__dimmed",i=this.node().config.options.container,o=(e={},d(e,n,function(e){return!0===t(e)}),d(e,r,function(e){return!1===t(e)}),e);i.selectAll(".bar").classed(o),i.selectAll(".i-role-label").classed(o),this._sortElements(function(e,n){return t(p(e))-t(p(n))},this._typeSorter,this._barsSorter)}};e.Interval=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParallelLine=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(22),o=n(5),a=n(3),u=n(2),l=s(u);function s(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.ParallelLine=function(t){function e(t){c(this,e);var n=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.config=t,n.config.guide=a.utils.defaults(n.config.guide||{},{}),n.on("highlight",function(t,e){return n.highlight(e)}),n}return h(e,t),r(e,[{key:"defineGrammarModel",value:function(t){var e=this.config,n=e.options;this.color=t("color",e.color,{}),this.scalesMap=e.columns.reduce(function(e,r){return e[r]=t("pos",r,[n.height,0]),e},{});var r=n.width/(e.columns.length-1),i=e.columns.reduce(function(t,e,n){return t[e]=n*r,t},{});return this.xBase=function(t){return i[t]},this.regScale("columns",this.scalesMap).regScale("color",this.color),{}}},{key:"drawFrames",value:function(t){var e=this.config,n=this.config.options,r=this.scalesMap,o=this.xBase,a=this.color,u=l.default.svg.line(),s=function(){this.attr({d:function(t){return u(e.columns.map(function(e){return[o(e),r[e](t[r[e].dim])]}))}})},c=function(){this.attr({stroke:function(t){return a.toColor(a(t[a.dim]))},class:function(t){return i.CSS_PREFIX+"__line line "+a.toClass(a(t[a.dim]))+" foreground"}})},f=function(){var t=this.selectAll(".background").data(function(t){return t.part()});t.exit().remove(),t.call(s),t.enter().append("path").attr("class","background line").call(s);var e=this.selectAll(".foreground").data(function(t){return t.part()});e.exit().remove(),e.call(function(){s.call(this),c.call(this)}),e.enter().append("path").call(function(){s.call(this),c.call(this)})},h=n.container.selectAll(".lines-frame").data(t,function(t){return t.hash()});h.exit().remove(),h.call(f),h.enter().append("g").attr("class","lines-frame").call(f),this.subscribe(n.container.selectAll(".lines-frame .foreground"))}},{key:"highlight",value:function(t){this.config.options.container.selectAll(".lines-frame .foreground").style("visibility",function(e){return t(e)?"":"hidden"})}}]),e}(o.Element)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.IdentityScale=function(t){function e(t,n){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r._references=n.references,r._refCounter=n.refCounter,r.addField("scaleType","identity"),r}return u(e,t),r(e,[{key:"create",value:function(){var t=this._references,e=this._refCounter;return this.toBaseScale(function(n,r){if(null==n){var i=t.get(r);null==i&&(i=e(),t.set(r,i))}else i=n;return i})}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(t){return"date"===t?function(t){return new Date(t).getTime()}:function(t){return t}},u=function(t,e){return i.utils.generateHash([t,e].map(JSON.stringify).join(""))};e.BaseScale=function(){function t(e,n){var r,a=this;if(o(this,t),this._fields={},Array.isArray(n.fitToFrameByDims)&&n.fitToFrameByDims.length){var u=function(t){var e={};return"where"===t.type&&t.args?(e.type=t.type,e.args=n.fitToFrameByDims.reduce(function(e,n){return t.args.hasOwnProperty(n)&&(e[n]=t.args[n]),e},{})):e=t,e};r=e.part(u)}else r=e.full();var l=this.getVarSet(r,n);n.order&&(l=i.utils.union(i.utils.intersection(n.order,l),l)),this.vars=l;var s=l.map(function(t){return t});this.scaleConfig=n,this.scaleConfig.nice=this.scaleConfig.hasOwnProperty("nice")?this.scaleConfig.nice:this.scaleConfig.autoScale,this.addField("dim",this.scaleConfig.dim).addField("scaleDim",this.scaleConfig.dim).addField("scaleType",this.scaleConfig.type).addField("source",this.scaleConfig.source).addField("domain",function(){return a.vars}).addField("isInteger",s.every(Number.isInteger)).addField("originalSeries",function(){return s}).addField("isContains",function(t){return a.isInDomain(t)}).addField("isEmptyScale",function(t){return a.isEmpty(t)}).addField("fixup",function(t){var e=a.scaleConfig;e.__fixup__=e.__fixup__||{},e.__fixup__=Object.assign(e.__fixup__,t(Object.assign({},e,e.__fixup__)))}).addField("commit",function(){a.scaleConfig=Object.assign(a.scaleConfig,a.scaleConfig.__fixup__),delete a.scaleConfig.__fixup__})}return r(t,[{key:"isInDomain",value:function(t){return this.domain().indexOf(t)>=0}},{key:"addField",value:function(t,e){return this._fields[t]=e,this[t]=e,this}},{key:"getField",value:function(t){return this._fields[t]}},{key:"isEmpty",value:function(){return!Boolean(this._fields.dim)}},{key:"toBaseScale",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=Object.keys(this._fields).reduce(function(t,n){return t[n]=e._fields[n],t},t);return r.getHash=function(){return u(e.vars,n)},r.value=r,r}},{key:"getVarSet",value:function(t,e){var n=e.hasOwnProperty("series")?e.series:t.map(function(t){return t[e.dim]});return i.utils.unique(n,a(e.dimType))}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62),o=n(3),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.ColorScale=function(t){function e(t,n){c(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i="measure"!==n.dimType,a=r.scaleConfig.brewer||(i?o.utils.range(20).map(function(t){return"color20-"+(1+t)}):["#eee","#000"]),l=r.scaleConfig;if(!i){var h=u.default.extent(r.vars),d=function(t){return Number.isFinite(t)||o.utils.isDate(t)},p=d(l.min)?l.min:h[0],g=d(l.max)?l.max:h[1],v=[p,h[0]].filter(d),y=[g,h[1]].filter(d);if(h=[v.sort(function(t,e){return t-e})[0],y.sort(function(t,e){return e-t})[0]],l.nice&&h[0]<0&&h[1]>0){var m=Math.max.apply(Math,s(h.map(Math.abs)));h=[-m,m]}r.vars=h}return r.addField("scaleType","color").addField("discrete",i).addField("brewer",a).addField("toColor",o.utils.extRGBColor).addField("toClass",o.utils.extCSSClass),r}return h(e,t),r(e,[{key:"create",value:function(){var t=this.discrete,e=this.vars,n=this.getField("brewer"),r=t?this.createDiscreteScale(e,n):this.createContinuesScale(e,n);return this.toBaseScale(r)}},{key:"createDiscreteScale",value:function(t,e){var n,r=function(){return"color-default"},i=function(t,e){var n=t.map(function(t){return String(t).toString()});return u.default.scale.ordinal().range(e).domain(n)},a=function(t,e){var n=Object.keys(t),r=n.map(function(e){return t[e]}),i=u.default.scale.ordinal().range(r).domain(n);return function(n){return t.hasOwnProperty(n)?i(n):e(n)}},l=function(t){return function(e){return t(String(e).toString())}};if(Array.isArray(e))n=l(i(t,e));else if("function"===typeof e)n=function(n){return e(n,l(i(t,o.utils.range(20).map(function(t){return"color20-"+(1+t)}))))};else{if(!o.utils.isObject(e))throw new Error("This brewer is not supported");n=a(e,r)}return n}},{key:"createContinuesScale",value:function(t,e){var n;if(!Array.isArray(e))throw new Error("This brewer is not supported");return n=u.default.scale.linear().domain(o.utils.splitEvenly(t.map(function(t){return t-0}),e.length)).range(e),n}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62),o=n(3),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var d={sqrt:function(t){return Math.sqrt(t)},linear:function(t){return t}};e.SizeScale=function(t){function e(t,n){c(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r.scaleConfig,o=u.default.extent(r.vars),a=Number.isFinite(i.min)?i.min:o[0],l=Number.isFinite(i.max)?i.max:o[1];return r.vars=[Math.min.apply(Math,s([a,o[0]].filter(Number.isFinite))),Math.max.apply(Math,s([l,o[1]].filter(Number.isFinite)))],r.addField("scaleType","size"),r.addField("funcType",n.func||"sqrt"),r}return h(e,t),r(e,[{key:"isInDomain",value:function(t){var e=this.domain().sort(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n}},{key:"create",value:function(){var t,e=this.scaleConfig,n=this.vars,r=o.utils.defaults({},e,{func:"sqrt",minSize:0,maxSize:1}),i=r.func,a=r.minSize,u=r.maxSize,l=d[i],c=n.filter(function(t){return Number.isFinite(Number(t))});if(0===c.length)t=function(){return u};else{var f=1,h=0,p=Math.min.apply(Math,s(c)),g=Math.max.apply(Math,s(c)),v=l(Math.max(Math.abs(p),Math.abs(g),g-p));h=p<0?p:0,f=0===v?1:(u-a)/v,t=function(t){var e=null!==t?parseFloat(t):0;if(!Number.isFinite(e))return u;var n=e-h;return a+l(n)*f}}return this.toBaseScale(t)}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OrdinalScale=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(62),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.OrdinalScale=function(t){function e(t,n){c(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.addField("scaleType","ordinal").addField("discrete",!0),r}return h(e,t),i(e,[{key:"create",value:function(t){var e=this.scaleConfig,n=this.vars,i=u.default.scale.ordinal().domain(n),o=i.rangePoints(t,1),a=Math.max.apply(Math,s(t)),l=function(t){var i=r(e.ratio);return"function"===i?e.ratio(t,a,n):"object"===i?e.ratio[t]:1/n.length},c=function(t){var r;return r=e.ratio?a-n.slice(n.indexOf(t)+1).reduce(function(t,e){return t+a*l(e)},a*l(t)*.5):o(t),r};return Object.keys(o).forEach(function(t){return c[t]=o[t]}),c.stepSize=function(t){return l(t)*a},this.toBaseScale(c,t)}}]),e}(o.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PeriodScale=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(62),a=n(18),u=n(3),l=n(2),s=c(l);function c(t){return t&&t.__esModule?t:{default:t}}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function p(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.PeriodScale=function(t){function e(t,n){h(this,e);var r=d(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r.scaleConfig,o=r.vars,l=s.default.extent(o),c=null===i.min||void 0===i.min?l[0]:new Date(i.min).getTime(),f=null===i.max||void 0===i.max?l[1]:new Date(i.max).getTime(),p=[new Date(Math.min(c,l[0])),new Date(Math.max(f,l[1]))],g=a.UnitDomainPeriodGenerator.get(i.period,{utc:i.utcTime});return i.fitToFrameByDims||null===g?r.vars=u.utils.unique(o.map(function(t){return new Date(t)}),function(t){return t.getTime()}).sort(function(t,e){return e-t}):r.vars=a.UnitDomainPeriodGenerator.generate(p[0],p[1],i.period,{utc:i.utcTime}),r.addField("scaleType","period").addField("period",r.scaleConfig.period).addField("discrete",!0),r}return p(e,t),i(e,[{key:"isInDomain",value:function(t){var e=a.UnitDomainPeriodGenerator.get(this.scaleConfig.period,{utc:this.scaleConfig.utcTime}),n=e.cast(new Date(t)).getTime();return this.domain().map(function(t){return t.getTime()}).indexOf(n)>=0}},{key:"create",value:function(t){var e=this.vars,n=this.vars.map(function(t){return t.getTime()}),i=this.scaleConfig,o=s.default.scale.ordinal().domain(e),a=o.rangePoints(t,1),u=s.default.scale.ordinal().domain(n.map(String)),l=u.rangePoints(t,1),c=Math.max.apply(Math,f(t)),h=function(t){var o=new Date(t).getTime(),a=r(i.ratio);return"function"===a?i.ratio(o,c,n):"object"===a?i.ratio[o]:1/e.length},d=function(t){var e,r=new Date(t),o=r.getTime();return e=i.ratio?c-n.slice(n.indexOf(o)+1).reduce(function(t,e){return t+c*h(e)},c*h(t)*.5):l(String(o)),e};return Object.keys(a).forEach(function(t){return d[t]=a[t]}),d.stepSize=function(t){return h(t)*c},this.toBaseScale(d,t)}}]),e}(o.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimeScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62),o=n(2),a=l(o),u=n(3);function l(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.TimeScale=function(t){function e(t,n){s(this,e);var r=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r.scaleConfig,o=r.vars,l=a.default.extent(o).map(function(t){return new Date(t)}),f=null===i.min||void 0===i.min?l[0]:new Date(i.min).getTime(),h=null===i.max||void 0===i.max?l[1]:new Date(i.max).getTime();if(o=[new Date(Math.min(f,l[0])),new Date(Math.max(h,l[1]))],r.niceIntervalFn=null,i.nice){var d=i.niceInterval,p=d&&a.default.time[d]?i.utcTime?a.default.time[d].utc:a.default.time[d]:null;r.niceIntervalFn=p||null,r.vars=u.utils.niceTimeDomain(o,r.niceIntervalFn,{utc:i.utcTime})}else r.vars=o;return r.addField("scaleType","time"),r}return f(e,t),r(e,[{key:"isInDomain",value:function(t){var e=new Date(t),n=this.domain(),r=n[0],i=n[n.length-1];return!Number.isNaN(r)&&!Number.isNaN(i)&&e<=i&&e>=r}},{key:"create",value:function(t){var e=this.vars,n=this.scaleConfig.utcTime,r=n?a.default.time.scale.utc:a.default.time.scale,i=r().domain(this.scaleConfig.nice?u.utils.niceTimeDomain(e,this.niceIntervalFn,{utc:n}):e),o=i.range(t),l=function(t){var n=e[0],r=e[1];return t>r&&(t=r),t<n&&(t=n),o(new Date(t))};return Object.keys(o).forEach(function(t){return l[t]=o[t]}),l.stepSize=function(){return 0},this.toBaseScale(l,t)}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinearScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62),o=n(3),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.LinearScale=function(t){function e(t,n){c(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r.scaleConfig,a=u.default.extent(r.vars),l=Number.isFinite(i.min)?i.min:a[0],h=Number.isFinite(i.max)?i.max:a[1];if(a=[Math.min.apply(Math,s([l,a[0]].filter(Number.isFinite))),Math.max.apply(Math,s([h,a[1]].filter(Number.isFinite)))],r.vars=i.nice?o.utils.niceZeroBased(a):u.default.extent(a),r.vars[0]===r.vars[1]){var d=Math.pow(10,Math.floor(Math.log(r.vars[0])/Math.LN10));r.vars[0]-=d,r.vars[1]+=d||10}return r.addField("scaleType","linear").addField("discrete",!1),r}return h(e,t),r(e,[{key:"isInDomain",value:function(t){var e=this.domain(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n}},{key:"create",value:function(t){var e=this.vars,n=this.extendScale(u.default.scale.linear());return n.domain(e).range(t).clamp(!0),this.toBaseScale(n,t)}},{key:"extendScale",value:function(t){var e=this,n=t.copy,r=t.ticks;return Object.assign(t,{stepSize:function(){return 0},copy:function(){return e.extendScale(n.call(t))},ticks:this.getField("isInteger")?function(e){return r.call(t,e).filter(Number.isInteger)}:t.ticks}),t}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogarithmicScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62),o=n(8),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function h(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.LogarithmicScale=function(t){function e(t,n){c(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r.scaleConfig,o=u.default.extent(r.vars),a=Number.isFinite(i.min)?i.min:o[0],l=Number.isFinite(i.max)?i.max:o[1];return o=[Math.min.apply(Math,s([a,o[0]].filter(Number.isFinite))),Math.max.apply(Math,s([l,o[1]].filter(Number.isFinite)))],p(o),i.nice&&(o=v(o)),r.vars=o,r.addField("scaleType","logarithmic").addField("discrete",!1),r}return h(e,t),r(e,[{key:"isInDomain",value:function(t){var e=this.domain(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n}},{key:"create",value:function(t){var e=this.vars;p(e);var n=g(u.default.scale.log()).domain(e).range(t);return n.stepSize=function(){return 0},this.toBaseScale(n,t)}}]),e}(i.BaseScale);function d(t){return Math.log(t)/Math.LN10}function p(t){if(t[0]*t[1]<=0)throw new o.TauChartError("Logarithmic scale domain cannot cross zero.",o.errorCodes.INVALID_LOG_DOMAIN)}function g(t){var e=t.copy;return t.ticks=function(e){for(var n=10,r=[],i=u.default.extent(t.domain()),o=Math.floor(d(i[0])),a=Math.ceil(d(i[1])),l=Math.ceil((a-o)*n/(Math.ceil(e/n)*n)),s=o;s<=a;s+=l)for(var c=1;c<=n;c++){var f=Math.pow(c,l)*Math.pow(10,s);f=parseFloat(f.toExponential(0)),f>=i[0]&&f<=i[1]&&r.push(f)}return r},t.copy=function(){var n=e.call(t);return g(n),n},t}function v(t){var e=t[0]>0,n=t.map(function(t){return Math.abs(t)}),r=Math.max.apply(Math,s(n)),i=Math.min.apply(Math,s(n)),o=i.toExponential().split("e"),a=r.toExponential().split("e"),u=parseFloat(Math.floor(o[0])+"e"+o[1]),l=parseFloat(Math.ceil(a[0])+"e"+a[1]);return e?[u,l]:[-l,-u]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function u(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.ValueScale=function(t){function e(t,n){o(this,e);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return r.addField("scaleType","value").addField("georole",n.georole),r}return u(e,t),r(e,[{key:"create",value:function(){return this.toBaseScale(function(t){return t})}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FillScale=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(62),o=n(3),a=n(2),u=l(a);function l(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.FillScale=function(t){function e(t,n){s(this,e);var r=c(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),i=r.scaleConfig,a=u.default.extent(r.vars),l=Number.isFinite(i.min)?i.min:a[0],f=Number.isFinite(i.max)?i.max:a[1];a=[Math.min(l,a[0]),Math.max(f,a[1])],r.vars=i.nice?o.utils.niceZeroBased(a):u.default.extent(a);var h=.8/9,d=o.utils.range(10).map(function(t){return"rgba(90,180,90,"+(.2+t*h).toFixed(2)+")"}),p=i.brewer||d;return r.addField("scaleType","fill").addField("brewer",p),r}return f(e,t),r(e,[{key:"isInDomain",value:function(t){var e=this.domain(),n=e[0],r=e[e.length-1];return!Number.isNaN(n)&&!Number.isNaN(r)&&t<=r&&t>=n}},{key:"create",value:function(){var t=this.vars,e=this.getField("brewer");if(!Array.isArray(e))throw new Error("This brewer is not supported");var n=e.length,r=(t[1]-t[0])/n,i=o.utils.range(n-1).map(function(t){return t+1}).reduce(function(e,n){return e.concat([t[0]+n*r])},[]),a=u.default.scale.threshold().domain(i).range(e);return this.toBaseScale(a)}}]),e}(i.BaseScale)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartMap=void 0;var r=n(3),i=function(t){var e=Object.assign({sourcemap:t.settings.defaultSourceMap},t.guide||{});e.size=r.utils.defaults(e.size||{},{min:1,max:10}),e.code=r.utils.defaults(e.code||{},{georole:"countries"});var n={},i=function(t,e){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e;return e?(r=t+"_"+e,i="/"):(r=t+":default",i="?"),n.hasOwnProperty(r)||(n[r]=Object.assign({type:t,source:i,dim:a},o)),r};return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){return e[n]={type:t.dimensions[n].type},e},{}),data:t.data}},scales:n,unit:{type:"COORDS.MAP",expression:{operator:"none",source:"/"},code:i("value",t.code,e.code),fill:i("fill",t.fill,e.fill),size:i("size",t.size,e.size),color:i("color",t.color,e.color),latitude:i("linear",t.latitude,{nice:!1}),longitude:i("linear",t.longitude,{nice:!1}),guide:e},plugins:t.plugins||[]}};e.ChartMap=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartInterval=void 0;var r=n(74),i=function(t){var e=t.flip?t.y:t.x,n=e.indexOf(t.color)>=0,r=t.guide[t.guide.length-1];return n&&!r.hasOwnProperty("enableColorToBarPosition")&&(r.enableColorToBarPosition=!1),t},o=function(t){var e=(0,r.normalizeConfig)(t);return e=i(e),(0,r.transformConfig)("ELEMENT.INTERVAL",e)};e.ChartInterval=o},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.transformConfig=e.normalizeConfig=void 0;var i=n(3);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=function(t){return t||null},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Array.isArray(t)?0===t.length?[e]:t:[t]},l=function(t,e){return{type:t,x:e.x,y:e.y,identity:e.identity,size:e.size,color:e.color,split:e.split,label:e.label,guide:{color:e.colorGuide,size:e.sizeGuide},flip:e.flip,stack:e.stack}},s={SUCCESS:"SUCCESS",WARNING:"WARNING",FAIL:"FAIL"},c=(r={},o(r,s.SUCCESS,function(t){return t}),o(r,s.FAIL,function(t,e){throw new Error((e.messages||[]).join("\n")||"This configuration is not supported, See http://api.taucharts.com/basic/facet.html#easy-approach-for-creating-facet-chart")}),o(r,s.WARNING,function(t,e,n){var r=e.axis,i=e.indexMeasureAxis[0],o=t[i],a=t.filter(function(t){return t!==o});a.push(o);var u=n[i][r]||{},l=n[n.length-1][r]||{};return n[n.length-1][r]=u,n[i][r]=l,a}),r);function f(t,e,n){return e.reduce(function(e,r,i){var o=t[r];return o?e.status!=s.FAIL&&("measure"===o.type&&(e.countMeasureAxis++,e.indexMeasureAxis.push(i)),"measure"!==o.type&&1===e.countMeasureAxis?e.status=s.WARNING:e.countMeasureAxis>1&&(e.status=s.FAIL,e.messages.push('There is more than one measure dimension for "'+n+'" axis'))):(e.status=s.FAIL,r?e.messages.push('"'+r+'" dimension is undefined for "'+n+'" axis'):e.messages.push('"'+n+'" axis should be specified')),e},{status:s.SUCCESS,countMeasureAxis:0,indexMeasureAxis:[],messages:[],axis:n})}function h(t){for(var e=u(t.x),n=u(t.y),r=Math.max(e.length,n.length),i=u(t.guide||{},{}),o=r-i.length,a=0;a<o;a++)i.push({});i=i.slice(0,r);var l=f(t.dimensions,e,"x"),s=f(t.dimensions,n,"y");return e=c[l.status](e,l,i),n=c[s.status](n,s,i),Object.assign({},t,{x:e,y:n,guide:i})}function d(t,e){for(var n=e.x,r=e.y,o=e.guide,u=Math.max(n.length,r.length),s={type:"COORDS.RECT",unit:[]},c=[].concat(n),f=[].concat(r),h=[].concat(o),d=u;d>0;d--){var p=c.pop(),g=f.pop(),v=h.pop()||{};d===u?(s.x=p,s.y=g,s.unit.push(l(t,{x:a(p),y:a(g),identity:e.identity,split:e.split,color:e.color,label:e.label,size:e.size,flip:e.flip,stack:e.stack,colorGuide:v.color,sizeGuide:v.size})),s.guide=i.utils.defaults(v,{x:{label:p},y:{label:g}})):s={type:"COORDS.RECT",x:a(p),y:a(g),unit:[s],guide:i.utils.defaults(v,{x:{label:p},y:{label:g}})}}return e.spec={dimensions:e.dimensions,unit:s},e}e.normalizeConfig=h,e.transformConfig=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartScatterplot=void 0;var r=n(74),i=function(t){var e=(0,r.normalizeConfig)(t);return(0,r.transformConfig)("ELEMENT.POINT",e)};e.ChartScatterplot=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartLine=void 0;var r=n(28),i=n(74),o=function(t){var e=(0,i.normalizeConfig)(t),n=e.data,o=e.settings.log,a={none:function(){return null},horizontal:function(t){return t.x[t.x.length-1]},vertical:function(t){return t.y[t.y.length-1]},auto:function(t){var e,i=t.x,a=t.y,u=i[i.length-1],l=i.slice(0,i.length-1),s=a[a.length-1],c=a.slice(0,a.length-1),f=t.color,h=l.concat(c).concat([f]).filter(function(t){return null!==t}),d=-1,p=[[[u].concat(h),s],[[s].concat(h),u]],g=p.some(function(t,e){var i=t[0],a=t[1],u=r.DataProcessor.isYFunctionOfX(n,i,[a]);return u.result?d=e:o(["Attempt to find a functional relation between",t[0]+" and "+t[1]+" is failed.","There are several "+u.error.keyY+" values (e.g. "+u.error.errY.join(",")+")","for ("+u.error.keyX+" = "+u.error.valX+")."].join(" ")),u.result});return g?e=p[d][0][0]:(o(["All attempts are failed.","Will orient line horizontally by default.","NOTE: the [scatterplot] chart is more convenient for that data."].join(" ")),e=u),e}},u=(e.lineOrientation||"").toLowerCase(),l=a.hasOwnProperty(u)?a[u]:a.auto,s=l(e);return null!==s&&(e.data=r.DataProcessor.sortByDim(n,s,e.dimensions[s])),(0,i.transformConfig)("ELEMENT.LINE",e)};e.ChartLine=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartArea=void 0;var r=n(28),i=n(74),o=function(t){var e=(0,i.normalizeConfig)(t),n=e.data,o=e.settings.log,a={horizontal:function(t){return{prop:t.x[t.x.length-1],flip:!1}},vertical:function(t){return{prop:t.y[t.y.length-1],flip:!0}},auto:function(t){var e,i=t.x,a=t.y,u=i[i.length-1],l=i.slice(0,i.length-1),s=a[a.length-1],c=a.slice(0,a.length-1),f=t.color,h=l.concat(c).concat([f]).filter(function(t){return null!==t}),d=-1,p=[[[u].concat(h),s],[[s].concat(h),u]],g=p.some(function(t,e){var i=t[0],a=t[1],u=r.DataProcessor.isYFunctionOfX(n,i,[a]);return u.result?d=e:o(["Attempt to find a functional relation between",t[0]+" and "+t[1]+" is failed.","There are several "+u.error.keyY+" values (e.g. "+u.error.errY.join(",")+")","for ("+u.error.keyX+" = "+u.error.valX+")."].join(" ")),u.result}),v=null;return g?(e=p[d][0][0],v=0!==d):(o("All attempts are failed. Gonna transform AREA to general PATH."),e=null),{prop:e,flip:v}}},u="boolean"!==typeof e.flip?"auto":e.flip?"vertical":"horizontal",l=a[u],s=l(e),c="ELEMENT.AREA";return null!==s.prop&&(e.data=r.DataProcessor.sortByDim(n,s.prop,e.dimensions[s.prop]),e.flip=s.flip),(0,i.transformConfig)(c,e)};e.ChartArea=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){var e=Object.assign({columns:{}},t.guide||{}),n={},r=function(t,e){var r,i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e;return e?(r=t+"_"+e,i="/"):(r=t+":default",i="?"),n.hasOwnProperty(r)||(n[r]=Object.assign({type:t,source:i,dim:a},o)),r},i=t.columns.map(function(n){return r(t.dimensions[n].scale,n,e.columns[n])});return{sources:{"?":{dims:{},data:[{}]},"/":{dims:Object.keys(t.dimensions).reduce(function(e,n){return e[n]={type:t.dimensions[n].type},e},{}),data:t.data}},scales:n,unit:{type:"COORDS.PARALLEL",expression:{operator:"none",source:"/"},columns:i,guide:e,units:[{type:"PARALLEL/ELEMENT.LINE",color:r("color",t.color,e.color),columns:i,expression:{operator:"none",source:"/"}}]},plugins:t.plugins||[]}};e.ChartParallel=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PluginsSDK=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(32),o=n(80),a=n(81);function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l={},s=function(){function t(){u(this,t)}return r(t,null,[{key:"unit",value:function(t){return new o.Unit(t)}},{key:"spec",value:function(t){return new a.Spec(t)}},{key:"cloneObject",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"depthFirstSearch",value:function(e,n){if(n(e))return e;for(var r=e.hasOwnProperty("frames")?e.frames:[{units:e.units}],i=0;i<r.length;i++)for(var o=r[i].units||[],a=0;a<o.length;a++){var u=t.depthFirstSearch(o[a],n);if(u)return u}}},{key:"traverseSpec",value:function(t,e){var n=function t(e,n,r){n(e,r),(e.units||[]).map(function(r){return t(r,n,e)})};n(t.unit,e,null)}},{key:"extractFieldsFormatInfo",value:function(e){var n=e.scales,r=function(t){return!n[t].dim},o=function(t,e,r){var i=e.guide||{},o=n[e[r]],a=i[r]||{};t[o.dim]=t[o.dim]||{label:[],format:[],nullAlias:[],tickLabel:[]};var u=a.label,l=a.label||{};t[o.dim].label.push("string"===typeof u?u:l._original_text||l.text);var s=a.tickFormat||a.tickPeriod;t[o.dim].format.push(s),t[o.dim].nullAlias.push(a.tickFormatNullAlias),t[o.dim].tickLabel.push(a.tickLabel)},a=[];t.traverseSpec(e,function(t){a.push(t)});var u=a.reduce(function(t,e){return"COORDS.RECT"===e.type&&e.hasOwnProperty("x")&&!r(e.x)&&o(t,e,"x"),"COORDS.RECT"===e.type&&e.hasOwnProperty("y")&&!r(e.y)&&o(t,e,"y"),e.hasOwnProperty("color")&&!r(e.color)&&o(t,e,"color"),e.hasOwnProperty("size")&&!r(e.size)&&o(t,e,"size"),e.hasOwnProperty("label")&&!r(e.label)&&o(t,e,"label"),t},{}),l=function(t,e){return t.filter(function(t){return t})[0]||e};return Object.keys(u).reduce(function(t,n){t[n].label=l(t[n].label,n),t[n].format=l(t[n].format,null),t[n].nullAlias=l(t[n].nullAlias,"No "+t[n].label),t[n].tickLabel=l(t[n].tickLabel,null);var r="x-time-auto"===t[n].format?e.settings.utcTime?"day-utc":"day":t[n].format,o=t[n].nullAlias,a=r?i.FormatterRegistry.get(r,o):function(t){return null===t?o:t};if(t[n].format=a,t[n].tickLabel){var u=n.replace("."+t[n].tickLabel,"");t[u]={label:t[n].label,nullAlias:t[n].nullAlias,tickLabel:t[n].tickLabel,format:function(e){return a(e&&e[t[u].tickLabel])},isComplexField:!0},t[n].parentField=u}return t},u)}},{key:"tokens",value:function(){return{reg:function(t,e){return l[t]=e,this},get:function(t){return l[t]||t}}}},{key:"getParentUnit",value:function(t,e){var n=null,r=function t(r,i){return r.uid===e.uid?(n=i,!0):(r.frames?r.frames.some(function(e){return(e.units||[]).some(function(e){return t(e,r)})}):(r.units||[]).some(function(e){return t(e,r)}),!1)};return r(t.unit,null),n}}]),t}();e.PluginsSDK=s},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(e){r(this,t),this.unitRef=e}return n(t,[{key:"value",value:function(){return this.unitRef}},{key:"clone",value:function(){return JSON.parse(JSON.stringify(this.unitRef))}},{key:"traverse",value:function(t){var e=function t(e,n,r){n(e,r),(e.units||[]).map(function(r){return t(r,n,e)})};return e(this.unitRef,t,null),this}},{key:"reduce",value:function(t,e){var n=e;return this.traverse(function(e,r){return n=t(n,e,r)}),n}},{key:"addFrame",value:function(t){return this.unitRef.frames=this.unitRef.frames||[],t.key.__layerid__=["L",(new Date).getTime(),this.unitRef.frames.length].join(""),t.source=t.hasOwnProperty("source")?t.source:this.unitRef.expression.source,t.pipe=t.pipe||[],this.unitRef.frames.push(t),this}},{key:"addTransformation",value:function(t,e){return this.unitRef.transformation=this.unitRef.transformation||[],this.unitRef.transformation.push({type:t,args:e}),this}},{key:"isCoordinates",value:function(){return 0===(this.unitRef.type||"").toUpperCase().indexOf("COORDS.")}},{key:"isElementOf",value:function(t){if(this.isCoordinates())return!1;var e=this.unitRef.type||"",n=e.split("/");return 1===n.length&&n.unshift("RECT"),n[0].toUpperCase()===t.toUpperCase()}}]),t}();e.Unit=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spec=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(80);function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e){o(this,t),this.specRef=e}return r(t,[{key:"value",value:function(){return this.specRef}},{key:"unit",value:function(t){return t&&(this.specRef.unit=t),new i.Unit(this.specRef.unit)}},{key:"addTransformation",value:function(t,e){return this.specRef.transformations=this.specRef.transformations||{},this.specRef.transformations[t]=e,this}},{key:"getSettings",value:function(t){return this.specRef.settings[t]}},{key:"setSettings",value:function(t,e){return this.specRef.settings=this.specRef.settings||{},this.specRef.settings[t]=e,this}},{key:"getScale",value:function(t){return this.specRef.scales[t]}},{key:"addScale",value:function(t,e){return this.specRef.scales[t]=e,this}},{key:"regSource",value:function(t,e){return this.specRef.sources[t]=e,this}},{key:"getSourceData",value:function(t){var e=this.specRef.sources[t]||{data:[]};return e.data}},{key:"getSourceDim",value:function(t,e){var n=this.specRef.sources[t]||{dims:{}};return n.dims[e]||{}}}]),t}();e.Spec=a},function(t,e){"use strict";if(window.requestAnimationFrame||function(){var t=0;window.requestAnimationFrame=function(e){var n=Date.now(),r=Math.max(0,16-n+t);return t=n+r,setTimeout(function(){e.call(null,n+r)},r)},window.cancelAnimationFrame=function(t){clearTimeout(t)}}(),Number.isFinite||Object.defineProperty(Number,"isFinite",{value:function(t){return"number"===typeof t&&isFinite(t)},configurable:!0,enumerable:!1,writable:!0}),Number.isNaN||Object.defineProperty(Number,"isNaN",{value:function(t){return"number"===typeof t&&isNaN(t)},configurable:!0,enumerable:!1,writable:!0}),Number.isInteger||Object.defineProperty(Number,"isInteger",{value:function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},configurable:!0,enumerable:!1,writable:!0}),Number.MAX_SAFE_INTEGER||Object.defineProperty(Number,"MAX_SAFE_INTEGER",{value:9007199254740991,configurable:!1,enumerable:!1,writable:!1}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return e},configurable:!0,enumerable:!1,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!==typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return o;return-1},configurable:!0,enumerable:!1,writable:!0}),!Array.from){Object.defineProperty(Array,"from",{value:function(){var t=Object.prototype.toString,e=function(e){return"function"===typeof e||"[object Function]"===t.call(e)},n=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(e>0?1:-1)*Math.floor(Math.abs(e)):e},r=Math.pow(2,53)-1,i=function(t){var e=n(t);return Math.min(Math.max(e,0),r)};return function(t){var n=this,r=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var o,a=arguments.length>1?arguments[1]:void 0;if("undefined"!==typeof a){if(!e(a))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2])}var u,l=i(r.length),s=e(n)?Object(new n(l)):new Array(l),c=0;while(c<l)u=r[c],s[c]=a?"undefined"===typeof o?a(u,c):a.call(o,u,c):u,c+=1;return s.length=l,s}}(),configurable:!0,enumerable:!1,writable:!0});var n=Map.prototype.set;Object.defineProperty(Map.prototype,"set",{value:function(){return n.apply(this,arguments),this},configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(Map.prototype,"values",{value:function(){var t={},e=0;return this.forEach(function(n){return t[String(e++)]=n}),t.length=e,t},configurable:!0,enumerable:!1,writable:!0}),Object.defineProperty(Map.prototype,"entries",{value:function(){var t={},e=0;return this.forEach(function(n,r){return t[String(e++)]=[r,n]}),t.length=e,t},configurable:!0,enumerable:!1,writable:!0})}Object.assign||Object.defineProperty(Object,"assign",{value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},configurable:!0,enumerable:!1,writable:!0}),Element.prototype.matches||Object.defineProperty(Element.prototype,"matches",{value:Element.prototype.msMatchesSelector,configurable:!0,enumerable:!0,writable:!0})}])})},Ooc8:function(t,e,n){var r,i;(function(o){r=[n("NQzu")],i=function(t){return o(t)}.apply(e,r),void 0===i||(t.exports=i)})(function(t){var e=t.api.d3,n=t.api.utils,r=t.api.pluginsSDK,i="graphical-report__tooltip-target",o=function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")};function a(a){var u=n.defaults(a||{},{align:"bottom-right",escapeHtml:!0,fields:null,formatters:{},dockToData:!1,aggregationGroupFields:[],onRevealAggregation:function(t,e){console.log("Setup [onRevealAggregation] callback and filter original data by the following criteria: ",JSON.stringify(t,null,2))},spacing:24}),l={init:function(t){this._chart=t,this._metaInfo={},this._skipInfo={},Object.assign(this,n.omit(u,"fields","getFields")),this._tooltip=this._chart.addBalloon({spacing:u.spacing,auto:!0,effectClass:"fade"});var e=u.aggregationGroupFields.length>0?this.templateRevealAggregation:"",r=n.template(this.template),i=this.getTooltipNode();this._tooltip.content(r({revealTemplate:e,excludeTemplate:this.templateExclude})),i.addEventListener("click",function(t){var e=t.target;while(e!==t.currentTarget&&null!==e)e.classList.contains("i-role-exclude")&&(this._exclude(),this.setState({highlight:null,isStuck:!1})),e.classList.contains("i-role-reveal")&&(this._reveal(),this.setState({highlight:null,isStuck:!1})),e=e.parentNode}.bind(this),!1),this._scrollHandler=function(){this.setState({highlight:null,isStuck:!1})}.bind(this),window.addEventListener("scroll",this._scrollHandler,!0),this._outerClickHandler=function(t){var e=this.getTooltipNode().getBoundingClientRect();(t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom)&&this.setState({highlight:null,isStuck:!1})}.bind(this),this.setState(this.state),this.afterInit(i)},getTooltipNode:function(){return this._tooltip.getElement()},state:{highlight:null,isStuck:!1},setState:function(t){var e=this.state,n=this.state=Object.assign({},e,t);e.highlight=e.highlight||{data:null,cursor:null,unit:null},n.highlight=n.highlight||{data:null,cursor:null,unit:null},n.isStuck&&e.highlight.data&&(n.highlight=e.highlight),n.highlight.data!==e.highlight.data&&(n.highlight.data?(this.hideTooltip(),this.showTooltip(n.highlight.data,n.highlight.cursor),this._setTargetSvgClass(!0),requestAnimationFrame(function(){this._setTargetSvgClass(!0)}.bind(this))):n.isStuck||!e.highlight.data||n.highlight.data||(this._removeFocus(),this.hideTooltip(),this._setTargetSvgClass(!1))),!n.highlight.data||e.highlight.cursor&&n.highlight.cursor.x===e.highlight.cursor.x&&n.highlight.cursor.y===e.highlight.cursor.y||this._tooltip.position(n.highlight.cursor.x,n.highlight.cursor.y);var r=this.getTooltipNode();n.isStuck!==e.isStuck&&(n.isStuck?(window.addEventListener("click",this._outerClickHandler,!0),r.classList.add("stuck"),this._setTargetEventsEnabled(!1),this._accentFocus(n.highlight.data),this._tooltip.updateSize()):(window.removeEventListener("click",this._outerClickHandler,!0),r.classList.remove("stuck"),requestAnimationFrame(function(){this._setTargetEventsEnabled(!0)}.bind(this))))},showTooltip:function(t,e){var n=this.getTooltipNode().querySelectorAll(".i-role-content")[0];if(n){var r=u.fields||"function"===typeof u.getFields&&u.getFields(this._chart)||Object.keys(t);n.innerHTML=this.render(t,r)}this._tooltip.position(e.x,e.y).place(u.align).show().updateSize()},hideTooltip:function(t){window.removeEventListener("click",this._outerClickHandler,!0),this._tooltip.hide()},destroy:function(){window.removeEventListener("scroll",this._scrollHandler,!0),this._setTargetSvgClass(!1),this.setState({highlight:null,isStuck:!1}),this._tooltip.destroy()},_subscribeToHover:function(){var t=["ELEMENT.LINE","ELEMENT.AREA","ELEMENT.PATH","ELEMENT.INTERVAL","ELEMENT.INTERVAL.STACKED","ELEMENT.POINT"];this._chart.select(function(e){return t.indexOf(e.config.type)>=0}).forEach(function(t){t.on("data-hover",function(t,e){var n=document.body.getBoundingClientRect();this.setState({highlight:e.data?{data:e.data,cursor:{x:e.event.clientX-n.left,y:e.event.clientY-n.top},unit:t}:null})}.bind(this)),t.on("data-click",function(t,e){var n=document.body.getBoundingClientRect();this.setState(e.data?{highlight:{data:e.data,cursor:{x:e.event.clientX-n.left,y:e.event.clientY-n.top},unit:t},isStuck:!0}:{highlight:null,isStuck:null})}.bind(this))},this)},afterInit:function(t){},render:function(t,e){var n=this;return e.filter(function(t){var e=t.split("."),r=2===e.length&&n._skipInfo[e[0]];return!r}).map(function(e){var r=e,i=t[e];return n.renderItem(n._getLabel(r),n._getFormat(r)(i),r,i)}).join("")},renderItem:function(t,e,n,r){return this.itemTemplate({label:u.escapeHtml?o(t):t,value:u.escapeHtml?o(e):e})},_getFormat:function(t){var e=this._metaInfo[t]||{format:function(t){return String(t)}};return e.format},_getLabel:function(t){var e=this._metaInfo[t]||{label:t};return e.label},_accentFocus:function(t){var e=function(e){return e===t};this._chart.select(function(){return!0}).forEach(function(t){t.fire("highlight",e)})},_removeFocus:function(){var t=function(){return null};this._chart.select(function(){return!0}).forEach(function(e){e.fire("highlight",t),e.fire("highlight-data-points",t)})},_reveal:function(){var t=this.state.highlight.data,e=u.aggregationGroupFields||[],n=e.reduce(function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e},{});u.onRevealAggregation(n,t)},_exclude:function(){this._chart.addFilter({tag:"exclude",predicate:function(t){return function(e){return JSON.stringify(e)!==JSON.stringify(t)}}(this.state.highlight.data)}),this._chart.refresh()},onRender:function(){var t=this._getFormatters();this._metaInfo=t.meta,this._skipInfo=t.skip,this._subscribeToHover(),this.setState({highlight:null,isStuck:!1})},_setTargetSvgClass:function(t){e.select(this._chart.getSVG()).classed(i,t)},_setTargetEventsEnabled:function(t){t?this._chart.enablePointerEvents():this._chart.disablePointerEvents()},templateRevealAggregation:['<div class="i-role-reveal graphical-report__tooltip__vertical">','   <div class="graphical-report__tooltip__vertical__wrap">',"       Reveal","   </div>","</div>"].join(""),templateExclude:['<div class="i-role-exclude graphical-report__tooltip__exclude">','   <div class="graphical-report__tooltip__exclude__wrap">','       <span class="tau-icon-close-gray"></span>',"       Exclude","   </div>","</div>"].join(""),template:['<div class="i-role-content graphical-report__tooltip__content"></div>',"<%= revealTemplate %>","<%= excludeTemplate %>"].join(""),itemTemplate:n.template(['<div class="graphical-report__tooltip__list__item">','<div class="graphical-report__tooltip__list__elem"><%=label%></div>','<div class="graphical-report__tooltip__list__elem"><%=value%></div>',"</div>"].join("")),_getFormatters:function(){var e=r.extractFieldsFormatInfo(this._chart.getSpec()),i={};Object.keys(e).forEach(function(t){e[t].isComplexField&&(i[t]=!0),e[t].parentField&&delete e[t]});var o=function(t){var e={};return"function"===typeof t||"string"===typeof t?e={format:t}:n.isObject(t)&&(e=n.pick(t,"label","format","nullAlias")),e};return Object.keys(u.formatters).forEach(function(r){var i=o(u.formatters[r]);e[r]=Object.assign({label:r,nullAlias:"No "+r},e[r]||{},n.pick(i,"label","nullAlias")),i.hasOwnProperty("format")?e[r].format="function"===typeof i.format?i.format:t.api.tickFormat.get(i.format,e[r].nullAlias):e[r].format=e[r].hasOwnProperty("format")?e[r].format:t.api.tickFormat.get(null,e[r].nullAlias)}),{meta:e,skip:i}}};return l}return t.api.plugins.add("tooltip",a),a})},OzIq:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},PHCx:function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},PHqh:function(t,e,n){var r=n("Q6Nf"),i=n("/whu");t.exports=function(t){return r(i(t))}},Q6Nf:function(t,e,n){var r=n("ydD5");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},QKXm:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},Qh14:function(t,e,n){var r=n("ReGu"),i=n("QKXm");t.exports=Object.keys||function(t){return r(t,i)}},R3AP:function(t,e,n){var r=n("OzIq"),i=n("2p1q"),o=n("WBcL"),a=n("ulTY")("src"),u="toString",l=Function[u],s=(""+l).split(u);n("7gX0").inspectSource=function(t){return l.call(t)},(t.exports=function(t,e,n,u){var l="function"==typeof n;l&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||i(n,a,t[e]?""+t[e]:s.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||l.call(this)})},ReGu:function(t,e,n){var r=n("WBcL"),i=n("PHqh"),o=n("ot5s")(!1),a=n("mZON")("IE_PROTO");t.exports=function(t,e){var n,u=i(t),l=0,s=[];for(n in u)n!=a&&r(u,n)&&s.push(n);while(e.length>l)r(u,n=e[l++])&&(~o(s,n)||s.push(n));return s}},RhFG:function(t,e,n){var r=n("kkCw")("unscopables"),i=Array.prototype;void 0==i[r]&&n("2p1q")(i,r,{}),t.exports=function(t){i[r][t]=!0}},SDXa:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},SHe9:function(t,e,n){var r=n("wC1N"),i=n("kkCw")("iterator"),o=n("bN1p");t.exports=n("7gX0").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},Sejc:function(t,e,n){var r,i,o,a=n("rFzY"),u=n("PHCx"),l=n("d075"),s=n("jhxf"),c=n("OzIq"),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,g=c.Dispatch,v=0,y={},m="onreadystatechange",b=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},x=function(t){b.call(t.data)};h&&d||(h=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return y[++v]=function(){u("function"==typeof t?t:Function(t),e)},r(v),v},d=function(t){delete y[t]},"process"==n("ydD5")(f)?r=function(t){f.nextTick(a(b,t,1))}:g&&g.now?r=function(t){g.now(a(b,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=x,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",x,!1)):r=m in s("script")?function(t){l.appendChild(s("script"))[m]=function(){l.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:h,clear:d}},"UKM+":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},"V3l/":function(t,e){t.exports=!1},"VU/8":function(t,e){t.exports=function(t,e,n,r,i,o){var a,u=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(a=t,u=t.default);var s,c="function"===typeof u?u.options:u;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),n&&(c.functional=!0),i&&(c._scopeId=i),o?(s=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=s):r&&(s=r),s){var f=c.functional,h=f?c.render:c.beforeCreate;f?(c._injectStyles=s,c.render=function(t,e){return s.call(e),h(t,e)}):c.beforeCreate=h?[].concat(h,s):[s]}return{esModule:a,exports:u,options:c}}},VWgF:function(t,e,n){var r=n("OzIq"),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},WBcL:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},WcO1:function(t,e,n){var r=n("ReGu"),i=n("QKXm").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},WgSQ:function(t,e,n){"use strict";var r=n("RhFG"),i=n("KB1o"),o=n("bN1p"),a=n("PHqh");t.exports=n("uc2A")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},XO1R:function(t,e,n){var r=n("ydD5");t.exports=Array.isArray||function(t){return"Array"==r(t)}},XSOZ:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},XvUs:function(t,e,n){var r=n("DIVP");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t["return"];throw void 0!==o&&r(o.call(t)),e}}},Y1N3:function(t,e){e.f=Object.getOwnPropertySymbols},Y1aA:function(t,e){e.f={}.propertyIsEnumerable},Za4h:function(t,e,n){var r,i;!function(){var o={version:"3.5.17"},a=[].slice,u=function(t){return a.call(t)},l=this.document;function s(t){return t&&(t.ownerDocument||t.document||t).documentElement}function c(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(l)try{u(l.documentElement.childNodes)[0].nodeType}catch(t){u=function(t){var e=t.length,n=new Array(e);while(e--)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),l)try{l.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var f=this.Element.prototype,h=f.setAttribute,d=f.setAttributeNS,p=this.CSSStyleDeclaration.prototype,g=p.setProperty;f.setAttribute=function(t,e){h.call(this,t,e+"")},f.setAttributeNS=function(t,e,n){d.call(this,t,e,n+"")},p.setProperty=function(t,e,n){g.call(this,t,e+"",n)}}function v(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function y(t){return null===t?NaN:+t}function m(t){return!isNaN(t)}function b(t){return{left:function(e,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);while(r<i){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}o.ascending=v,o.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},o.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){while(++i<o)if(null!=(r=t[i])&&r>=r){n=r;break}while(++i<o)null!=(r=t[i])&&n>r&&(n=r)}else{while(++i<o)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}while(++i<o)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},o.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){while(++i<o)if(null!=(r=t[i])&&r>=r){n=r;break}while(++i<o)null!=(r=t[i])&&r>n&&(n=r)}else{while(++i<o)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}while(++i<o)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},o.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){while(++o<a)if(null!=(r=t[o])&&r>=r){n=i=r;break}while(++o<a)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{while(++o<a)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}while(++o<a)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},o.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)while(++o<i)m(n=+t[o])&&(r+=n);else while(++o<i)m(n=+e.call(t,t[o],o))&&(r+=n);return r},o.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)while(++o<i)m(n=y(t[o]))?r+=n:--a;else while(++o<i)m(n=y(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},o.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},o.median=function(t,e){var n,r=[],i=t.length,a=-1;if(1===arguments.length)while(++a<i)m(n=y(t[a]))&&r.push(n);else while(++a<i)m(n=y(e.call(t,t[a],a)))&&r.push(n);if(r.length)return o.quantile(r.sort(v),.5)},o.variance=function(t,e){var n,r,i=t.length,o=0,a=0,u=-1,l=0;if(1===arguments.length)while(++u<i)m(n=y(t[u]))&&(r=n-o,o+=r/++l,a+=r*(n-o));else while(++u<i)m(n=y(e.call(t,t[u],u)))&&(r=n-o,o+=r/++l,a+=r*(n-o));if(l>1)return a/(l-1)},o.deviation=function(){var t=o.variance.apply(this,arguments);return t?Math.sqrt(t):t};var x=b(v);function _(t){return t.length}o.bisectLeft=x.left,o.bisect=o.bisectRight=x.right,o.bisector=function(t){return b(1===t.length?function(e,n){return v(t(e),n)}:t)},o.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));var r,i,o=n-e;while(o)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},o.permute=function(t,e){var n=e.length,r=new Array(n);while(n--)r[n]=t[e[n]];return r},o.pairs=function(t){var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);while(e<n)i[e]=[r,r=t[++e]];return i},o.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=o.min(t,_),r=new Array(n);++e<n;)for(var i,a=-1,u=r[e]=new Array(i);++a<i;)u[a]=t[a][e];return r},o.zip=function(){return o.transpose(arguments)},o.keys=function(t){var e=[];for(var n in t)e.push(n);return e},o.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},o.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},o.merge=function(t){var e,n,r,i=t.length,o=-1,a=0;while(++o<i)a+=t[o].length;n=new Array(a);while(--i>=0){r=t[i],e=r.length;while(--e>=0)n[--a]=r[e]}return n};var w=Math.abs;function M(t){var e=1;while(t*e%1)e*=10;return e}function S(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function k(){this._=Object.create(null)}o.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=M(w(n)),a=-1;if(t*=o,e*=o,n*=o,n<0)while((r=t+n*++a)>e)i.push(r/o);else while((r=t+n*++a)<e)i.push(r/o);return i},o.map=function(t,e){var n=new k;if(t instanceof k)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)while(++i<o)n.set(i,t[i]);else while(++i<o)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var O="__proto__",E="\0";function A(t){return(t+="")===O||t[0]===E?E+t:t}function C(t){return(t+="")[0]===E?t.slice(1):t}function T(t){return A(t)in this._}function P(t){return(t=A(t))in this._&&delete this._[t]}function j(){var t=[];for(var e in this._)t.push(C(e));return t}function N(){var t=0;for(var e in this._)++t;return t}function L(){for(var t in this._)return!1;return!0}function R(){this._=Object.create(null)}function D(t){return t}function z(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function I(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+e;if(i in t)return i}}S(k,{has:T,get:function(t){return this._[A(t)]},set:function(t,e){return this._[A(t)]=e},remove:P,keys:j,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:C(e),value:this._[e]});return t},size:N,empty:L,forEach:function(t){for(var e in this._)t.call(this,C(e),this._[e])}}),o.nest=function(){var t,e,n={},r=[],i=[];function a(i,o,u){if(u>=r.length)return e?e.call(n,o):t?o.sort(t):o;var l,s,c,f,h=-1,d=o.length,p=r[u++],g=new k;while(++h<d)(f=g.get(l=p(s=o[h])))?f.push(s):g.set(l,[s]);return i?(s=i(),c=function(t,e){s.set(t,a(i,e,u))}):(s={},c=function(t,e){s[t]=a(i,e,u)}),g.forEach(c),s}function u(t,e){if(e>=r.length)return t;var n=[],o=i[e++];return t.forEach(function(t,r){n.push({key:t,values:u(r,e)})}),o?n.sort(function(t,e){return o(t.key,e.key)}):n}return n.map=function(t,e){return a(e,t,0)},n.entries=function(t){return u(a(o.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return i[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},o.set=function(t){var e=new R;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},S(R,{has:T,add:function(t){return this._[A(t+="")]=!0,t},remove:P,values:j,size:N,empty:L,forEach:function(t){for(var e in this._)t.call(this,C(e))}}),o.behavior={},o.rebind=function(t,e){var n,r=1,i=arguments.length;while(++r<i)t[n=arguments[r]]=z(t,e,e[n]);return t};var F=["webkit","ms","moz","Moz","o","O"];function B(){}function U(){}function H(t){var e=[],n=new k;function r(){var n,r=e,i=-1,o=r.length;while(++i<o)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function q(){o.event.preventDefault()}function $(){var t,e=o.event;while(t=e.sourceEvent)e=t;return e}function W(t){var e=new U,n=0,r=arguments.length;while(++n<r)e[arguments[n]]=H(e);return e.of=function(n,r){return function(i){try{var a=i.sourceEvent=o.event;i.target=t,o.event=i,e[i.type].apply(n,r)}finally{o.event=a}}},e}o.dispatch=function(){var t=new U,e=-1,n=arguments.length;while(++e<n)t[arguments[e]]=H(t);return t},U.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},o.event=null,o.requote=function(t){return t.replace(G,"\\$&")};var G=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,X={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function Y(t){return X(t,J),t}var V=function(t,e){return e.querySelector(t)},K=function(t,e){return e.querySelectorAll(t)},Z=function(t,e){var n=t.matches||t[I(t,"matchesSelector")];return Z=function(t,e){return n.call(t,e)},Z(t,e)};"function"===typeof Sizzle&&(V=function(t,e){return Sizzle(t,e)[0]||null},K=Sizzle,Z=Sizzle.matchesSelector),o.selection=function(){return o.select(l.documentElement)};var J=o.selection.prototype=[];function Q(t){return"function"===typeof t?t:function(){return V(t,this)}}function tt(t){return"function"===typeof t?t:function(){return K(t,this)}}J.select=function(t){var e,n,r,i,o=[];t=Q(t);for(var a=-1,u=this.length;++a<u;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,s=r.length;++l<s;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return Y(o)},J.selectAll=function(t){var e,n,r=[];t=tt(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],l=-1,s=a.length;++l<s;)(n=a[l])&&(r.push(e=u(t.call(n,n.__data__,l,i))),e.parentNode=n);return Y(r)};var et="http://www.w3.org/1999/xhtml",nt={svg:"http://www.w3.org/2000/svg",xhtml:et,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function rt(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function a(){this.setAttributeNS(t.space,t.local,e)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function l(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=o.ns.qualify(t),null==e?t.local?r:n:"function"===typeof e?t.local?l:u:t.local?a:i}function it(t){return t.trim().replace(/\s+/g," ")}function ot(t){return new RegExp("(?:^|\\s+)"+o.requote(t)+"(?:\\s+|$)","g")}function at(t){return(t+"").trim().split(/^|\s+/)}function ut(t,e){t=at(t).map(lt);var n=t.length;function r(){var r=-1;while(++r<n)t[r](this,e)}function i(){var r=-1,i=e.apply(this,arguments);while(++r<n)t[r](this,i)}return"function"===typeof e?i:r}function lt(t){var e=ot(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",it(i+" "+t))):n.setAttribute("class",it(i.replace(e," ")))}}function st(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"===typeof e?o:i}function ct(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"===typeof e?i:r}function ft(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===et&&e.documentElement.namespaceURI===et?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"===typeof t?t:(t=o.ns.qualify(t)).local?n:e}function ht(){var t=this.parentNode;t&&t.removeChild(this)}function dt(t){return{__data__:t}}function pt(t){return function(){return Z(this,t)}}function gt(t){return arguments.length||(t=v),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function vt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,u=o.length;a<u;a++)(i=o[a])&&e(i,a,n);return t}function yt(t){return X(t,mt),t}o.ns={prefix:nt,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),nt.hasOwnProperty(n)?{space:nt[n],local:t}:t}},J.attr=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node();return t=o.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},J.classed=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node(),r=(t=at(t)).length,i=-1;if(e=n.classList){while(++i<r)if(!e.contains(t[i]))return!1}else{e=n.getAttribute("class");while(++i<r)if(!ot(t[i]).test(e))return!1}return!0}for(e in t)this.each(ut(e,t[e]));return this}return this.each(ut(t,e))},J.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.each(st(n,t[n],e));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(st(t,e,n))},J.property=function(t,e){if(arguments.length<2){if("string"===typeof t)return this.node()[t];for(e in t)this.each(ct(e,t[e]));return this}return this.each(ct(t,e))},J.text=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},J.html=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},J.append=function(t){return t=ft(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},J.insert=function(t,e){return t=ft(t),e=Q(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},J.remove=function(){return this.each(ht)},J.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){t=new Array(o=(n=this[0]).length);while(++i<o)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,c=n.length,f=Math.min(a,c),h=new Array(c),d=new Array(c),p=new Array(a);if(e){var g,v=new k,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(v.has(g=e.call(i,i.__data__,r))?p[r]=i:v.set(g,i),y[r]=g);for(r=-1;++r<c;)(i=v.get(g=e.call(n,o=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=o):d[r]=dt(o),v.set(g,!0);for(r=-1;++r<a;)r in y&&!0!==v.get(y[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):d[r]=dt(o);for(;r<c;++r)d[r]=dt(n[r]);for(;r<a;++r)p[r]=t[r]}d.update=h,d.parentNode=h.parentNode=p.parentNode=t.parentNode,u.push(d),l.push(h),s.push(p)}var u=yt([]),l=Y([]),s=Y([]);if("function"===typeof t)while(++i<o)a(n=this[i],t.call(n,n.parentNode.__data__,i));else while(++i<o)a(n=this[i],t);return l.enter=function(){return u},l.exit=function(){return s},l},J.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},J.filter=function(t){var e,n,r,i=[];"function"!==typeof t&&(t=pt(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=0,l=n.length;u<l;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return Y(i)},J.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},J.sort=function(t){t=gt.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},J.each=function(t){return vt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},J.call=function(t){var e=u(arguments);return t.apply(e[0]=this,e),this},J.empty=function(){return!this.node()},J.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},J.size=function(){var t=0;return vt(this,function(){++t}),t};var mt=[];function bt(t){var e,n;return function(r,i,o){var a,u=t[o].update,l=u.length;o!=n&&(n=o,e=0),i>=e&&(e=i+1);while(!(a=u[e])&&++e<l);return a}}function xt(t,e,n){var r="__on"+t,i=t.indexOf("."),a=wt;i>0&&(t=t.slice(0,i));var l=_t.get(t);function s(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}function c(){var i=a(e,u(arguments));s.call(this),this.addEventListener(t,this[r]=i,i.$=n),i._=e}function f(){var e,n=new RegExp("^__on([^.]+)"+o.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}return l&&(t=l,a=Mt),i?e?c:s:e?B:f}o.selection.enter=yt,o.selection.enter.prototype=mt,mt.append=J.append,mt.empty=J.empty,mt.node=J.node,mt.call=J.call,mt.size=J.size,mt.select=function(t){for(var e,n,r,i,o,a=[],u=-1,l=this.length;++u<l;){r=(i=this[u]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var s=-1,c=i.length;++s<c;)(o=i[s])?(e.push(r[s]=n=t.call(i.parentNode,o.__data__,s,u)),n.__data__=o.__data__):e.push(null)}return Y(a)},mt.insert=function(t,e){return arguments.length<2&&(e=bt(this)),J.insert.call(this,t,e)},o.select=function(t){var e;return"string"===typeof t?(e=[V(t,l)],e.parentNode=l.documentElement):(e=[t],e.parentNode=s(t)),Y([e])},o.selectAll=function(t){var e;return"string"===typeof t?(e=u(K(t,l)),e.parentNode=l.documentElement):(e=u(t),e.parentNode=null),Y([e])},J.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=!1),t)this.each(xt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(xt(t,e,n))};var _t=o.map({mouseenter:"mouseover",mouseleave:"mouseout"});function wt(t,e){return function(n){var r=o.event;o.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{o.event=r}}}function Mt(t,e){var n=wt(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}l&&_t.forEach(function(t){"on"+t in l&&_t.remove(t)});var St,kt=0;function Ot(t){var e=".dragsuppress-"+ ++kt,n="click"+e,r=o.select(c(t)).on("touchmove"+e,q).on("dragstart"+e,q).on("selectstart"+e,q);if(null==St&&(St=!("onselectstart"in t)&&I(t.style,"userSelect")),St){var i=s(t).style,a=i[St];i[St]="none"}return function(t){if(r.on(e,null),St&&(i[St]=a),t){var o=function(){r.on(n,null)};r.on(n,function(){q(),o()},!0),setTimeout(o,0)}}}o.mouse=function(t){return At(t,$())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function At(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Et<0){var i=c(t);if(i.scrollX||i.scrollY){n=o.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=n[0][0].getScreenCTM();Et=!(a.f||a.e),n.remove()}}return Et?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}function Ct(){return o.event.changedTouches[0].identifier}o.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=$().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return At(t,r)},o.behavior.drag=function(){var t=W(i,"drag","dragstart","dragend"),e=null,n=a(B,o.mouse,c,"mousemove","mouseup"),r=a(Ct,o.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function a(n,r,i,a,u){return function(){var l,s=this,c=o.event.target.correspondingElement||o.event.target,f=s.parentNode,h=t.of(s,arguments),d=0,p=n(),g=".drag"+(null==p?"":"-"+p),v=o.select(i(c)).on(a+g,b).on(u+g,x),y=Ot(c),m=r(f,p);function b(){var t,e,n=r(f,p);n&&(t=n[0]-m[0],e=n[1]-m[1],d|=t|e,m=n,h({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}function x(){r(f,p)&&(v.on(a+g,null).on(u+g,null),y(d),h({type:"dragend"}))}e?(l=e.apply(s,arguments),l=[l.x-m[0],l.y-m[1]]):l=[0,0],h({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(e=t,i):e},o.rebind(i,t,"on")},o.touches=function(t,e){return arguments.length<2&&(e=$().touches),e?u(e).map(function(e){var n=At(t,e);return n.identifier=e.identifier,n}):[]};var Tt=1e-6,Pt=Tt*Tt,jt=Math.PI,Nt=2*jt,Lt=Nt-Tt,Rt=jt/2,Dt=jt/180,zt=180/jt;function It(t){return t>0?1:t<0?-1:0}function Ft(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Bt(t){return t>1?0:t<-1?jt:Math.acos(t)}function Ut(t){return t>1?Rt:t<-1?-Rt:Math.asin(t)}function Ht(t){return((t=Math.exp(t))-1/t)/2}function qt(t){return((t=Math.exp(t))+1/t)/2}function $t(t){return((t=Math.exp(2*t))-1)/(t+1)}function Wt(t){return(t=Math.sin(t/2))*t}var Gt=Math.SQRT2,Xt=2,Yt=4;o.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],u=e[0],l=e[1],s=e[2],c=u-i,f=l-o,h=c*c+f*f;if(h<Pt)r=Math.log(s/a)/Gt,n=function(t){return[i+t*c,o+t*f,a*Math.exp(Gt*t*r)]};else{var d=Math.sqrt(h),p=(s*s-a*a+Yt*h)/(2*a*Xt*d),g=(s*s-a*a-Yt*h)/(2*s*Xt*d),v=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(g*g+1)-g);r=(y-v)/Gt,n=function(t){var e=t*r,n=qt(v),u=a/(Xt*d)*(n*$t(Gt*e+v)-Ht(v));return[i+u*c,o+u*f,a*n/qt(Gt*e+v)]}}return n.duration=1e3*r,n},o.behavior.zoom=function(){var t,e,n,r,i,a,u,s,f,h={x:0,y:0,k:1},d=[960,500],p=Zt,g=250,v=0,y="mousedown.zoom",m="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",_=W(w,"zoomstart","zoom","zoomend");function w(t){t.on(y,j).on(Kt+".zoom",L).on("dblclick.zoom",R).on(x,N)}function M(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function S(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}function k(t){h.k=Math.max(p[0],Math.min(p[1],t))}function O(t,e){e=S(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function E(t,n,r,i){t.__chart__={x:h.x,y:h.y,k:h.k},k(Math.pow(2,i)),O(e=n,r),t=o.select(t),g>0&&(t=t.transition().duration(g)),t.call(w.event)}function A(){u&&u.domain(a.range().map(function(t){return(t-h.x)/h.k}).map(a.invert)),f&&f.domain(s.range().map(function(t){return(t-h.y)/h.k}).map(s.invert))}function C(t){v++||t({type:"zoomstart"})}function T(t){A(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function P(t){--v||(t({type:"zoomend"}),e=null)}function j(){var t=this,e=_.of(t,arguments),n=0,r=o.select(c(t)).on(m,u).on(b,l),i=M(o.mouse(t)),a=Ot(t);function u(){n=1,O(o.mouse(t),i),T(e)}function l(){r.on(m,null).on(b,null),a(n),P(e)}Tl.call(t),C(e)}function N(){var t,e=this,n=_.of(e,arguments),r={},a=0,u=".zoom-"+o.event.changedTouches[0].identifier,l="touchmove"+u,s="touchend"+u,c=[],f=o.select(e),d=Ot(e);function p(){var n=o.touches(e);return t=h.k,n.forEach(function(t){t.identifier in r&&(r[t.identifier]=M(t))}),n}function g(){var t=o.event.target;o.select(t).on(l,v).on(s,m),c.push(t);for(var n=o.event.changedTouches,u=0,f=n.length;u<f;++u)r[n[u].identifier]=null;var d=p(),g=Date.now();if(1===d.length){if(g-i<500){var y=d[0];E(e,y,r[y.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),q()}i=g}else if(d.length>1){y=d[0];var b=d[1],x=y[0]-b[0],_=y[1]-b[1];a=x*x+_*_}}function v(){var u,l,s,c,f=o.touches(e);Tl.call(e);for(var h=0,d=f.length;h<d;++h,c=null)if(s=f[h],c=r[s.identifier]){if(l)break;u=s,l=c}if(c){var p=(p=s[0]-u[0])*p+(p=s[1]-u[1])*p,g=a&&Math.sqrt(p/a);u=[(u[0]+s[0])/2,(u[1]+s[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],k(g*t)}i=null,O(u,l),T(n)}function m(){if(o.event.touches.length){for(var t=o.event.changedTouches,e=0,i=t.length;e<i;++e)delete r[t[e].identifier];for(var a in r)return void p()}o.selectAll(c).on(u,null),f.on(y,j).on(x,N),d(),P(n)}g(),C(n),f.on(y,null).on(x,g)}function L(){var i=_.of(this,arguments);r?clearTimeout(r):(Tl.call(this),t=M(e=n||o.mouse(this)),C(i)),r=setTimeout(function(){r=null,P(i)},50),q(),k(Math.pow(2,.002*Vt())*h.k),O(e,t),T(i)}function R(){var t=o.mouse(this),e=Math.log(h.k)/Math.LN2;E(this,t,M(t),o.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return Kt||(Kt="onwheel"in l?(Vt=function(){return-o.event.deltaY*(o.event.deltaMode?120:1)},"wheel"):"onmousewheel"in l?(Vt=function(){return o.event.wheelDelta},"mousewheel"):(Vt=function(){return-o.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=_.of(this,arguments),n=h;Nl?o.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},C(t)}).tween("zoom:zoom",function(){var r=d[0],i=d[1],a=e?e[0]:r/2,u=e?e[1]:i/2,l=o.interpolateZoom([(a-h.x)/h.k,(u-h.y)/h.k,r/h.k],[(a-n.x)/n.k,(u-n.y)/n.k,r/n.k]);return function(e){var n=l(e),i=r/n[2];this.__chart__=h={x:a-n[0]*i,y:u-n[1]*i,k:i},T(t)}}).each("interrupt.zoom",function(){P(t)}).each("end.zoom",function(){P(t)}):(this.__chart__=h,C(t),T(t),P(t))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},A(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},k(+t),A(),w):h.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?Zt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],w):d},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(u=t,a=t.copy(),h={x:0,y:0,k:1},w):u},w.y=function(t){return arguments.length?(f=t,s=t.copy(),h={x:0,y:0,k:1},w):f},o.rebind(w,_,"on")};var Vt,Kt,Zt=[0,1/0];function Jt(){}function Qt(t,e,n){return this instanceof Qt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Qt?new Qt(t.h,t.s,t.l):_e(""+t,we,Qt):new Qt(t,e,n)}o.color=Jt,Jt.prototype.toString=function(){return this.rgb()+""},o.hsl=Qt;var te=Qt.prototype=new Jt;function ee(t,e,n){var r,i;function o(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}function a(t){return Math.round(255*o(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i,new ve(a(t+120),a(t),a(t-120))}function ne(t,e,n){return this instanceof ne?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ne?new ne(t.h,t.c,t.l):he(t instanceof oe?t.l:(t=Me((t=o.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ne(t,e,n)}te.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Qt(this.h,this.s,this.l/t)},te.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Qt(this.h,this.s,t*this.l)},te.rgb=function(){return ee(this.h,this.s,this.l)},o.hcl=ne;var re=ne.prototype=new Jt;function ie(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new oe(n,Math.cos(t*=Dt)*e,Math.sin(t)*e)}function oe(t,e,n){return this instanceof oe?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof oe?new oe(t.l,t.a,t.b):t instanceof ne?ie(t.h,t.c,t.l):Me((t=ve(t)).r,t.g,t.b):new oe(t,e,n)}re.brighter=function(t){return new ne(this.h,this.c,Math.min(100,this.l+ae*(arguments.length?t:1)))},re.darker=function(t){return new ne(this.h,this.c,Math.max(0,this.l-ae*(arguments.length?t:1)))},re.rgb=function(){return ie(this.h,this.c,this.l).rgb()},o.lab=oe;var ae=18,ue=.95047,le=1,se=1.08883,ce=oe.prototype=new Jt;function fe(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=de(i)*ue,r=de(r)*le,o=de(o)*se,new ve(ge(3.2404542*i-1.5371385*r-.4985314*o),ge(-.969266*i+1.8760108*r+.041556*o),ge(.0556434*i-.2040259*r+1.0572252*o))}function he(t,e,n){return t>0?new ne(Math.atan2(n,e)*zt,Math.sqrt(e*e+n*n),t):new ne(NaN,NaN,t)}function de(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function pe(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ge(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ve(t,e,n){return this instanceof ve?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ve?new ve(t.r,t.g,t.b):_e(""+t,ve,ee):new ve(t,e,n)}function ye(t){return new ve(t>>16,t>>8&255,255&t)}function me(t){return ye(t)+""}ce.brighter=function(t){return new oe(Math.min(100,this.l+ae*(arguments.length?t:1)),this.a,this.b)},ce.darker=function(t){return new oe(Math.max(0,this.l-ae*(arguments.length?t:1)),this.a,this.b)},ce.rgb=function(){return fe(this.l,this.a,this.b)},o.rgb=ve;var be=ve.prototype=new Jt;function xe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _e(t,e,n){var r,i,o,a=0,u=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()),r)switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ke(i[0]),ke(i[1]),ke(i[2]))}return(o=Oe.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,l=255&o)),e(a,u,l))}function we(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-o,l=(a+o)/2;return u?(i=l<.5?u/(a+o):u/(2-a-o),r=t==a?(e-n)/u+(e<n?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new Qt(r,i,l)}function Me(t,e,n){t=Se(t),e=Se(e),n=Se(n);var r=pe((.4124564*t+.3575761*e+.1804375*n)/ue),i=pe((.2126729*t+.7151522*e+.072175*n)/le),o=pe((.0193339*t+.119192*e+.9503041*n)/se);return oe(116*i-16,500*(r-i),200*(i-o))}function Se(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ke(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}be.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ve(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ve(i,i,i)},be.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ve(t*this.r,t*this.g,t*this.b)},be.hsl=function(){return we(this.r,this.g,this.b)},be.toString=function(){return"#"+xe(this.r)+xe(this.g)+xe(this.b)};var Oe=o.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Ee(t){return"function"===typeof t?t:function(){return t}}function Ae(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),Ce(e,n,t,r)}}function Ce(t,e,n,r){var i={},a=o.dispatch("beforesend","progress","load","error"),l={},s=new XMLHttpRequest,c=null;function f(){var t,e=s.status;if(!e&&Pe(s)||e>=200&&e<300||304===e){try{t=n.call(i,s)}catch(t){return void a.error.call(i,t)}a.load.call(i,t)}else a.error.call(i,s)}return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=f:s.onreadystatechange=function(){s.readyState>3&&f()},s.onprogress=function(t){var e=o.event;o.event=t;try{a.progress.call(i,s)}finally{o.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(u(arguments)))}}),i.send=function(n,r,o){if(2===arguments.length&&"function"===typeof r&&(o=r,r=null),s.open(n,t,!0),null==e||"accept"in l||(l["accept"]=e+",*/*"),s.setRequestHeader)for(var u in l)s.setRequestHeader(u,l[u]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=c&&(s.responseType=c),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.beforesend.call(i,s),s.send(null==r?null:r),i},i.abort=function(){return s.abort(),i},o.rebind(i,a,"on"),null==r?i:i.get(Te(r))}function Te(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Pe(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}Oe.forEach(function(t,e){Oe.set(t,ye(e))}),o.functor=Ee,o.xhr=Ae(D),o.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=Ce(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function u(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,o={},a={},u=[],l=t.length,s=0,c=0;function f(){if(s>=l)return a;if(i)return i=!1,o;var e=s;if(34===t.charCodeAt(e)){var n=e;while(n++<l)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}s=n+2;var u=t.charCodeAt(n+1);return 13===u?(i=!0,10===t.charCodeAt(n+2)&&++s):10===u&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}while(s<l){u=t.charCodeAt(s++);var c=1;if(10===u)i=!0;else if(13===u)i=!0,10===t.charCodeAt(s)&&(++s,++c);else if(u!==r)continue;return t.slice(e,s-c)}return t.slice(e)}while((n=f())!==a){var h=[];while(n!==o&&n!==a)h.push(n),n=f();e&&null==(h=e(h,c++))||u.push(h)}return u},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new R,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(l).join(t)].concat(e.map(function(e){return r.map(function(t){return l(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(u).join("\n")},i},o.csv=o.dsv(",","text/csv"),o.tsv=o.dsv("\t","text/tab-separated-values");var je,Ne,Le,Re,De=this[I(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function ze(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return Ne?Ne.n=o:je=o,Ne=o,Le||(Re=clearTimeout(Re),Le=1,De(Ie)),o}function Ie(){var t=Fe(),e=Be()-t;e>24?(isFinite(e)&&(clearTimeout(Re),Re=setTimeout(Ie,e)),Le=0):(Le=1,De(Ie))}function Fe(){var t=Date.now(),e=je;while(e)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Be(){var t,e=je,n=1/0;while(e)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:je=e.n;return Ne=t,n}function Ue(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}o.timer=function(){ze.apply(this,arguments)},o.timer.flush=function(){Fe(),Be()},o.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var He=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(qe);function qe(t,e){var n=Math.pow(10,3*w(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function $e(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,a=r&&n?function(t,e){var i=t.length,o=[],a=0,u=r[0],l=0;while(i>0&&u>0){if(l+u+1>e&&(u=Math.max(1,e-l)),o.push(t.substring(i-=u,i+u)),(l+=u+1)>e)break;u=r[a=(a+1)%r.length]}return o.reverse().join(n)}:D;return function(t){var n=We.exec(t),r=n[1]||" ",u=n[2]||">",l=n[3]||"-",s=n[4]||"",c=n[5],f=+n[6],h=n[7],d=n[8],p=n[9],g=1,v="",y="",m=!1,b=!0;switch(d&&(d=+d.substring(1)),(c||"0"===r&&"="===u)&&(c=r="0",u="="),p){case"n":h=!0,p="g";break;case"%":g=100,y="%",p="f";break;case"p":g=100,y="%",p="r";break;case"b":case"o":case"x":case"X":"#"===s&&(v="0"+p.toLowerCase());case"c":b=!1;case"d":m=!0,d=0;break;case"s":g=-1,p="r";break}"$"===s&&(v=i[0],y=i[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Ge.get(p)||Xe;var x=c&&h;return function(t){var n=y;if(m&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===l?"":l;if(g<0){var s=o.formatPrefix(t,d);t=s.scale(t),n=s.symbol+y}else t*=g;t=p(t,d);var _,w,M=t.lastIndexOf(".");if(M<0){var S=b?t.lastIndexOf("e"):-1;S<0?(_=t,w=""):(_=t.substring(0,S),w=t.substring(S))}else _=t.substring(0,M),w=e+t.substring(M+1);!c&&h&&(_=a(_,1/0));var k=v.length+_.length+w.length+(x?0:i.length),O=k<f?new Array(k=f-k+1).join(r):"";return x&&(_=a(O+_,O.length?f-w.length:1/0)),i+=v,t=_+w,("<"===u?i+t+O:">"===u?O+i+t:"^"===u?O.substring(0,k>>=1)+i+t+O.substring(k):i+(x?t:O+t))+n}}}o.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=o.round(t,Ue(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),He[8+n/3]};var We=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ge=o.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=o.round(t,Ue(t,e))).toFixed(Math.max(0,Math.min(20,Ue(t*(1+1e-15),e))))}});function Xe(t){return t+""}var Ye=o.time={},Ve=Date;function Ke(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ke.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ze.setUTCDate.apply(this._,arguments)},setDay:function(){Ze.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ze.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ze.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ze.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ze.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ze.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ze.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ze.setTime.apply(this._,arguments)}};var Ze=Date.prototype;function Je(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Ve(n-1)),1),n}function o(t,n){return e(t=new Ve(+t),n),t}function a(t,r,o){var a=i(t),u=[];if(o>1)while(a<r)n(a)%o||u.push(new Date(+a)),e(a,1);else while(a<r)u.push(new Date(+a)),e(a,1);return u}function u(t,e,n){try{Ve=Ke;var r=new Ke;return r._=t,a(r,e,n)}finally{Ve=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Qe(t);return l.floor=l,l.round=Qe(r),l.ceil=Qe(i),l.offset=Qe(o),l.range=u,t}function Qe(t){return function(e,n){try{Ve=Ke;var r=new Ke;return r._=e,t(r,n)._}finally{Ve=Date}}}function tn(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,u=t.shortDays,l=t.months,s=t.shortMonths;function c(t){var e=t.length;function n(n){var r,i,o,a=[],u=-1,l=0;while(++u<e)37===t.charCodeAt(u)&&(a.push(t.slice(l,u)),null!=(i=en[r=t.charAt(++u)])&&(r=t.charAt(++u)),(o=_[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),l=u+1);return a.push(t.slice(l,u)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=f(n,t,e,0);if(r!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&Ve!==Ke,o=new(i?Ke:Ve);return"j"in n?o.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),o.setFullYear(n.y,0,1),o.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(o.getDay()+5)%7:n.w+7*n.U-(o.getDay()+6)%7)):o.setFullYear(n.y,n.m,n.d),o.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?o._:o},n.toString=function(){return t},n}function f(t,e,n,r){var i,o,a,u=0,l=e.length,s=n.length;while(u<l){if(r>=s)return-1;if(i=e.charCodeAt(u++),37===i){if(a=e.charAt(u++),o=w[a in en?e.charAt(u++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{Ve=Ke;var n=new Ve;return n._=t,e(n)}finally{Ve=Date}}return n.parse=function(t){try{Ve=Ke;var n=e.parse(t);return n&&n._}finally{Ve=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=Sn;var h=o.map(),d=an(a),p=un(a),g=an(u),v=un(u),y=an(l),m=un(l),b=an(s),x=un(s);i.forEach(function(t,e){h.set(t.toLowerCase(),e)});var _={a:function(t){return u[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(e),d:function(t,e){return on(t.getDate(),e,2)},e:function(t,e){return on(t.getDate(),e,2)},H:function(t,e){return on(t.getHours(),e,2)},I:function(t,e){return on(t.getHours()%12||12,e,2)},j:function(t,e){return on(1+Ye.dayOfYear(t),e,3)},L:function(t,e){return on(t.getMilliseconds(),e,3)},m:function(t,e){return on(t.getMonth()+1,e,2)},M:function(t,e){return on(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return on(t.getSeconds(),e,2)},U:function(t,e){return on(Ye.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return on(Ye.mondayOfYear(t),e,2)},x:c(n),X:c(r),y:function(t,e){return on(t.getFullYear()%100,e,2)},Y:function(t,e){return on(t.getFullYear()%1e4,e,4)},Z:wn,"%":function(){return"%"}},w={a:M,A:S,b:k,B:O,c:E,d:vn,e:vn,H:mn,I:mn,j:yn,L:_n,m:gn,M:bn,p:T,S:xn,U:sn,w:ln,W:cn,x:A,X:C,y:hn,Y:fn,Z:dn,"%":Mn};function M(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1}function S(t,e,n){d.lastIndex=0;var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1}function k(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1}function O(t,e,n){y.lastIndex=0;var r=y.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1}function E(t,e,n){return f(t,_.c.toString(),e,n)}function A(t,e,n){return f(t,_.x.toString(),e,n)}function C(t,e,n){return f(t,_.X.toString(),e,n)}function T(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}return c}Ye.year=Je(function(t){return t=Ye.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Ye.years=Ye.year.range,Ye.years.utc=Ye.year.utc.range,Ye.day=Je(function(t){var e=new Ve(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Ye.days=Ye.day.range,Ye.days.utc=Ye.day.utc.range,Ye.dayOfYear=function(t){var e=Ye.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Ye[t]=Je(function(t){return(t=Ye.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Ye.year(t).getDay();return Math.floor((Ye.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Ye[t+"s"]=n.range,Ye[t+"s"].utc=n.utc.range,Ye[t+"OfYear"]=function(t){var n=Ye.year(t).getDay();return Math.floor((Ye.dayOfYear(t)+(n+e)%7)/7)}}),Ye.week=Ye.sunday,Ye.weeks=Ye.sunday.range,Ye.weeks.utc=Ye.sunday.utc.range,Ye.weekOfYear=Ye.sundayOfYear;var en={"-":"",_:" ",0:"0"},nn=/^\s*\d+/,rn=/^%/;function on(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function an(t){return new RegExp("^(?:"+t.map(o.requote).join("|")+")","i")}function un(t){var e=new k,n=-1,r=t.length;while(++n<r)e.set(t[n].toLowerCase(),n);return e}function ln(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function sn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function cn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function fn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function hn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.y=pn(+r[0]),n+r[0].length):-1}function dn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function pn(t){return t+(t>68?1900:2e3)}function gn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function yn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function mn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function bn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function xn(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function _n(t,e,n){nn.lastIndex=0;var r=nn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function wn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=w(e)/60|0,i=w(e)%60;return n+on(r,"0",2)+on(i,"0",2)}function Mn(t,e,n){rn.lastIndex=0;var r=rn.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Sn(t){var e=t.length,n=-1;while(++n<e)t[n][0]=this(t[n][0]);return function(e){var n=0,r=t[n];while(!r[1](e))r=t[++n];return r[0](e)}}o.locale=function(t){return{numberFormat:$e(t),timeFormat:tn(t)}};var kn=o.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function On(){}o.format=kn.numberFormat,o.geo={},On.prototype={s:0,t:0,add:function(t){An(t,this.t,En),An(En.s,this.s,this),this.s?this.t+=En.t:this.s=En.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var En=new On;function An(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function Cn(t,e){t&&Pn.hasOwnProperty(t.type)&&Pn[t.type](t,e)}o.geo.stream=function(t,e){t&&Tn.hasOwnProperty(t.type)?Tn[t.type](t,e):Cn(t,e)};var Tn={Feature:function(t,e){Cn(t.geometry,e)},FeatureCollection:function(t,e){var n=t.features,r=-1,i=n.length;while(++r<i)Cn(n[r].geometry,e)}},Pn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){jn(t.coordinates,e,0)},MultiLineString:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)jn(n[r],e,0)},Polygon:function(t,e){Nn(t.coordinates,e)},MultiPolygon:function(t,e){var n=t.coordinates,r=-1,i=n.length;while(++r<i)Nn(n[r],e)},GeometryCollection:function(t,e){var n=t.geometries,r=-1,i=n.length;while(++r<i)Cn(n[r],e)}};function jn(t,e,n){var r,i=-1,o=t.length-n;e.lineStart();while(++i<o)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Nn(t,e){var n=-1,r=t.length;e.polygonStart();while(++n<r)jn(t[n],e,1);e.polygonEnd()}o.geo.area=function(t){return Ln=0,o.geo.stream(t,Xn),Ln};var Ln,Rn,Dn,zn,In,Fn,Bn,Un,Hn,qn,$n,Wn,Gn=new On,Xn={sphere:function(){Ln+=4*jt},point:B,lineStart:B,lineEnd:B,polygonStart:function(){Gn.reset(),Xn.lineStart=Yn},polygonEnd:function(){var t=2*Gn;Ln+=t<0?4*jt+t:t,Xn.lineStart=Xn.lineEnd=Xn.point=B}};function Yn(){var t,e,n,r,i;function o(t,e){t*=Dt,e=e*Dt/2+jt/4;var o=t-n,a=o>=0?1:-1,u=a*o,l=Math.cos(e),s=Math.sin(e),c=i*s,f=r*l+c*Math.cos(u),h=c*a*Math.sin(u);Gn.add(Math.atan2(h,f)),n=t,r=l,i=s}Xn.point=function(a,u){Xn.point=o,n=(t=a)*Dt,r=Math.cos(u=(e=u)*Dt/2+jt/4),i=Math.sin(u)},Xn.lineEnd=function(){o(t,e)}}function Vn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Kn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Zn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Jn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Qn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function tr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function er(t){return[Math.atan2(t[1],t[0]),Ut(t[2])]}function nr(t,e){return w(t[0]-e[0])<Tt&&w(t[1]-e[1])<Tt}o.geo.bounds=function(){var t,e,n,r,i,a,u,l,s,c,f,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=y,h.lineStart=m,h.lineEnd=b,s=0,Xn.polygonStart()},polygonEnd:function(){Xn.polygonEnd(),h.point=d,h.lineStart=g,h.lineEnd=v,Gn<0?(t=-(n=180),e=-(r=90)):s>Tt?r=90:s<-Tt&&(e=-90),f[0]=t,f[1]=n}};function d(i,o){c.push(f=[t=i,n=i]),o<e&&(e=o),o>r&&(r=o)}function p(o,a){var u=Vn([o*Dt,a*Dt]);if(l){var s=Zn(l,u),c=[s[1],-s[0],0],f=Zn(c,s);tr(f),f=er(f);var h=o-i,p=h>0?1:-1,g=f[0]*zt*p,v=w(h)>180;if(v^(p*i<g&&g<p*o)){var y=f[1]*zt;y>r&&(r=y)}else if(g=(g+360)%360-180,v^(p*i<g&&g<p*o)){y=-f[1]*zt;y<e&&(e=y)}else a<e&&(e=a),a>r&&(r=a);v?o<i?x(t,o)>x(t,n)&&(n=o):x(o,n)>x(t,n)&&(t=o):n>=t?(o<t&&(t=o),o>n&&(n=o)):o>i?x(t,o)>x(t,n)&&(n=o):x(o,n)>x(t,n)&&(t=o)}else d(o,a);l=u,i=o}function g(){h.point=p}function v(){f[0]=t,f[1]=n,h.point=d,l=null}function y(t,e){if(l){var n=t-i;s+=w(n)>180?n+(n>0?360:-360):n}else a=t,u=e;Xn.point(t,e),p(t,e)}function m(){Xn.lineStart()}function b(){y(a,u),Xn.lineEnd(),w(s)>Tt&&(t=-(n=180)),f[0]=t,f[1]=n,l=null}function x(t,e){return(e-=t)<0?e+360:e}function _(t,e){return t[0]-e[0]}function M(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){r=n=-(t=e=1/0),c=[],o.geo.stream(i,h);var a=c.length;if(a){c.sort(_);for(var u=1,l=c[0],s=[l];u<a;++u)p=c[u],M(p[0],l)||M(p[1],l)?(x(l[0],p[1])>x(l[0],l[1])&&(l[1]=p[1]),x(p[0],l[1])>x(l[0],l[1])&&(l[0]=p[0])):s.push(l=p);var d,p,g=-1/0;for(a=s.length-1,u=0,l=s[a];u<=a;l=p,++u)p=s[u],(d=x(l[1],p[0]))>g&&(g=d,t=p[0],n=l[1])}return c=f=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),o.geo.centroid=function(t){Rn=Dn=zn=In=Fn=Bn=Un=Hn=qn=$n=Wn=0,o.geo.stream(t,rr);var e=qn,n=$n,r=Wn,i=e*e+n*n+r*r;return i<Pt&&(e=Bn,n=Un,r=Hn,Dn<Tt&&(e=zn,n=In,r=Fn),i=e*e+n*n+r*r,i<Pt)?[NaN,NaN]:[Math.atan2(n,e)*zt,Ut(r/Math.sqrt(i))*zt]};var rr={sphere:B,point:ir,lineStart:ar,lineEnd:ur,polygonStart:function(){rr.lineStart=lr},polygonEnd:function(){rr.lineStart=ar}};function ir(t,e){t*=Dt;var n=Math.cos(e*=Dt);or(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function or(t,e,n){++Rn,zn+=(t-zn)/Rn,In+=(e-In)/Rn,Fn+=(n-Fn)/Rn}function ar(){var t,e,n;function r(r,i){r*=Dt;var o=Math.cos(i*=Dt),a=o*Math.cos(r),u=o*Math.sin(r),l=Math.sin(i),s=Math.atan2(Math.sqrt((s=e*l-n*u)*s+(s=n*a-t*l)*s+(s=t*u-e*a)*s),t*a+e*u+n*l);Dn+=s,Bn+=s*(t+(t=a)),Un+=s*(e+(e=u)),Hn+=s*(n+(n=l)),or(t,e,n)}rr.point=function(i,o){i*=Dt;var a=Math.cos(o*=Dt);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),rr.point=r,or(t,e,n)}}function ur(){rr.point=ir}function lr(){var t,e,n,r,i;function o(t,e){t*=Dt;var o=Math.cos(e*=Dt),a=o*Math.cos(t),u=o*Math.sin(t),l=Math.sin(e),s=r*l-i*u,c=i*a-n*l,f=n*u-r*a,h=Math.sqrt(s*s+c*c+f*f),d=n*a+r*u+i*l,p=h&&-Bt(d)/h,g=Math.atan2(h,d);qn+=p*s,$n+=p*c,Wn+=p*f,Dn+=g,Bn+=g*(n+(n=a)),Un+=g*(r+(r=u)),Hn+=g*(i+(i=l)),or(n,r,i)}rr.point=function(a,u){t=a,e=u,rr.point=o,a*=Dt;var l=Math.cos(u*=Dt);n=l*Math.cos(a),r=l*Math.sin(a),i=Math.sin(u),or(n,r,i)},rr.lineEnd=function(){o(t,e),rr.lineEnd=ur,rr.point=ir}}function sr(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function cr(){return!0}function fr(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(nr(n,r)){i.lineStart();for(var u=0;u<e;++u)i.point((n=t[u])[0],n[1]);i.lineEnd()}else{var l=new dr(n,t,null,!0),s=new dr(n,null,l,!1);l.o=s,o.push(l),a.push(s),l=new dr(r,t,null,!1),s=new dr(r,null,l,!0),l.o=s,o.push(l),a.push(s)}}}),a.sort(e),hr(o),hr(a),o.length){for(var u=0,l=n,s=a.length;u<s;++u)a[u].e=l=!l;var c,f,h=o[0];while(1){var d=h,p=!0;while(d.v)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(u=0,s=c.length;u<s;++u)i.point((f=c[u])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p){c=d.p.z;for(u=c.length-1;u>=0;--u)i.point((f=c[u])[0],f[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);i.lineEnd()}}}function hr(t){if(e=t.length){var e,n,r=0,i=t[0];while(++r<e)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function dr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pr(t,e,n,r){return function(i,a){var u,l=e(a),s=i.invert(r[0],r[1]),c={point:f,lineStart:d,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=_,c.lineEnd=w,u=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=d,c.lineEnd=p,u=o.merge(u);var t=wr(s,g);u.length?(b||(a.polygonStart(),b=!0),fr(u,yr,t,n,a)):t&&(b||(a.polygonStart(),b=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),u=g=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function f(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function h(t,e){var n=i(t,e);l.point(n[0],n[1])}function d(){c.point=h,l.lineStart()}function p(){c.point=f,l.lineEnd()}var g,v,y=vr(),m=e(y),b=!1;function x(t,e){v.push([t,e]);var n=i(t,e);m.point(n[0],n[1])}function _(){m.lineStart(),v=[]}function w(){x(v[0][0],v[0][1]),m.lineEnd();var t,e=m.clean(),n=y.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&e){t=n[0];r=t.length-1;var i,o=-1;if(r>0){b||(a.polygonStart(),b=!0),a.lineStart();while(++o<r)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),u.push(n.filter(gr))}return c}}function gr(t){return t.length>1}function vr(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:B,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function yr(t,e){return((t=t.x)[0]<0?t[1]-Rt-Tt:Rt-t[1])-((e=e.x)[0]<0?e[1]-Rt-Tt:Rt-e[1])}var mr=pr(cr,br,_r,[-jt,-jt/2]);function br(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var u=o>0?jt:-jt,l=w(o-n);w(l-jt)<Tt?(t.point(n,r=(r+a)/2>0?Rt:-Rt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):i!==u&&l>=jt&&(w(n-i)<Tt&&(n-=i*Tt),w(o-u)<Tt&&(o-=u*Tt),r=xr(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=a),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function xr(t,e,n,r){var i,o,a=Math.sin(t-n);return w(a)>Tt?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function _r(t,e,n,r){var i;if(null==t)i=n*Rt,r.point(-jt,i),r.point(0,i),r.point(jt,i),r.point(jt,0),r.point(jt,-i),r.point(0,-i),r.point(-jt,-i),r.point(-jt,0),r.point(-jt,i);else if(w(t[0]-e[0])>Tt){var o=t[0]<e[0]?jt:-jt;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function wr(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Gn.reset();for(var u=0,l=e.length;u<l;++u){var s=e[u],c=s.length;if(c){var f=s[0],h=f[0],d=f[1]/2+jt/4,p=Math.sin(d),g=Math.cos(d),v=1;while(1){v===c&&(v=0),t=s[v];var y=t[0],m=t[1]/2+jt/4,b=Math.sin(m),x=Math.cos(m),_=y-h,w=_>=0?1:-1,M=w*_,S=M>jt,k=p*b;if(Gn.add(Math.atan2(k*w*Math.sin(M),g*x+k*Math.cos(M))),o+=S?_+w*Nt:_,S^h>=n^y>=n){var O=Zn(Vn(f),Vn(t));tr(O);var E=Zn(i,O);tr(E);var A=(S^_>=0?-1:1)*Ut(E[2]);(r>A||r===A&&(O[0]||O[1]))&&(a+=S^_>=0?1:-1)}if(!v++)break;h=y,p=b,g=x,f=t}}}return(o<-Tt||o<Tt&&Gn<-Tt)^1&a}function Mr(t){var e=Math.cos(t),n=e>0,r=w(e)>Tt,i=ui(t,6*Dt);return pr(o,a,i,n?[0,-t]:[-jt,t-jt]);function o(t,n){return Math.cos(t)*Math.cos(n)>e}function a(t){var e,i,a,s,c;return{lineStart:function(){s=a=!1,c=1},point:function(f,h){var d,p=[f,h],g=o(f,h),v=n?g?0:l(f,h):g?l(f+(f<0?jt:-jt),h):0;if(!e&&(s=a=g)&&t.lineStart(),g!==a&&(d=u(e,p),(nr(e,d)||nr(p,d))&&(p[0]+=Tt,p[1]+=Tt,g=o(p[0],p[1]))),g!==a)c=0,g?(t.lineStart(),d=u(p,e),t.point(d[0],d[1])):(d=u(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&n^g){var y;v&i||!(y=u(p,e,!0))||(c=0,n?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!g||e&&nr(e,p)||t.point(p[0],p[1]),e=p,a=g,i=v},lineEnd:function(){a&&t.lineEnd(),e=null},clean:function(){return c|(s&&a)<<1}}}function u(t,n,r){var i=Vn(t),o=Vn(n),a=[1,0,0],u=Zn(i,o),l=Kn(u,u),s=u[0],c=l-s*s;if(!c)return!r&&t;var f=e*l/c,h=-e*s/c,d=Zn(a,u),p=Qn(a,f),g=Qn(u,h);Jn(p,g);var v=d,y=Kn(p,v),m=Kn(v,v),b=y*y-m*(Kn(p,p)-1);if(!(b<0)){var x=Math.sqrt(b),_=Qn(v,(-y-x)/m);if(Jn(_,p),_=er(_),!r)return _;var M,S=t[0],k=n[0],O=t[1],E=n[1];k<S&&(M=S,S=k,k=M);var A=k-S,C=w(A-jt)<Tt,T=C||A<Tt;if(!C&&E<O&&(M=O,O=E,E=M),T?C?O+E>0^_[1]<(w(_[0]-S)<Tt?O:E):O<=_[1]&&_[1]<=E:A>jt^(S<=_[0]&&_[0]<=k)){var P=Qn(v,(-y+x)/m);return Jn(P,p),[_,er(P)]}}}function l(e,r){var i=n?t:jt-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}function Sr(t,e,n,r){return function(i){var o,a=i.a,u=i.b,l=a.x,s=a.y,c=u.x,f=u.y,h=0,d=1,p=c-l,g=f-s;if(o=t-l,p||!(o>0)){if(o/=p,p<0){if(o<h)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>h&&(h=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>h&&(h=o)}else if(p>0){if(o<h)return;o<d&&(d=o)}if(o=e-s,g||!(o>0)){if(o/=g,g<0){if(o<h)return;o<d&&(d=o)}else if(g>0){if(o>d)return;o>h&&(h=o)}if(o=r-s,g||!(o<0)){if(o/=g,g<0){if(o>d)return;o>h&&(h=o)}else if(g>0){if(o<h)return;o<d&&(d=o)}return h>0&&(i.a={x:l+h*p,y:s+h*g}),d<1&&(i.b={x:l+d*p,y:s+d*g}),i}}}}}}var kr=1e9;function Or(t,e,n,r){return function(l){var s,c,f,h,d,p,g,v,y,m,b,x=l,_=vr(),w=Sr(t,e,n,r),M={point:E,lineStart:A,lineEnd:C,polygonStart:function(){l=_,s=[],c=[],b=!0},polygonEnd:function(){l=x,s=o.merge(s);var e=S([t,r]),n=b&&e,i=s.length;(n||i)&&(l.polygonStart(),n&&(l.lineStart(),k(null,null,1,l),l.lineEnd()),i&&fr(s,a,e,k,l),l.polygonEnd()),s=c=f=null}};function S(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var o,a=1,u=c[i],l=u.length,s=u[0];a<l;++a)o=u[a],s[1]<=r?o[1]>r&&Ft(s,o,t)>0&&++e:o[1]<=r&&Ft(s,o,t)<0&&--e,s=o;return 0!==e}function k(o,a,l,s){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(a,l))||u(o,a)<0^l>0)do{s.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+l+4)%4)!==f);else s.point(a[0],a[1])}function O(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function E(t,e){O(t,e)&&l.point(t,e)}function A(){M.point=T,c&&c.push(f=[]),m=!0,y=!1,g=v=NaN}function C(){s&&(T(h,d),p&&y&&_.rejoin(),s.push(_.buffer())),M.point=E,y&&l.lineEnd()}function T(t,e){t=Math.max(-kr,Math.min(kr,t)),e=Math.max(-kr,Math.min(kr,e));var n=O(t,e);if(c&&f.push([t,e]),m)h=t,d=e,p=n,m=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&y)l.point(t,e);else{var r={a:{x:g,y:v},b:{x:t,y:e}};w(r)?(y||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),b=!1):n&&(l.lineStart(),l.point(t,e),b=!1)}g=t,v=e,y=n}return M};function i(r,i){return w(r[0]-t)<Tt?i>0?0:3:w(r[0]-n)<Tt?i>0?2:1:w(r[1]-e)<Tt?i>0?1:0:i>0?3:2}function a(t,e){return u(t.x,e.x)}function u(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function Er(t){var e=0,n=jt/3,r=Qr(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*jt/180,n=t[1]*jt/180):[e/jt*180,n/jt*180]},i}function Ar(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,Ut((i-(t*t+n*n)*r*r)/(2*r))]},a}o.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(u){return arguments.length?(o=Or(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(o.geo.conicEqualArea=function(){return Er(Ar)}).raw=Ar,o.geo.albers=function(){return o.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},o.geo.albersUsa=function(){var t,e,n,r,i=o.geo.albers(),a=o.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=o.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};function s(i){var o=i[0],a=i[1];return t=null,e(o,a),t||(n(o,a),t)||r(o,a),t}return s.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&r>=-.425&&r<-.214?a:o>=.166&&o<.234&&r>=-.214&&r<-.115?u:i).invert(t)},s.stream=function(t){var e=i.stream(t),n=a.stream(t),r=u.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},s.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),u.precision(t),s):i.precision()},s.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),u.scale(t),s.translate(i.translate())):i.scale()},s.translate=function(t){if(!arguments.length)return i.translate();var o=i.scale(),c=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[c-.455*o,f-.238*o],[c+.455*o,f+.238*o]]).stream(l).point,n=a.translate([c-.307*o,f+.201*o]).clipExtent([[c-.425*o+Tt,f+.12*o+Tt],[c-.214*o-Tt,f+.234*o-Tt]]).stream(l).point,r=u.translate([c-.205*o,f+.212*o]).clipExtent([[c-.214*o+Tt,f+.166*o+Tt],[c-.115*o-Tt,f+.234*o-Tt]]).stream(l).point,s},s.scale(1070)};var Cr,Tr,Pr,jr,Nr,Lr,Rr={point:B,lineStart:B,lineEnd:B,polygonStart:function(){Tr=0,Rr.lineStart=Dr},polygonEnd:function(){Rr.lineStart=Rr.lineEnd=Rr.point=B,Cr+=w(Tr/2)}};function Dr(){var t,e,n,r;function i(t,e){Tr+=r*t-n*e,n=t,r=e}Rr.point=function(o,a){Rr.point=i,t=n=o,e=r=a},Rr.lineEnd=function(){i(t,e)}}var zr={point:Ir,lineStart:B,lineEnd:B,polygonStart:B,polygonEnd:B};function Ir(t,e){t<Pr&&(Pr=t),t>Nr&&(Nr=t),e<jr&&(jr=e),e>Lr&&(Lr=e)}function Fr(){var t=Br(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=Br(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function u(){e.push("Z")}return n}function Br(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var Ur,Hr={point:qr,lineStart:$r,lineEnd:Wr,polygonStart:function(){Hr.lineStart=Gr},polygonEnd:function(){Hr.point=qr,Hr.lineStart=$r,Hr.lineEnd=Wr}};function qr(t,e){zn+=t,In+=e,++Fn}function $r(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);Bn+=a*(t+n)/2,Un+=a*(e+r)/2,Hn+=a,qr(t=n,e=r)}Hr.point=function(r,i){Hr.point=n,qr(t=r,e=i)}}function Wr(){Hr.point=qr}function Gr(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);Bn+=a*(n+t)/2,Un+=a*(r+e)/2,Hn+=a,a=r*t-n*e,qn+=a*(n+t),$n+=a*(r+e),Wn+=3*a,qr(n=t,r=e)}Hr.point=function(o,a){Hr.point=i,qr(t=n=o,e=r=a)},Hr.lineEnd=function(){i(t,e)}}function Xr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=u},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:B};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Nt)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function u(){t.closePath()}return n}function Yr(t){var e=.5,n=Math.cos(30*Dt),r=16;function i(t){return(r?a:o)(t)}function o(e){return Zr(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function a(e){var n,i,o,a,l,s,c,f,h,d,p,g,v={point:y,lineStart:m,lineEnd:x,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=m}};function y(n,r){n=t(n,r),e.point(n[0],n[1])}function m(){f=NaN,v.point=b,e.lineStart()}function b(n,i){var o=Vn([n,i]),a=t(n,i);u(f,h,c,d,p,g,f=a[0],h=a[1],c=n,d=o[0],p=o[1],g=o[2],r,e),e.point(f,h)}function x(){v.point=y,e.lineEnd()}function _(){m(),v.point=w,v.lineEnd=M}function w(t,e){b(n=t,e),i=f,o=h,a=d,l=p,s=g,v.point=b}function M(){u(f,h,c,d,p,g,i,o,n,a,l,s,r,e),v.lineEnd=x,x()}return v}function u(r,i,o,a,l,s,c,f,h,d,p,g,v,y){var m=c-r,b=f-i,x=m*m+b*b;if(x>4*e&&v--){var _=a+d,M=l+p,S=s+g,k=Math.sqrt(_*_+M*M+S*S),O=Math.asin(S/=k),E=w(w(S)-1)<Tt||w(o-h)<Tt?(o+h)/2:Math.atan2(M,_),A=t(E,O),C=A[0],T=A[1],P=C-r,j=T-i,N=b*P-m*j;(N*N/x>e||w((m*P+b*j)/x-.5)>.3||a*d+l*p+s*g<n)&&(u(r,i,o,a,l,s,C,T,E,_/=k,M/=k,S,v,y),y.point(C,T),u(C,T,E,_,M,S,c,f,h,d,p,g,v,y))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Vr(t){var e=Yr(function(e,n){return t([e*zt,n*zt])});return function(t){return ti(e(t))}}function Kr(t){this.stream=t}function Zr(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Jr(t){return Qr(function(){return t})()}function Qr(t){var e,n,r,i,a,u,l=Yr(function(t,n){return t=e(t,n),[t[0]*s+i,a-t[1]*s]}),s=150,c=480,f=250,h=0,d=0,p=0,g=0,v=0,y=mr,m=D,b=null,x=null;function _(t){return t=r(t[0]*Dt,t[1]*Dt),[t[0]*s+i,a-t[1]*s]}function w(t){return t=r.invert((t[0]-i)/s,(a-t[1])/s),t&&[t[0]*zt,t[1]*zt]}function M(){r=sr(n=ri(p,g,v),e);var t=e(h,d);return i=c-t[0]*s,a=f+t[1]*s,S()}function S(){return u&&(u.valid=!1,u=null),_}return _.stream=function(t){return u&&(u.valid=!1),u=ti(y(n,l(m(t)))),u.valid=!0,u},_.clipAngle=function(t){return arguments.length?(y=null==t?(b=t,mr):Mr((b=+t)*Dt),S()):b},_.clipExtent=function(t){return arguments.length?(x=t,m=t?Or(t[0][0],t[0][1],t[1][0],t[1][1]):D,S()):x},_.scale=function(t){return arguments.length?(s=+t,M()):s},_.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],M()):[c,f]},_.center=function(t){return arguments.length?(h=t[0]%360*Dt,d=t[1]%360*Dt,M()):[h*zt,d*zt]},_.rotate=function(t){return arguments.length?(p=t[0]%360*Dt,g=t[1]%360*Dt,v=t.length>2?t[2]%360*Dt:0,M()):[p*zt,g*zt,v*zt]},o.rebind(_,l,"precision"),function(){return e=t.apply(this,arguments),_.invert=e.invert&&w,M()}}function ti(t){return Zr(t,function(e,n){t.point(e*Dt,n*Dt)})}function ei(t,e){return[t,e]}function ni(t,e){return[t>jt?t-Nt:t<-jt?t+Nt:t,e]}function ri(t,e,n){return t?e||n?sr(oi(t),ai(e,n)):oi(t):e||n?ai(e,n):ni}function ii(t){return function(e,n){return e+=t,[e>jt?e-Nt:e<-jt?e+Nt:e,n]}}function oi(t){var e=ii(t);return e.invert=ii(-t),e}function ai(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),u=Math.cos(t)*a,l=Math.sin(t)*a,s=Math.sin(e),c=s*n+u*r;return[Math.atan2(l*i-c*o,u*n-s*r),Ut(c*i+l*o)]}return a.invert=function(t,e){var a=Math.cos(e),u=Math.cos(t)*a,l=Math.sin(t)*a,s=Math.sin(e),c=s*i-l*o;return[Math.atan2(l*i+s*o,u*n+c*r),Ut(c*n-u*r)]},a}function ui(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,u){var l=a*e;null!=i?(i=li(n,i),o=li(n,o),(a>0?i<o:i>o)&&(i+=a*Nt)):(i=t+a*Nt,o=t-.5*l);for(var s,c=i;a>0?c>o:c<o;c-=l)u.point((s=er([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],s[1])}}function li(t,e){var n=Vn(e);n[0]-=t,tr(n);var r=Bt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Tt)%(2*Math.PI)}function si(t,e,n){var r=o.range(t,e-Tt,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function ci(t,e,n){var r=o.range(t,e-Tt,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function fi(t){return t.source}function hi(t){return t.target}function di(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),u=Math.sin(r),l=i*Math.cos(t),s=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),h=2*Math.asin(Math.sqrt(Wt(r-e)+i*a*Wt(n-t))),d=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*l+e*c,i=n*s+e*f,a=n*o+e*u;return[Math.atan2(i,r)*zt,Math.atan2(a,Math.sqrt(r*r+i*i))*zt]}:function(){return[t*zt,e*zt]};return p.distance=h,p}o.geo.path=function(){var t,e,n,r,i,a=4.5;function u(t){return t&&("function"===typeof a&&r.pointRadius(+a.apply(this,arguments)),i&&i.valid||(i=n(r)),o.geo.stream(t,i)),r.result()}function l(){return i=null,u}return u.area=function(t){return Cr=0,o.geo.stream(t,n(Rr)),Cr},u.centroid=function(t){return zn=In=Fn=Bn=Un=Hn=qn=$n=Wn=0,o.geo.stream(t,n(Hr)),Wn?[qn/Wn,$n/Wn]:Hn?[Bn/Hn,Un/Hn]:Fn?[zn/Fn,In/Fn]:[NaN,NaN]},u.bounds=function(t){return Nr=Lr=-(Pr=jr=1/0),o.geo.stream(t,n(zr)),[[Pr,jr],[Nr,Lr]]},u.projection=function(e){return arguments.length?(n=(t=e)?e.stream||Vr(e):D,l()):t},u.context=function(t){return arguments.length?(r=null==(e=t)?new Fr:new Xr(t),"function"!==typeof a&&r.pointRadius(a),l()):e},u.pointRadius=function(t){return arguments.length?(a="function"===typeof t?t:(r.pointRadius(+t),+t),u):a},u.projection(o.geo.albersUsa()).context(null)},o.geo.transform=function(t){return{stream:function(e){var n=new Kr(e);for(var r in t)n[r]=t[r];return n}}},Kr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},o.geo.projection=Jr,o.geo.projectionMutator=Qr,(o.geo.equirectangular=function(){return Jr(ei)}).raw=ei.invert=ei,o.geo.rotation=function(t){function e(e){return e=t(e[0]*Dt,e[1]*Dt),e[0]*=zt,e[1]*=zt,e}return t=ri(t[0]%360*Dt,t[1]*Dt,t.length>2?t[2]*Dt:0),e.invert=function(e){return e=t.invert(e[0]*Dt,e[1]*Dt),e[0]*=zt,e[1]*=zt,e},e},ni.invert=ei,o.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"===typeof n?n.apply(this,arguments):n,r=ri(-t[0]*Dt,-t[1]*Dt,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=zt,t[1]*=zt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=ui((t=+n)*Dt,r*Dt),i):t},i.precision=function(n){return arguments.length?(e=ui(t*Dt,(r=+n)*Dt),i):r},i.angle(90)},o.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Dt,i=t[1]*Dt,o=e[1]*Dt,a=Math.sin(r),u=Math.cos(r),l=Math.sin(i),s=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=s*c-l*f*u)*n),l*c+s*f*u)},o.geo.graticule=function(){var t,e,n,r,i,a,u,l,s,c,f,h,d=10,p=d,g=90,v=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:b()}}function b(){return o.range(Math.ceil(r/g)*g,n,g).map(f).concat(o.range(Math.ceil(l/v)*v,u,v).map(h)).concat(o.range(Math.ceil(e/d)*d,t,d).filter(function(t){return w(t%g)>Tt}).map(s)).concat(o.range(Math.ceil(a/p)*p,i,p).filter(function(t){return w(t%v)>Tt}).map(c))}return m.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(u).slice(1),f(n).reverse().slice(1),h(l).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.majorExtent(t).minorExtent(t):m.minorExtent()},m.majorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],l=+t[0][1],u=+t[1][1],r>n&&(t=r,r=n,n=t),l>u&&(t=l,l=u,u=t),m.precision(y)):[[r,l],[n,u]]},m.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],a=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),a>i&&(n=a,a=i,i=n),m.precision(y)):[[e,a],[t,i]]},m.step=function(t){return arguments.length?m.majorStep(t).minorStep(t):m.minorStep()},m.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],m):[g,v]},m.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],m):[d,p]},m.precision=function(o){return arguments.length?(y=+o,s=si(a,i,90),c=ci(e,t,y),f=si(l,u,90),h=ci(r,n,y),m):y},m.majorExtent([[-180,-90+Tt],[180,90-Tt]]).minorExtent([[-180,-80-Tt],[180,80+Tt]])},o.geo.greatArc=function(){var t,e,n=fi,r=hi;function i(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||r.apply(this,arguments)]}}return i.distance=function(){return o.geo.distance(t||n.apply(this,arguments),e||r.apply(this,arguments))},i.source=function(e){return arguments.length?(n=e,t="function"===typeof e?null:e,i):n},i.target=function(t){return arguments.length?(r=t,e="function"===typeof t?null:t,i):r},i.precision=function(){return arguments.length?i:0},i},o.geo.interpolate=function(t,e){return di(t[0]*Dt,t[1]*Dt,e[0]*Dt,e[1]*Dt)},o.geo.length=function(t){return Ur=0,o.geo.stream(t,pi),Ur};var pi={sphere:B,point:B,lineStart:gi,lineEnd:B,polygonStart:B,polygonEnd:B};function gi(){var t,e,n;function r(r,i){var o=Math.sin(i*=Dt),a=Math.cos(i),u=w((r*=Dt)-t),l=Math.cos(u);Ur+=Math.atan2(Math.sqrt((u=a*Math.sin(u))*u+(u=n*o-e*a*l)*u),e*o+n*a*l),t=r,e=o,n=a}pi.point=function(i,o){t=i*Dt,e=Math.sin(o*=Dt),n=Math.cos(o),pi.point=r},pi.lineEnd=function(){pi.point=pi.lineEnd=B}}function vi(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var yi=vi(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(o.geo.azimuthalEqualArea=function(){return Jr(yi)}).raw=yi;var mi=vi(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},D);function bi(t,e){var n=Math.cos(t),r=function(t){return Math.tan(jt/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return wi;function a(t,e){o>0?e<-Rt+Tt&&(e=-Rt+Tt):e>Rt-Tt&&(e=Rt-Tt);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=It(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Rt]},a}function xi(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(w(r)<Tt)return ei;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-It(r)*Math.sqrt(t*t+n*n)]},o}(o.geo.azimuthalEquidistant=function(){return Jr(mi)}).raw=mi,(o.geo.conicConformal=function(){return Er(bi)}).raw=bi,(o.geo.conicEquidistant=function(){return Er(xi)}).raw=xi;var _i=vi(function(t){return 1/t},Math.atan);function wi(t,e){return[t,Math.log(Math.tan(jt/4+e/2))]}function Mi(t){var e,n=Jr(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var u=jt*r(),l=i();o([[l[0]-u,l[1]-u],[l[0]+u,l[1]+u]])}}else e&&(a=null);return a},n.clipExtent(null)}(o.geo.gnomonic=function(){return Jr(_i)}).raw=_i,wi.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Rt]},(o.geo.mercator=function(){return Mi(wi)}).raw=wi;var Si=vi(function(){return 1},Math.asin);(o.geo.orthographic=function(){return Jr(Si)}).raw=Si;var ki=vi(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Oi(t,e){return[Math.log(Math.tan(jt/4+e/2)),-t]}function Ei(t){return t[0]}function Ai(t){return t[1]}function Ci(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){while(r>1&&Ft(t[n[r-2]],t[n[r-1]],t[i])<=0)--r;n[r++]=i}return n.slice(0,r)}function Ti(t,e){return t[0]-e[0]||t[1]-e[1]}(o.geo.stereographic=function(){return Jr(ki)}).raw=ki,Oi.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Rt]},(o.geo.transverseMercator=function(){var t=Mi(Oi),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Oi,o.geom={},o.geom.hull=function(t){var e=Ei,n=Ai;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=Ee(e),o=Ee(n),a=t.length,u=[],l=[];for(r=0;r<a;r++)u.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(u.sort(Ti),r=0;r<a;r++)l.push([u[r][0],-u[r][1]]);var s=Ci(u),c=Ci(l),f=c[0]===s[0],h=c[c.length-1]===s[s.length-1],d=[];for(r=s.length-1;r>=0;--r)d.push(t[u[s[r]][2]]);for(r=+f;r<c.length-h;++r)d.push(t[u[c[r]][2]]);return d}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},o.geom.polygon=function(t){return X(t,Pi),t};var Pi=o.geom.polygon.prototype=[];function ji(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Ni(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,u=r[0]-o,l=t[1],s=n[1],c=e[1]-l,f=r[1]-s,h=(u*(l-s)-f*(i-o))/(f*a-u*c);return[i+h*a,l+h*c]}function Li(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}Pi.area=function(){var t,e=-1,n=this.length,r=this[n-1],i=0;while(++e<n)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Pi.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,u=this[i-1];arguments.length||(t=-1/(6*this.area()));while(++r<i)e=u,u=this[r],n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,a+=(e[1]+u[1])*n;return[o*t,a*t]},Pi.clip=function(t){var e,n,r,i,o,a,u=Li(t),l=-1,s=this.length-Li(this),c=this[s-1];while(++l<s){e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-u)-1],n=-1;while(++n<r)a=e[n],ji(a,c,i)?(ji(o,c,i)||t.push(Ni(o,a,c,i)),t.push(a)):ji(o,c,i)&&t.push(Ni(o,a,c,i)),o=a;u&&t.push(t[0]),c=i}return t};var Ri,Di,zi,Ii,Fi,Bi=[],Ui=[];function Hi(){so(this),this.edge=this.site=this.circle=null}function qi(t){var e=Bi.pop()||new Hi;return e.site=t,e}function $i(t){to(t),zi.remove(t),Bi.push(t),so(t)}function Wi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,u=[t];$i(t);var l=o;while(l.circle&&w(n-l.circle.x)<Tt&&w(r-l.circle.cy)<Tt)o=l.P,u.unshift(l),$i(l),l=o;u.unshift(l),to(l);var s=a;while(s.circle&&w(n-s.circle.x)<Tt&&w(r-s.circle.cy)<Tt)a=s.N,u.push(s),$i(s),s=a;u.push(s),to(s);var c,f=u.length;for(c=1;c<f;++c)s=u[c],l=u[c-1],ao(s.edge,l.site,s.site,i);l=u[0],s=u[f-1],s.edge=io(l.site,s.site,null,i),Qi(l),Qi(s)}function Gi(t){var e,n,r,i,o=t.x,a=t.y,u=zi._;while(u)if(r=Xi(u,a)-o,r>Tt)u=u.L;else{if(i=o-Yi(u,a),!(i>Tt)){r>-Tt?(e=u.P,n=u):i>-Tt?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}var l=qi(t);if(zi.insert(e,l),e||n){if(e===n)return to(e),n=qi(e.site),zi.insert(l,n),l.edge=n.edge=io(e.site,l.site),Qi(e),void Qi(n);if(n){to(e),to(n);var s=e.site,c=s.x,f=s.y,h=t.x-c,d=t.y-f,p=n.site,g=p.x-c,v=p.y-f,y=2*(h*v-d*g),m=h*h+d*d,b=g*g+v*v,x={x:(v*m-d*b)/y+c,y:(h*b-g*m)/y+f};ao(n.edge,s,p,x),l.edge=io(s,t,null,x),n.edge=io(t,p,null,x),Qi(e),Qi(n)}else l.edge=io(e.site,l.site)}}function Xi(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var u=n.x,l=n.y,s=l-e;if(!s)return u;var c=u-r,f=1/o-1/s,h=c/s;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*s)-l+s/2+i-o/2)))/f+r:(r+u)/2}function Yi(t,e){var n=t.N;if(n)return Xi(n,e);var r=t.site;return r.y===e?r.x:1/0}function Vi(t){this.site=t,this.edges=[]}function Ki(t){var e,n,r,i,o,a,u,l,s,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=Di,v=g.length;while(v--)if(o=g[v],o&&o.prepare()){u=o.edges,l=u.length,a=0;while(a<l)c=u[a].end(),r=c.x,i=c.y,s=u[++a%l].start(),e=s.x,n=s.y,(w(r-e)>Tt||w(i-n)>Tt)&&(u.splice(a,0,new uo(oo(o.site,c,w(r-f)<Tt&&p-i>Tt?{x:f,y:w(e-f)<Tt?n:p}:w(i-p)<Tt&&h-r>Tt?{x:w(n-p)<Tt?e:h,y:p}:w(r-h)<Tt&&i-d>Tt?{x:h,y:w(e-h)<Tt?n:d}:w(i-d)<Tt&&r-f>Tt?{x:w(n-d)<Tt?e:f,y:d}:null),o.site,null)),++l)}}function Zi(t,e){return e.angle-t.angle}function Ji(){so(this),this.x=this.y=this.arc=this.site=this.cy=null}function Qi(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,u=i.y,l=r.x-a,s=r.y-u,c=o.x-a,f=o.y-u,h=2*(l*f-s*c);if(!(h>=-Pt)){var d=l*l+s*s,p=c*c+f*f,g=(f*d-s*p)/h,v=(l*p-c*d)/h,y=(f=v+u,Ui.pop()||new Ji);y.arc=t,y.site=i,y.x=g+a,y.y=f+Math.sqrt(g*g+v*v),y.cy=f,t.circle=y;var m=null,b=Fi._;while(b)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}Fi.insert(m,y),m||(Ii=y)}}}}function to(t){var e=t.circle;e&&(e.P||(Ii=e.N),Fi.remove(e),Ui.push(e),so(e),t.circle=null)}function eo(t){var e,n=Ri,r=Sr(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;while(i--)e=n[i],(!no(e,t)||!r(e)||w(e.a.x-e.b.x)<Tt&&w(e.a.y-e.b.y)<Tt)&&(e.a=e.b=null,n.splice(i,1))}function no(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],u=e[1][0],l=e[0][1],s=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2,y=(d+g)/2;if(g===d){if(v<a||v>=u)return;if(h>p){if(o){if(o.y>=s)return}else o={x:v,y:l};n={x:v,y:s}}else{if(o){if(o.y<l)return}else o={x:v,y:s};n={x:v,y:l}}}else if(r=(h-p)/(g-d),i=y-r*v,r<-1||r>1)if(h>p){if(o){if(o.y>=s)return}else o={x:(l-i)/r,y:l};n={x:(s-i)/r,y:s}}else{if(o){if(o.y<l)return}else o={x:(s-i)/r,y:s};n={x:(l-i)/r,y:l}}else if(d<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};n={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function ro(t,e){this.l=t,this.r=e,this.a=this.b=null}function io(t,e,n,r){var i=new ro(t,e);return Ri.push(i),n&&ao(i,t,e,n),r&&ao(i,e,t,r),Di[t.i].edges.push(new uo(i,t,e)),Di[e.i].edges.push(new uo(i,e,t)),i}function oo(t,e,n){var r=new ro(t,null);return r.a=e,r.b=n,Ri.push(r),r}function ao(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function uo(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function lo(){this._=null}function so(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function co(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function fo(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ho(t){while(t.L)t=t.L;return t}function po(t,e){var n,r,i,o=t.sort(go).pop();Ri=[],Di=new Array(t.length),zi=new lo,Fi=new lo;while(1)if(i=Ii,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(Di[o.i]=new Vi(o),Gi(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;Wi(i.arc)}e&&(eo(e),Ki(e));var a={cells:Di,edges:Ri};return zi=Fi=Ri=Di=null,a}function go(t,e){return e.y-t.y||e.x-t.x}Vi.prototype.prepare=function(){var t,e=this.edges,n=e.length;while(n--)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Zi),e.length},uo.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},lo.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){t=t.R;while(t.L)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ho(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);e.L=e.R=null,e.U=n,e.C=!0,t=e;while(n&&n.C)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(co(this,n),t=n,n=t.U),n.C=!1,r.C=!0,fo(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(fo(this,n),t=n,n=t.U),n.C=!1,r.C=!0,co(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?ho(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,co(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,fo(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,co(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,fo(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,co(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,fo(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},o.geom.voronoi=function(t){var e=Ei,n=Ai,r=e,i=n,o=vo;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return po(u(t),o).cells.forEach(function(o,u){var l=o.edges,s=o.site,c=e[u]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):s.x>=n&&s.x<=i&&s.y>=r&&s.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[];c.point=t[u]}),e}function u(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/Tt)*Tt,y:Math.round(i(t,e)/Tt)*Tt,i:e}})}return a.links=function(t){return po(u(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return po(u(t)).cells.forEach(function(n,r){var i,o=n.site,a=n.edges.sort(Zi),u=-1,l=a.length,s=a[l-1].edge,c=s.l===o?s.r:s.l;while(++u<l)s,i=c,s=a[u].edge,c=s.l===o?s.r:s.l,r<i.i&&r<c.i&&yo(o,i,c)<0&&e.push([t[r],t[i.i],t[c.i]])}),e},a.x=function(t){return arguments.length?(r=Ee(e=t),a):e},a.y=function(t){return arguments.length?(i=Ee(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?vo:t,a):o===vo?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===vo?null:o&&o[1]},a};var vo=[[-1e6,-1e6],[1e6,1e6]];function yo(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function mo(t){return t.x}function bo(t){return t.y}function xo(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function _o(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),u=.5*(r+o),l=e.nodes;l[0]&&_o(t,l[0],n,r,a,u),l[1]&&_o(t,l[1],a,r,i,u),l[2]&&_o(t,l[2],n,u,a,o),l[3]&&_o(t,l[3],a,u,i,o)}}function wo(t,e,n,r,i,o,a){var u,l=1/0;return function t(s,c,f,h,d){if(!(c>o||f>a||h<r||d<i)){if(p=s.point){var p,g=e-s.x,v=n-s.y,y=g*g+v*v;if(y<l){var m=Math.sqrt(l=y);r=e-m,i=n-m,o=e+m,a=n+m,u=p}}for(var b=s.nodes,x=.5*(c+h),_=.5*(f+d),w=e>=x,M=n>=_,S=M<<1|w,k=S+4;S<k;++S)if(s=b[3&S])switch(3&S){case 0:t(s,c,f,x,_);break;case 1:t(s,x,f,h,_);break;case 2:t(s,c,_,x,d);break;case 3:t(s,x,_,h,d);break}}}(t,r,i,o,a),u}function Mo(t,e){t=o.rgb(t),e=o.rgb(e);var n=t.r,r=t.g,i=t.b,a=e.r-n,u=e.g-r,l=e.b-i;return function(t){return"#"+xe(Math.round(n+a*t))+xe(Math.round(r+u*t))+xe(Math.round(i+l*t))}}function So(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Co(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function ko(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Oo(t,e){var n,r,i,o=Eo.lastIndex=Ao.lastIndex=0,a=-1,u=[],l=[];t+="",e+="";while((n=Eo.exec(t))&&(r=Ao.exec(e)))(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:ko(n,r)})),o=Ao.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)u[(n=l[r]).i]=n.x(t);return u.join("")})}o.geom.delaunay=function(t){return o.geom.voronoi().triangles(t)},o.geom.quadtree=function(t,e,n,r,i){var o,a=Ei,u=Ai;if(o=arguments.length)return a=mo,u=bo,3===o&&(i=n,r=e,n=e=0),l(t);function l(t){var l,s,c,f,h,d,p,g,v,y=Ee(a),m=Ee(u);if(null!=e)d=e,p=n,g=r,v=i;else if(g=v=-(d=p=1/0),s=[],c=[],h=t.length,o)for(f=0;f<h;++f)l=t[f],l.x<d&&(d=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>v&&(v=l.y),s.push(l.x),c.push(l.y);else for(f=0;f<h;++f){var b=+y(l=t[f],f),x=+m(l,f);b<d&&(d=b),x<p&&(p=x),b>g&&(g=b),x>v&&(v=x),s.push(b),c.push(x)}var _=g-d,M=v-p;function S(t,e,n,r,i,o,a,u){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,s=t.y;if(null!=l)if(w(l-n)+w(s-r)<.01)k(t,e,n,r,i,o,a,u);else{var c=t.point;t.x=t.y=t.point=null,k(t,c,l,s,i,o,a,u),k(t,e,n,r,i,o,a,u)}else t.x=n,t.y=r,t.point=e}else k(t,e,n,r,i,o,a,u)}function k(t,e,n,r,i,o,a,u){var l=.5*(i+a),s=.5*(o+u),c=n>=l,f=r>=s,h=f<<1|c;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=xo()),c?i=l:a=l,f?o=s:u=s,S(t,e,n,r,i,o,a,u)}_>M?v=p+_:g=d+M;var O=xo();if(O.add=function(t){S(O,t,+y(t,++f),+m(t,f),d,p,g,v)},O.visit=function(t){_o(t,O,d,p,g,v)},O.find=function(t){return wo(O,t[0],t[1],d,p,g,v)},f=-1,null==e){while(++f<h)S(O,t[f],s[f],c[f],d,p,g,v);--f}else t.forEach(O.add);return s=c=t=l=null,O}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(u=t,l):u},l.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,n],[r,i]]},l.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),l):null==e?null:[r-e,i-n]},l},o.interpolateRgb=Mo,o.interpolateObject=So,o.interpolateNumber=ko,o.interpolateString=Oo;var Eo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ao=new RegExp(Eo.source,"g");function Co(t,e){var n,r=o.interpolators.length;while(--r>=0&&!(n=o.interpolators[r](t,e)));return n}function To(t,e){var n,r=[],i=[],o=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;n<u;++n)r.push(Co(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<u;++n)i[n]=r[n](t);return i}}o.interpolate=Co,o.interpolators=[function(t,e){var n=typeof e;return("string"===n?Oe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Mo:Oo:e instanceof Jt?Mo:Array.isArray(e)?To:"object"===n&&isNaN(e)?So:ko)(t,e)}],o.interpolateArray=To;var Po=function(){return D},jo=o.map({linear:Po,poly:Bo,quad:function(){return zo},cubic:function(){return Io},sin:function(){return Uo},exp:function(){return Ho},circle:function(){return qo},elastic:$o,back:Wo,bounce:function(){return Go}}),No=o.map({in:D,out:Ro,"in-out":Do,"out-in":function(t){return Do(Ro(t))}});function Lo(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function Ro(t){return function(e){return 1-t(1-e)}}function Do(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function zo(t){return t*t}function Io(t){return t*t*t}function Fo(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function Bo(t){return function(e){return Math.pow(e,t)}}function Uo(t){return 1-Math.cos(t*Rt)}function Ho(t){return Math.pow(2,10*(t-1))}function qo(t){return 1-Math.sqrt(1-t*t)}function $o(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Nt*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Nt/e)}}function Wo(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Go(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Xo(t,e){t=o.hcl(t),e=o.hcl(e);var n=t.h,r=t.c,i=t.l,a=e.h-n,u=e.c-r,l=e.l-i;return isNaN(u)&&(u=0,r=isNaN(r)?e.c:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return ie(n+a*t,r+u*t,i+l*t)+""}}function Yo(t,e){t=o.hsl(t),e=o.hsl(e);var n=t.h,r=t.s,i=t.l,a=e.h-n,u=e.s-r,l=e.l-i;return isNaN(u)&&(u=0,r=isNaN(r)?e.s:r),isNaN(a)?(a=0,n=isNaN(n)?e.h:n):a>180?a-=360:a<-180&&(a+=360),function(t){return ee(n+a*t,r+u*t,i+l*t)+""}}function Vo(t,e){t=o.lab(t),e=o.lab(e);var n=t.l,r=t.a,i=t.b,a=e.l-n,u=e.a-r,l=e.b-i;return function(t){return fe(n+a*t,r+u*t,i+l*t)+""}}function Ko(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Zo(t){var e=[t.a,t.b],n=[t.c,t.d],r=Qo(e),i=Jo(e,n),o=Qo(ta(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*zt,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*zt:0}function Jo(t,e){return t[0]*e[0]+t[1]*e[1]}function Qo(t){var e=Math.sqrt(Jo(t,t));return e&&(t[0]/=e,t[1]/=e),e}function ta(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}o.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=jo.get(n)||Po,r=No.get(r)||D,Lo(r(n.apply(null,a.call(arguments,1))))},o.interpolateHcl=Xo,o.interpolateHsl=Yo,o.interpolateLab=Vo,o.interpolateRound=Ko,o.transform=function(t){var e=l.createElementNS(o.ns.prefix.svg,"g");return(o.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Zo(n?n.matrix:ea)})(t)},Zo.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ea={a:1,b:0,c:0,d:1,e:0,f:0};function na(t){return t.length?t.pop()+",":""}function ra(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:ko(t[0],e[0])},{i:i-2,x:ko(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function ia(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(na(n)+"rotate(",null,")")-2,x:ko(t,e)})):e&&n.push(na(n)+"rotate("+e+")")}function oa(t,e,n,r){t!==e?r.push({i:n.push(na(n)+"skewX(",null,")")-2,x:ko(t,e)}):e&&n.push(na(n)+"skewX("+e+")")}function aa(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(na(n)+"scale(",null,",",null,")");r.push({i:i-4,x:ko(t[0],e[0])},{i:i-2,x:ko(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(na(n)+"scale("+e+")")}function ua(t,e){var n=[],r=[];return t=o.transform(t),e=o.transform(e),ra(t.translate,e.translate,n,r),ia(t.rotate,e.rotate,n,r),oa(t.skew,e.skew,n,r),aa(t.scale,e.scale,n,r),t=e=null,function(t){var e,i=-1,o=r.length;while(++i<o)n[(e=r[i]).i]=e.x(t);return n.join("")}}function la(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function sa(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ca(t){var e=t.source,n=t.target,r=ha(e,n),i=[e];while(e!==r)e=e.parent,i.push(e);var o=i.length;while(n!==r)i.splice(o,0,n),n=n.parent;return i}function fa(t){var e=[],n=t.parent;while(null!=n)e.push(t),t=n,n=n.parent;return e.push(t),e}function ha(t,e){if(t===e)return t;var n=fa(t),r=fa(e),i=n.pop(),o=r.pop(),a=null;while(i===o)a=i,i=n.pop(),o=r.pop();return a}function da(t){t.fixed|=2}function pa(t){t.fixed&=-7}function ga(t){t.fixed|=4,t.px=t.x,t.py=t.y}function va(t){t.fixed&=-5}function ya(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf){var o,a=t.nodes,u=a.length,l=-1;while(++l<u)o=a[l],null!=o&&(ya(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy)}if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var s=e*n[t.point.index];t.charge+=t.pointCharge=s,r+=s*t.point.x,i+=s*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}o.interpolateTransform=ua,o.layout={},o.layout.bundle=function(){return function(t){var e=[],n=-1,r=t.length;while(++n<r)e.push(ca(t[n]));return e}},o.layout.chord=function(){var t,e,n,r,i,a,u,l={},s=0;function c(){var l,c,h,d,p,g={},v=[],y=o.range(r),m=[];t=[],e=[],l=0,d=-1;while(++d<r){c=0,p=-1;while(++p<r)c+=n[d][p];v.push(c),m.push(o.range(r)),l+=c}i&&y.sort(function(t,e){return i(v[t],v[e])}),a&&m.forEach(function(t,e){t.sort(function(t,r){return a(n[e][t],n[e][r])})}),l=(Nt-s*r)/l,c=0,d=-1;while(++d<r){h=c,p=-1;while(++p<r){var b=y[d],x=m[b][p],_=n[b][x],w=c,M=c+=_*l;g[b+"-"+x]={index:b,subindex:x,startAngle:w,endAngle:M,value:_}}e[b]={index:b,startAngle:h,endAngle:c,value:v[b]},c+=s}d=-1;while(++d<r){p=d-1;while(++p<r){var S=g[d+"-"+p],k=g[p+"-"+d];(S.value||k.value)&&t.push(S.value<k.value?{source:k,target:S}:{source:S,target:k})}}u&&f()}function f(){t.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,t=e=null,l):n},l.padding=function(n){return arguments.length?(s=n,t=e=null,l):s},l.sortGroups=function(n){return arguments.length?(i=n,t=e=null,l):i},l.sortSubgroups=function(e){return arguments.length?(a=e,t=null,l):a},l.sortChords=function(e){return arguments.length?(u=e,t&&f(),l):u},l.chords=function(){return t||c(),t},l.groups=function(){return e||c(),e},l},o.layout.force=function(){var t,e,n,r,i,a,u={},l=o.dispatch("start","tick","end"),s=[1,1],c=.9,f=ma,h=ba,d=-30,p=xa,g=.1,v=.64,y=[],m=[];function b(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,u=i-n,l=o*o+a*a;if(u*u/v<l){if(l<p){var s=e.charge/l;t.px-=o*s,t.py-=a*s}return!0}if(e.point&&l&&l<p){s=e.pointCharge/l;t.px-=o*s,t.py-=a*s}}return!e.charge}}function x(t){t.px=o.event.x,t.py=o.event.y,u.resume()}return u.tick=function(){if((n*=.99)<.005)return t=null,l.end({type:"end",alpha:n=0}),!0;var e,u,f,h,p,v,x,_,w,M=y.length,S=m.length;for(u=0;u<S;++u)f=m[u],h=f.source,p=f.target,_=p.x-h.x,w=p.y-h.y,(v=_*_+w*w)&&(v=n*i[u]*((v=Math.sqrt(v))-r[u])/v,_*=v,w*=v,p.x-=_*(x=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=w*x,h.x+=_*(x=1-x),h.y+=w*x);if((x=n*g)&&(_=s[0]/2,w=s[1]/2,u=-1,x))while(++u<M)f=y[u],f.x+=(_-f.x)*x,f.y+=(w-f.y)*x;if(d){ya(e=o.geom.quadtree(y),n,a),u=-1;while(++u<M)(f=y[u]).fixed||e.visit(b(f))}u=-1;while(++u<M)f=y[u],f.fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);l.tick({type:"tick",alpha:n})},u.nodes=function(t){return arguments.length?(y=t,u):y},u.links=function(t){return arguments.length?(m=t,u):m},u.size=function(t){return arguments.length?(s=t,u):s},u.linkDistance=function(t){return arguments.length?(f="function"===typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(h="function"===typeof t?t:+t,u):h},u.friction=function(t){return arguments.length?(c=+t,u):c},u.charge=function(t){return arguments.length?(d="function"===typeof t?t:+t,u):d},u.chargeDistance=function(t){return arguments.length?(p=t*t,u):Math.sqrt(p)},u.gravity=function(t){return arguments.length?(g=+t,u):g},u.theta=function(t){return arguments.length?(v=t*t,u):Math.sqrt(v)},u.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,l.end({type:"end",alpha:n=0})):e>0&&(l.start({type:"start",alpha:n=e}),t=ze(u.tick)),u):n},u.start=function(){var t,e,n,o=y.length,l=m.length,c=s[0],p=s[1];for(t=0;t<o;++t)(n=y[t]).index=t,n.weight=0;for(t=0;t<l;++t)n=m[t],"number"==typeof n.source&&(n.source=y[n.source]),"number"==typeof n.target&&(n.target=y[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<o;++t)n=y[t],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"===typeof f)for(t=0;t<l;++t)r[t]=+f.call(this,m[t],t);else for(t=0;t<l;++t)r[t]=f;if(i=[],"function"===typeof h)for(t=0;t<l;++t)i[t]=+h.call(this,m[t],t);else for(t=0;t<l;++t)i[t]=h;if(a=[],"function"===typeof d)for(t=0;t<o;++t)a[t]=+d.call(this,y[t],t);else for(t=0;t<o;++t)a[t]=d;function g(n,r){if(!e){for(e=new Array(o),s=0;s<o;++s)e[s]=[];for(s=0;s<l;++s){var i=m[s];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}var a,u=e[t],s=-1,c=u.length;while(++s<c)if(!isNaN(a=u[s][n]))return a;return Math.random()*r}return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){if(e||(e=o.behavior.drag().origin(D).on("dragstart.force",da).on("drag.force",x).on("dragend.force",pa)),!arguments.length)return e;this.on("mouseover.force",ga).on("mouseout.force",va).call(e)},o.rebind(u,l,"on")};var ma=20,ba=1,xa=1/0;function _a(t,e){return o.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Ea,t}function wa(t,e){var n=[t];while(null!=(t=n.pop())){var r,i;if(e(t),(i=t.children)&&(r=i.length))while(--r>=0)n.push(i[r])}}function Ma(t,e){var n=[t],r=[];while(null!=(t=n.pop()))if(r.push(t),(o=t.children)&&(i=o.length)){var i,o,a=-1;while(++a<i)n.push(o[a])}while(null!=(t=r.pop()))e(t)}function Sa(t){return t.children}function ka(t){return t.value}function Oa(t,e){return e.value-t.value}function Ea(t){return o.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}o.layout.hierarchy=function(){var t=Oa,e=Sa,n=ka;function r(i){var o,a=[i],u=[];i.depth=0;while(null!=(o=a.pop()))if(u.push(o),(s=e.call(r,o,o.depth))&&(l=s.length)){var l,s,c;while(--l>=0)a.push(c=s[l]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=s}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Ma(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),u}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(wa(t,function(t){t.children&&(t.value=0)}),Ma(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},o.layout.partition=function(){var t=o.layout.hierarchy(),e=[1,1];function n(t,e,r,i){var o=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,u,l,s=-1;r=t.value?r/t.value:0;while(++s<a)n(u=o[s],e,l=u.value*r,i),e+=l}}function r(t){var e=t.children,n=0;if(e&&(i=e.length)){var i,o=-1;while(++o<i)n=Math.max(n,r(e[o]))}return 1+n}function i(i,o){var a=t.call(this,i,o);return n(a[0],0,e[0],e[1]/r(a[0])),a}return i.size=function(t){return arguments.length?(e=t,i):e},_a(i,t)},o.layout.pie=function(){var t=Number,e=Aa,n=0,r=Nt,i=0;function a(u){var l,s=u.length,c=u.map(function(e,n){return+t.call(a,e,n)}),f=+("function"===typeof n?n.apply(this,arguments):n),h=("function"===typeof r?r.apply(this,arguments):r)-f,d=Math.min(Math.abs(h)/s,+("function"===typeof i?i.apply(this,arguments):i)),p=d*(h<0?-1:1),g=o.sum(c),v=g?(h-s*p)/g:0,y=o.range(s),m=[];return null!=e&&y.sort(e===Aa?function(t,e){return c[e]-c[t]}:function(t,n){return e(u[t],u[n])}),y.forEach(function(t){m[t]={data:u[t],value:l=c[t],startAngle:f,endAngle:f+=l*v+p,padAngle:d}}),m}return a.value=function(e){return arguments.length?(t=e,a):t},a.sort=function(t){return arguments.length?(e=t,a):e},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(r=t,a):r},a.padAngle=function(t){return arguments.length?(i=t,a):i},a};var Aa={};function Ca(t){return t.x}function Ta(t){return t.y}function Pa(t,e,n){t.y0=e,t.y=n}o.layout.stack=function(){var t=D,e=La,n=Ra,r=Pa,i=Ca,a=Ta;function u(l,s){if(!(d=l.length))return l;var c=l.map(function(e,n){return t.call(u,e,n)}),f=c.map(function(t){return t.map(function(t,e){return[i.call(u,t,e),a.call(u,t,e)]})}),h=e.call(u,f,s);c=o.permute(c,h),f=o.permute(f,h);var d,p,g,v,y=n.call(u,f,s),m=c[0].length;for(g=0;g<m;++g)for(r.call(u,c[0][g],v=y[g],f[0][g][1]),p=1;p<d;++p)r.call(u,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return l}return u.values=function(e){return arguments.length?(t=e,u):t},u.order=function(t){return arguments.length?(e="function"===typeof t?t:ja.get(t)||La,u):e},u.offset=function(t){return arguments.length?(n="function"===typeof t?t:Na.get(t)||Ra,u):n},u.x=function(t){return arguments.length?(i=t,u):i},u.y=function(t){return arguments.length?(a=t,u):a},u.out=function(t){return arguments.length?(r=t,u):r},u};var ja=o.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(Da),a=t.map(za),u=o.range(r).sort(function(t,e){return i[t]-i[e]}),l=0,s=0,c=[],f=[];for(e=0;e<r;++e)n=u[e],l<s?(l+=a[n],c.push(n)):(s+=a[n],f.push(n));return f.reverse().concat(c)},reverse:function(t){return o.range(t.length).reverse()},default:La}),Na=o.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],u=0,l=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>u&&(u=r),a.push(r)}for(n=0;n<o;++n)l[n]=(u-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,u,l,s,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=l=s=0,n=1;n<h;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,u=f[n][0]-f[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*u);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/u;o+=a*t[e][n][1]}d[n]=l-=i?o/i*u:0,l<s&&(s=l)}for(n=0;n<h;++n)d[n]-=s;return d},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,u=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)u[n]=0;return u},zero:Ra});function La(t){return o.range(t.length)}function Ra(t){var e=-1,n=t[0].length,r=[];while(++e<n)r[e]=0;return r}function Da(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function za(t){return t.reduce(Ia,0)}function Ia(t,e){return t+e[1]}function Fa(t,e){return Ba(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ba(t,e){var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];while(++n<=e)o[n]=i*n+r;return o}function Ua(t){return[o.min(t),o.max(t)]}function Ha(t,e){return t.value-e.value}function qa(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function $a(t,e){t._pack_next=e,e._pack_prev=t}function Wa(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ga(t){if((e=t.children)&&(l=e.length)){var e,n,r,i,o,a,u,l,s=1/0,c=-1/0,f=1/0,h=-1/0;if(e.forEach(Xa),n=e[0],n.x=-n.r,n.y=0,b(n),l>1&&(r=e[1],r.x=r.r,r.y=0,b(r),l>2))for(i=e[2],Ka(n,r,i),b(i),qa(n,i),n._pack_prev=i,qa(i,r),r=n._pack_next,o=3;o<l;o++){Ka(n,r,i=e[o]);var d=0,p=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if(Wa(a,i)){d=1;break}if(1==d)for(u=n._pack_prev;u!==a._pack_prev;u=u._pack_prev,g++)if(Wa(u,i))break;d?(p<g||p==g&&r.r<n.r?$a(n,r=a):$a(n=u,r),o--):(qa(n,i),r=i,b(i))}var v=(s+c)/2,y=(f+h)/2,m=0;for(o=0;o<l;o++)i=e[o],i.x-=v,i.y-=y,m=Math.max(m,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=m,e.forEach(Ya)}function b(t){s=Math.min(t.x-t.r,s),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function Xa(t){t._pack_next=t._pack_prev=t}function Ya(t){delete t._pack_next,delete t._pack_prev}function Va(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i){var o=-1,a=i.length;while(++o<a)Va(i[o],e,n,r)}}function Ka(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,u=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);n.x=t.x+l*i+s*o,n.y=t.y+l*o-s*i}else n.x=t.x+r,n.y=t.y}function Za(t,e){return t.parent==e.parent?1:2}function Ja(t){var e=t.children;return e.length?e[0]:t.t}function Qa(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function tu(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function eu(t){var e,n=0,r=0,i=t.children,o=i.length;while(--o>=0)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function nu(t,e,n){return t.a.parent===e.parent?t.a:n}function ru(t){return 1+o.max(t,function(t){return t.y})}function iu(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function ou(t){var e=t.children;return e&&e.length?ou(e[0]):t}function au(t){var e,n=t.children;return n&&(e=n.length)?au(n[e-1]):t}function uu(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function lu(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function su(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function cu(t){return t.rangeExtent?t.rangeExtent():su(t.range())}function fu(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function hu(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function du(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:pu}o.layout.histogram=function(){var t=!0,e=Number,n=Ua,r=Fa;function i(i,a){var u,l,s=[],c=i.map(e,this),f=n.call(this,c,a),h=r.call(this,f,c,a),d=(a=-1,c.length),p=h.length-1,g=t?1:1/d;while(++a<p)u=s[a]=[],u.dx=h[a+1]-(u.x=h[a]),u.y=0;if(p>0){a=-1;while(++a<d)l=c[a],l>=f[0]&&l<=f[1]&&(u=s[o.bisect(h,l,1,p)-1],u.y+=g,u.push(i[a]))}return s}return i.value=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=Ee(t),i):n},i.bins=function(t){return arguments.length?(r="number"===typeof t?function(e){return Ba(e,t)}:Ee(t),i):r},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},o.layout.pack=function(){var t,e=o.layout.hierarchy().sort(Ha),n=0,r=[1,1];function i(i,o){var a=e.call(this,i,o),u=a[0],l=r[0],s=r[1],c=null==t?Math.sqrt:"function"===typeof t?t:function(){return t};if(u.x=u.y=0,Ma(u,function(t){t.r=+c(t.value)}),Ma(u,Ga),n){var f=n*(t?1:Math.max(2*u.r/l,2*u.r/s))/2;Ma(u,function(t){t.r+=f}),Ma(u,Ga),Ma(u,function(t){t.r-=f})}return Va(u,l/2,s/2,t?1:1/Math.max(2*u.r/l,2*u.r/s)),a}return i.size=function(t){return arguments.length?(r=t,i):r},i.radius=function(e){return arguments.length?(t=null==e||"function"===typeof e?e:+e,i):t},i.padding=function(t){return arguments.length?(n=+t,i):n},_a(i,e)},o.layout.tree=function(){var t=o.layout.hierarchy().sort(null).value(null),e=Za,n=[1,1],r=null;function i(i,o){var s=t.call(this,i,o),f=s[0],h=a(f);if(Ma(h,u),h.parent.m=-h.z,wa(h,l),r)wa(f,c);else{var d=f,p=f,g=f;wa(f,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=e(d,p)/2-d.x,y=n[0]/(p.x+e(p,d)/2+v),m=n[1]/(g.depth||1);wa(f,function(t){t.x=(t.x+v)*y,t.y=t.depth*m})}return s}function a(t){var e,n={A:null,children:[t]},r=[n];while(null!=(e=r.pop()))for(var i,o=e.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function u(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){eu(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=s(t,i,t.parent.A||r[0])}function l(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t,n,r){if(n){var i,o=t,a=t,u=n,l=o.parent.children[0],s=o.m,c=a.m,f=u.m,h=l.m;while(u=Qa(u),o=Ja(o),u&&o)l=Ja(l),a=Qa(a),a.a=t,i=u.z+f-o.z-s+e(u._,o._),i>0&&(tu(nu(u,t,r),t,i),s+=i,c+=i),f+=u.m,s+=o.m,h+=l.m,c+=a.m;u&&!Qa(a)&&(a.t=u,a.m+=f-c),o&&!Ja(l)&&(l.t=o,l.m+=s-h,r=t)}return r}function c(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t)?c:null,i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:c,i):r?n:null},_a(i,t)},o.layout.cluster=function(){var t=o.layout.hierarchy().sort(null).value(null),e=Za,n=[1,1],r=!1;function i(i,o){var a,u=t.call(this,i,o),l=u[0],s=0;Ma(l,function(t){var n=t.children;n&&n.length?(t.x=iu(n),t.y=ru(n)):(t.x=a?s+=e(t,a):0,t.y=0,a=t)});var c=ou(l),f=au(l),h=c.x-e(c,f)/2,d=f.x+e(f,c)/2;return Ma(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-h)/(d-h)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),u}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t),i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null!=(n=t),i):r?n:null},_a(i,t)},o.layout.treemap=function(){var t,e=o.layout.hierarchy(),n=Math.round,r=[1,1],i=null,a=uu,u=!1,l="squarify",s=.5*(1+Math.sqrt(5));function c(t,e){var n,r,i=-1,o=t.length;while(++i<o)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),u=[],s=e.slice(),h=1/0,g="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);c(s,o.dx*o.dy/t.value),u.area=0;while((i=s.length)>0)u.push(n=s[i-1]),u.area+=n.area,"squarify"!==l||(r=d(u,g))<=h?(s.pop(),h=r):(u.area-=u.pop().area,p(u,g,o,!1),g=Math.min(o.dx,o.dy),u.length=u.area=0,h=1/0);u.length&&(p(u,g,o,!0),u.length=u.area=0),e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];c(i,r.dx*r.dy/t.value),o.area=0;while(n=i.pop())o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(h)}}function d(t,e){var n,r=t.area,i=0,o=1/0,a=-1,u=t.length;while(++a<u)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*s/r,r/(e*o*s)):1/0}function p(t,e,r,i){var o,a=-1,u=t.length,l=r.x,s=r.y,c=e?n(t.area/e):0;if(e==r.dx){(i||c>r.dy)&&(c=r.dy);while(++a<u)o=t[a],o.x=l,o.y=s,o.dy=c,l+=o.dx=Math.min(r.x+r.dx-l,c?n(o.area/c):0);o.z=!0,o.dx+=r.x+r.dx-l,r.y+=c,r.dy-=c}else{(i||c>r.dx)&&(c=r.dx);while(++a<u)o=t[a],o.x=l,o.y=s,o.dx=c,s+=o.dy=Math.min(r.y+r.dy-s,c?n(o.area/c):0);o.z=!1,o.dy+=r.y+r.dy-s,r.x+=c,r.dx-=c}}function g(n){var i=t||e(n),o=i[0];return o.x=o.y=0,o.value?(o.dx=r[0],o.dy=r[1]):o.dx=o.dy=0,t&&e.revalue(o),c([o],o.dx*o.dy/o.value),(t?h:f)(o),u&&(t=i),i}return g.size=function(t){return arguments.length?(r=t,g):r},g.padding=function(t){if(!arguments.length)return i;function e(e){var n=t.call(g,e,e.depth);return null==n?uu(e):lu(e,"number"===typeof n?[n,n,n,n]:n)}function n(e){return lu(e,t)}var r;return a=null==(i=t)?uu:"function"===(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(e){return arguments.length?(u=e,t=null,g):u},g.ratio=function(t){return arguments.length?(s=t,g):s},g.mode=function(t){return arguments.length?(l=t+"",g):l},_a(g,e)},o.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=o.random.normal.apply(o,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=o.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},o.scale={};var pu={floor:D,ceil:D};function gu(t,e,n,r){var i=[],a=[],u=0,l=Math.min(t.length,e.length)-1;t[l]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());while(++u<=l)i.push(n(t[u-1],t[u])),a.push(r(e[u-1],e[u]));return function(e){var n=o.bisect(t,e,1,l)-1;return a[n](i[n](e))}}function vu(t,e,n,r){var i,o;function a(){var a=Math.min(t.length,e.length)>2?gu:fu,l=r?sa:la;return i=a(t,e,l,n),o=a(e,t,l,Co),u}function u(t){return i(t)}return u.invert=function(t){return o(t)},u.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},u.range=function(t){return arguments.length?(e=t,a()):e},u.rangeRound=function(t){return u.range(t).interpolate(Ko)},u.clamp=function(t){return arguments.length?(r=t,a()):r},u.interpolate=function(t){return arguments.length?(n=t,a()):n},u.ticks=function(e){return xu(t,e)},u.tickFormat=function(e,n){return _u(t,e,n)},u.nice=function(e){return mu(t,e),a()},u.copy=function(){return vu(t,e,n,r)},a()}function yu(t,e){return o.rebind(t,e,"range","rangeRound","interpolate","clamp")}function mu(t,e){return hu(t,du(bu(t,e)[2])),hu(t,du(bu(t,e)[2])),t}function bu(t,e){null==e&&(e=10);var n=su(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function xu(t,e){return o.range.apply(o,bu(t,e))}function _u(t,e,n){var r=bu(t,e);if(n){var i=We.exec(n);if(i.shift(),"s"===i[8]){var a=o.formatPrefix(Math.max(w(r[0]),w(r[1])));return i[7]||(i[7]="."+Mu(a.scale(r[2]))),i[8]="f",n=o.format(i.join("")),function(t){return n(a.scale(t))+a.symbol}}i[7]||(i[7]="."+Su(i[8],r)),n=i.join("")}else n=",."+Mu(r[2])+"f";return o.format(n)}o.scale.linear=function(){return vu([0,1],[0,1],Co,!1)};var wu={s:1,g:1,p:1,r:1,e:1};function Mu(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Su(t,e){var n=Mu(e[2]);return t in wu?Math.abs(n-Mu(Math.max(w(e[0]),w(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ku(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function a(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function u(e){return t(i(e))}return u.invert=function(e){return a(t.invert(e))},u.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),u):r},u.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),u):e},u.nice=function(){var e=hu(r.map(i),n?Math:Eu);return t.domain(e),r=e.map(a),u},u.ticks=function(){var t=su(r),o=[],u=t[0],l=t[1],s=Math.floor(i(u)),c=Math.ceil(i(l)),f=e%1?2:e;if(isFinite(c-s)){if(n){for(;s<c;s++)for(var h=1;h<f;h++)o.push(a(s)*h);o.push(a(s))}else for(o.push(a(s));s++<c;)for(h=f-1;h>0;h--)o.push(a(s)*h);for(s=0;o[s]<u;s++);for(c=o.length;o[c-1]>l;c--);o=o.slice(s,c)}return o},u.tickFormat=function(t,n){if(!arguments.length)return Ou;arguments.length<2?n=Ou:"function"!==typeof n&&(n=o.format(n));var r=Math.max(1,e*t/u.ticks().length);return function(t){var o=t/a(Math.round(i(t)));return o*e<e-.5&&(o*=e),o<=r?n(t):""}},u.copy=function(){return ku(t.copy(),e,n,r)},yu(u,t)}o.scale.log=function(){return ku(o.scale.linear().domain([0,1]),10,!0,[1,10])};var Ou=o.format(".0e"),Eu={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Au(t,e,n){var r=Cu(e),i=Cu(1/e);function o(e){return t(r(e))}return o.invert=function(e){return i(t.invert(e))},o.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(r)),o):n},o.ticks=function(t){return xu(n,t)},o.tickFormat=function(t,e){return _u(n,t,e)},o.nice=function(t){return o.domain(mu(n,t))},o.exponent=function(a){return arguments.length?(r=Cu(e=a),i=Cu(1/e),t.domain(n.map(r)),o):e},o.copy=function(){return Au(t.copy(),e,n)},yu(o,t)}function Cu(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Tu(t,e){var n,r,i;function a(i){return r[((n.get(i)||("range"===e.t?n.set(i,t.push(i)):NaN))-1)%r.length]}function u(e,n){return o.range(t.length).map(function(t){return e+n*t})}return a.domain=function(r){if(!arguments.length)return t;t=[],n=new k;var i,o=-1,u=r.length;while(++o<u)n.has(i=r[o])||n.set(i,t.push(i));return a[e.t].apply(a,e.a)},a.range=function(t){return arguments.length?(r=t,i=0,e={t:"range",a:arguments},a):r},a.rangePoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],s=n[1],c=t.length<2?(l=(l+s)/2,0):(s-l)/(t.length-1+o);return r=u(l+c*o/2,c),i=0,e={t:"rangePoints",a:arguments},a},a.rangeRoundPoints=function(n,o){arguments.length<2&&(o=0);var l=n[0],s=n[1],c=t.length<2?(l=s=Math.round((l+s)/2),0):(s-l)/(t.length-1+o)|0;return r=u(l+Math.round(c*o/2+(s-l-(t.length-1+o)*c)/2),c),i=0,e={t:"rangeRoundPoints",a:arguments},a},a.rangeBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var s=n[1]<n[0],c=n[s-0],f=n[1-s],h=(f-c)/(t.length-o+2*l);return r=u(c+h*l,h),s&&r.reverse(),i=h*(1-o),e={t:"rangeBands",a:arguments},a},a.rangeRoundBands=function(n,o,l){arguments.length<2&&(o=0),arguments.length<3&&(l=o);var s=n[1]<n[0],c=n[s-0],f=n[1-s],h=Math.floor((f-c)/(t.length-o+2*l));return r=u(c+Math.round((f-c-(t.length-o)*h)/2),h),s&&r.reverse(),i=Math.round(h*(1-o)),e={t:"rangeRoundBands",a:arguments},a},a.rangeBand=function(){return i},a.rangeExtent=function(){return su(e.a[0])},a.copy=function(){return Tu(t,e)},a.domain(t)}o.scale.pow=function(){return Au(o.scale.linear(),1,[0,1])},o.scale.sqrt=function(){return o.scale.pow().exponent(.5)},o.scale.ordinal=function(){return Tu([],{t:"range",a:[[]]})},o.scale.category10=function(){return o.scale.ordinal().range(Pu)},o.scale.category20=function(){return o.scale.ordinal().range(ju)},o.scale.category20b=function(){return o.scale.ordinal().range(Nu)},o.scale.category20c=function(){return o.scale.ordinal().range(Lu)};var Pu=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(me),ju=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(me),Nu=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(me),Lu=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(me);function Ru(t,e){var n;function r(){var r=0,a=e.length;n=[];while(++r<a)n[r-1]=o.quantile(t,r/a);return i}function i(t){if(!isNaN(t=+t))return e[o.bisect(n,t)]}return i.domain=function(e){return arguments.length?(t=e.map(y).filter(m).sort(v),r()):t},i.range=function(t){return arguments.length?(e=t,r()):e},i.quantiles=function(){return n},i.invertExtent=function(r){return r=e.indexOf(r),r<0?[NaN,NaN]:[r>0?n[r-1]:t[0],r<n.length?n[r]:t[t.length-1]]},i.copy=function(){return Ru(t,e)},r()}function Du(t,e,n){var r,i;function o(e){return n[Math.max(0,Math.min(i,Math.floor(r*(e-t))))]}function a(){return r=n.length/(e-t),i=n.length-1,o}return o.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},o.range=function(t){return arguments.length?(n=t,a()):n},o.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/r+t,[e,e+1/r]},o.copy=function(){return Du(t,e,n)},a()}function zu(t,e){function n(n){if(n<=n)return e[o.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return zu(t,e)},n}function Iu(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return xu(t,e)},e.tickFormat=function(e,n){return _u(t,e,n)},e.copy=function(){return Iu(t)},e}function Fu(){return 0}o.scale.quantile=function(){return Ru([],[])},o.scale.quantize=function(){return Du(0,1,[0,1])},o.scale.threshold=function(){return zu([.5],[0,1])},o.scale.identity=function(){return Iu([0,1])},o.svg={},o.svg.arc=function(){var t=Uu,e=Hu,n=Fu,r=Bu,i=qu,o=$u,a=Wu;function u(){var u=Math.max(0,+t.apply(this,arguments)),s=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Rt,f=o.apply(this,arguments)-Rt,h=Math.abs(f-c),d=c>f?0:1;if(s<u&&(p=s,s=u,u=p),h>=Lt)return l(s,d)+(u?l(u,1-d):"")+"Z";var p,g,v,y,m,b,x,_,w,M,S,k,O=0,E=0,A=[];if((y=(+a.apply(this,arguments)||0)/2)&&(v=r===Bu?Math.sqrt(u*u+s*s):+r.apply(this,arguments),d||(E*=-1),s&&(E=Ut(v/s*Math.sin(y))),u&&(O=Ut(v/u*Math.sin(y)))),s){m=s*Math.cos(c+E),b=s*Math.sin(c+E),x=s*Math.cos(f-E),_=s*Math.sin(f-E);var C=Math.abs(f-c-2*E)<=jt?0:1;if(E&&Gu(m,b,x,_)===d^C){var T=(c+f)/2;m=s*Math.cos(T),b=s*Math.sin(T),x=_=null}}else m=b=0;if(u){w=u*Math.cos(f-O),M=u*Math.sin(f-O),S=u*Math.cos(c+O),k=u*Math.sin(c+O);var P=Math.abs(c-f+2*O)<=jt?0:1;if(O&&Gu(w,M,S,k)===1-d^P){var j=(c+f)/2;w=u*Math.cos(j),M=u*Math.sin(j),S=k=null}}else w=M=0;if(h>Tt&&(p=Math.min(Math.abs(s-u)/2,+n.apply(this,arguments)))>.001){g=u<s^d?0:1;var N=p,L=p;if(h<jt){var R=null==S?[w,M]:null==x?[m,b]:Ni([m,b],[S,k],[x,_],[w,M]),D=m-R[0],z=b-R[1],I=x-R[0],F=_-R[1],B=1/Math.sin(Math.acos((D*I+z*F)/(Math.sqrt(D*D+z*z)*Math.sqrt(I*I+F*F)))/2),U=Math.sqrt(R[0]*R[0]+R[1]*R[1]);L=Math.min(p,(u-U)/(B-1)),N=Math.min(p,(s-U)/(B+1))}if(null!=x){var H=Xu(null==S?[w,M]:[S,k],[m,b],s,N,d),q=Xu([x,_],[w,M],s,N,d);p===N?A.push("M",H[0],"A",N,",",N," 0 0,",g," ",H[1],"A",s,",",s," 0 ",1-d^Gu(H[1][0],H[1][1],q[1][0],q[1][1]),",",d," ",q[1],"A",N,",",N," 0 0,",g," ",q[0]):A.push("M",H[0],"A",N,",",N," 0 1,",g," ",q[0])}else A.push("M",m,",",b);if(null!=S){var $=Xu([m,b],[S,k],u,-L,d),W=Xu([w,M],null==x?[m,b]:[x,_],u,-L,d);p===L?A.push("L",W[0],"A",L,",",L," 0 0,",g," ",W[1],"A",u,",",u," 0 ",d^Gu(W[1][0],W[1][1],$[1][0],$[1][1]),",",1-d," ",$[1],"A",L,",",L," 0 0,",g," ",$[0]):A.push("L",W[0],"A",L,",",L," 0 0,",g," ",$[0])}else A.push("L",w,",",M)}else A.push("M",m,",",b),null!=x&&A.push("A",s,",",s," 0 ",C,",",d," ",x,",",_),A.push("L",w,",",M),null!=S&&A.push("A",u,",",u," 0 ",P,",",1-d," ",S,",",k);return A.push("Z"),A.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return u.innerRadius=function(e){return arguments.length?(t=Ee(e),u):t},u.outerRadius=function(t){return arguments.length?(e=Ee(t),u):e},u.cornerRadius=function(t){return arguments.length?(n=Ee(t),u):n},u.padRadius=function(t){return arguments.length?(r=t==Bu?Bu:Ee(t),u):r},u.startAngle=function(t){return arguments.length?(i=Ee(t),u):i},u.endAngle=function(t){return arguments.length?(o=Ee(t),u):o},u.padAngle=function(t){return arguments.length?(a=Ee(t),u):a},u.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Rt;return[Math.cos(r)*n,Math.sin(r)*n]},u};var Bu="auto";function Uu(t){return t.innerRadius}function Hu(t){return t.outerRadius}function qu(t){return t.startAngle}function $u(t){return t.endAngle}function Wu(t){return t&&t.padAngle}function Gu(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Xu(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),l=u*a,s=-u*o,c=t[0]+l,f=t[1]+s,h=e[0]+l,d=e[1]+s,p=(c+h)/2,g=(f+d)/2,v=h-c,y=d-f,m=v*v+y*y,b=n-r,x=c*d-h*f,_=(y<0?-1:1)*Math.sqrt(Math.max(0,b*b*m-x*x)),w=(x*y-v*_)/m,M=(-x*v-y*_)/m,S=(x*y+v*_)/m,k=(-x*v+y*_)/m,O=w-p,E=M-g,A=S-p,C=k-g;return O*O+E*E>A*A+C*C&&(w=S,M=k),[[w-l,M-s],[w*n/b,M*n/b]]}function Yu(t){var e=Ei,n=Ai,r=cr,i=Ku,o=i.key,a=.7;function u(o){var u,l=[],s=[],c=-1,f=o.length,h=Ee(e),d=Ee(n);function p(){l.push("M",i(t(s),a))}while(++c<f)r.call(this,u=o[c],c)?s.push([+h.call(this,u,c),+d.call(this,u,c)]):s.length&&(p(),s=[]);return s.length&&p(),l.length?l.join(""):null}return u.x=function(t){return arguments.length?(e=t,u):e},u.y=function(t){return arguments.length?(n=t,u):n},u.defined=function(t){return arguments.length?(r=t,u):r},u.interpolate=function(t){return arguments.length?(o="function"===typeof t?i=t:(i=Vu.get(t)||Ku).key,u):o},u.tension=function(t){return arguments.length?(a=t,u):a},u}o.svg.line=function(){return Yu(D)};var Vu=o.map({linear:Ku,"linear-closed":Zu,step:Ju,"step-before":Qu,"step-after":tl,basis:al,"basis-open":ul,"basis-closed":ll,bundle:sl,cardinal:rl,"cardinal-open":el,"cardinal-closed":nl,monotone:ml});function Ku(t){return t.length>1?t.join("L"):t+"Z"}function Zu(t){return t.join("L")+"Z"}function Ju(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];while(++e<n)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Qu(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];while(++e<n)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function tl(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];while(++e<n)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function el(t,e){return t.length<4?Ku(t):t[1]+il(t.slice(1,-1),ol(t,e))}function nl(t,e){return t.length<3?Zu(t):t[0]+il((t.push(t[0]),t),ol([t[t.length-2]].concat(t,[t[1]]),e))}function rl(t,e){return t.length<3?Ku(t):t[0]+il(t,ol(t,e))}function il(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ku(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],u=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){u=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<e.length;s++,l++)o=t[l],u=e[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function ol(t,e){var n,r=[],i=(1-e)/2,o=t[0],a=t[1],u=1,l=t.length;while(++u<l)n=o,o=a,a=t[u],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function al(t){if(t.length<3)return Ku(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],l=[i,",",o,"L",cl(dl,a),",",cl(dl,u)];t.push(t[n-1]);while(++e<=n)r=t[e],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),pl(l,a,u);return t.pop(),l.push("L",r),l.join("")}function ul(t){if(t.length<4)return Ku(t);var e,n=[],r=-1,i=t.length,o=[0],a=[0];while(++r<3)e=t[r],o.push(e[0]),a.push(e[1]);n.push(cl(dl,o)+","+cl(dl,a)),--r;while(++r<i)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),pl(n,o,a);return n.join("")}function ll(t){var e,n,r=-1,i=t.length,o=i+4,a=[],u=[];while(++r<4)n=t[r%i],a.push(n[0]),u.push(n[1]);e=[cl(dl,a),",",cl(dl,u)],--r;while(++r<o)n=t[r%i],a.shift(),a.push(n[0]),u.shift(),u.push(n[1]),pl(e,a,u);return e.join("")}function sl(t,e){var n=t.length-1;if(n){var r,i,o=t[0][0],a=t[0][1],u=t[n][0]-o,l=t[n][1]-a,s=-1;while(++s<=n)r=t[s],i=s/n,r[0]=e*r[0]+(1-e)*(o+i*u),r[1]=e*r[1]+(1-e)*(a+i*l)}return al(t)}function cl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Vu.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var fl=[0,2/3,1/3,0],hl=[0,1/3,2/3,0],dl=[0,1/6,2/3,1/6];function pl(t,e,n){t.push("C",cl(fl,e),",",cl(fl,n),",",cl(hl,e),",",cl(hl,n),",",cl(dl,e),",",cl(dl,n))}function gl(t,e){return(e[1]-t[1])/(e[0]-t[0])}function vl(t){var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=gl(i,o);while(++e<n)r[e]=(a+(a=gl(i=o,o=t[e+1])))/2;return r[e]=a,r}function yl(t){var e,n,r,i,o=[],a=vl(t),u=-1,l=t.length-1;while(++u<l)e=gl(t[u],t[u+1]),w(e)<Tt?a[u]=a[u+1]=0:(n=a[u]/e,r=a[u+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[u]=i*n,a[u+1]=i*r));u=-1;while(++u<=l)i=(t[Math.min(l,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}function ml(t){return t.length<3?Ku(t):t[0]+il(t,yl(t))}function bl(t){var e,n,r,i=-1,o=t.length;while(++i<o)e=t[i],n=e[0],r=e[1]-Rt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function xl(t){var e=Ei,n=Ei,r=0,i=Ai,o=cr,a=Ku,u=a.key,l=a,s="L",c=.7;function f(u){var f,h,d,p=[],g=[],v=[],y=-1,m=u.length,b=Ee(e),x=Ee(r),_=e===n?function(){return h}:Ee(n),w=r===i?function(){return d}:Ee(i);function M(){p.push("M",a(t(v),c),s,l(t(g.reverse()),c),"Z")}while(++y<m)o.call(this,f=u[y],y)?(g.push([h=+b.call(this,f,y),d=+x.call(this,f,y)]),v.push([+_.call(this,f,y),+w.call(this,f,y)])):g.length&&(M(),g=[],v=[]);return g.length&&M(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(o=t,f):o},f.interpolate=function(t){return arguments.length?(u="function"===typeof t?a=t:(a=Vu.get(t)||Ku).key,l=a.reverse||a,s=a.closed?"M":"L",f):u},f.tension=function(t){return arguments.length?(c=t,f):c},f}function _l(t){return t.radius}function wl(t){return[t.x,t.y]}function Ml(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Rt;return[n*Math.cos(r),n*Math.sin(r)]}}function Sl(){return 64}function kl(){return"circle"}function Ol(t){var e=Math.sqrt(t/jt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}o.svg.line.radial=function(){var t=Yu(bl);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Qu.reverse=tl,tl.reverse=Qu,o.svg.area=function(){return xl(D)},o.svg.area.radial=function(){var t=xl(bl);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},o.svg.chord=function(){var t=fi,e=hi,n=_l,r=qu,i=$u;function o(n,r){var i=a(this,t,n,r),o=a(this,e,n,r);return"M"+i.p0+l(i.r,i.p1,i.a1-i.a0)+(u(i,o)?s(i.r,i.p1,i.r,i.p0):s(i.r,i.p1,o.r,o.p0)+l(o.r,o.p1,o.a1-o.a0)+s(o.r,o.p1,i.r,i.p0))+"Z"}function a(t,e,o,a){var u=e.call(t,o,a),l=n.call(t,u,a),s=r.call(t,u,a)-Rt,c=i.call(t,u,a)-Rt;return{r:l,a0:s,a1:c,p0:[l*Math.cos(s),l*Math.sin(s)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function u(t,e){return t.a0==e.a0&&t.a1==e.a1}function l(t,e,n){return"A"+t+","+t+" 0 "+ +(n>jt)+",1 "+e}function s(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=Ee(t),o):n},o.source=function(e){return arguments.length?(t=Ee(e),o):t},o.target=function(t){return arguments.length?(e=Ee(t),o):e},o.startAngle=function(t){return arguments.length?(r=Ee(t),o):r},o.endAngle=function(t){return arguments.length?(i=Ee(t),o):i},o},o.svg.diagonal=function(){var t=fi,e=hi,n=wl;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),u=(o.y+a.y)/2,l=[o,{x:o.x,y:u},{x:a.x,y:u},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=Ee(e),r):t},r.target=function(t){return arguments.length?(e=Ee(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},o.svg.diagonal.radial=function(){var t=o.svg.diagonal(),e=wl,n=t.projection;return t.projection=function(t){return arguments.length?n(Ml(e=t)):e},t},o.svg.symbol=function(){var t=kl,e=Sl;function n(n,r){return(El.get(t.call(this,n,r))||Ol)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=Ee(e),n):t},n.size=function(t){return arguments.length?(e=Ee(t),n):e},n};var El=o.map({circle:Ol,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Cl)),n=e*Cl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Al),n=e*Al/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Al),n=e*Al/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});o.svg.symbolTypes=El.keys();var Al=Math.sqrt(3),Cl=Math.tan(30*Dt);J.transition=function(t){for(var e,n,r=Nl||++Dl,i=Fl(t),o=[],a=Ll||{time:Date.now(),ease:Fo,delay:0,duration:250},u=-1,l=this.length;++u<l;){o.push(e=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(n=s[c])&&Bl(n,c,i,r,a),e.push(n)}return jl(o,i,r)},J.interrupt=function(t){return this.each(null==t?Tl:Pl(Fl(t)))};var Tl=Pl(Fl());function Pl(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function jl(t,e,n){return X(t,Rl),t.namespace=e,t.id=n,t}var Nl,Ll,Rl=[],Dl=0;function zl(t,e,n,r){var i=t.id,o=t.namespace;return vt(t,"function"===typeof n?function(t,a,u){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,u)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Il(t){return null==t&&(t=""),function(){this.textContent=t}}function Fl(t){return null==t?"__transition__":"__transition_"+t+"__"}function Bl(t,e,n,r,i){var o,a,u,l,s,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function h(t){var e=f.delay;if(a.t=e+o,e<=t)return d(t-e);a.c=d}function d(n){var i=c.active,h=c[i];for(var d in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+d<r){var g=c[d];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[d]}a.c=p,ze(function(){return a.c&&p(n||1)&&(a.c=null,a.t=NaN),1},0,o),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),s=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&s.push(r)}),l=f.ease,u=f.duration}function p(i){var o=i/u,a=l(o),h=s.length;while(h>0)s[--h].call(t,a);if(o>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(o=i.time,a=ze(h,0,o),f=c[r]={tween:new k,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}Rl.call=J.call,Rl.empty=J.empty,Rl.node=J.node,Rl.size=J.size,o.transition=function(t,e){return t&&t.transition?Nl?t.transition(e):t:o.selection().transition(t)},o.transition.prototype=Rl,Rl.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=Q(t);for(var u=-1,l=this.length;++u<l;){a.push(e=[]);for(var s=this[u],c=-1,f=s.length;++c<f;)(r=s[c])&&(n=t.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),Bl(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return jl(a,o,i)},Rl.selectAll=function(t){var e,n,r,i,o,a=this.id,u=this.namespace,l=[];t=tt(t);for(var s=-1,c=this.length;++s<c;)for(var f=this[s],h=-1,d=f.length;++h<d;)if(r=f[h]){o=r[u][a],n=t.call(r,r.__data__,h,s),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Bl(i,p,u,a,o),e.push(i)}return jl(l,u,a)},Rl.filter=function(t){var e,n,r=[];"function"!==typeof t&&(t=pt(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a=this[i],u=0,l=a.length;u<l;u++)(n=a[u])&&t.call(n,n.__data__,u,i)&&e.push(n)}return jl(r,this.namespace,this.id)},Rl.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):vt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Rl.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?ua:Co,r=o.ns.qualify(t);function i(){this.removeAttribute(r)}function a(){this.removeAttributeNS(r.space,r.local)}function u(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})}function l(t){return null==t?a:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}return zl(this,"attr."+t,e,r.local?l:u)},Rl.attrTween=function(t,e){var n=o.ns.qualify(t);function r(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}}function i(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}return this.tween("attr."+t,n.local?i:r)},Rl.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function o(e){return null==e?i:(e+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Co(i,e),function(e){this.style.setProperty(t,r(e),n)})})}return zl(this,"style."+t,e,o)},Rl.styleTween=function(t,e,n){function r(r,i){var o=e.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},Rl.text=function(t){return zl(this,"text",t,Il)},Rl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Rl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!==typeof t&&(t=o.ease.apply(o,arguments)),vt(this,function(r){r[n][e].ease=t}))},Rl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:vt(this,"function"===typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Rl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:vt(this,"function"===typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Rl.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ll,a=Nl;try{Nl=n,vt(this,function(e,i,o){Ll=e[r][n],t.call(e,e.__data__,i,o)})}finally{Ll=i,Nl=a}}else vt(this,function(i){var a=i[r][n];(a.event||(a.event=o.dispatch("start","end","interrupt"))).on(t,e)});return this},Rl.transition=function(){for(var t,e,n,r=this.id,i=++Dl,o=this.namespace,a=[],u=0,l=this.length;u<l;u++){a.push(t=[]);for(var s=this[u],c=0,f=s.length;c<f;c++)(e=s[c])&&(n=e[o][r],Bl(e,c,o,i,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),t.push(e)}return jl(a,o,i)},o.svg.axis=function(){var t,e=o.scale.linear(),n=Ul,r=6,i=6,a=3,l=[10],s=null;function c(u){u.each(function(){var u,c=o.select(this),f=this.__chart__||e,h=this.__chart__=e.copy(),d=null==s?h.ticks?h.ticks.apply(h,l):h.domain():s,p=null==t?h.tickFormat?h.tickFormat.apply(h,l):D:t,g=c.selectAll(".tick").data(d,h),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",Tt),y=o.transition(g.exit()).style("opacity",Tt).remove(),m=o.transition(g.order()).style("opacity",1),b=Math.max(r,0)+a,x=cu(h),_=c.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),o.transition(_));v.append("line"),v.append("text");var M,S,k,O,E=v.select("line"),A=m.select("line"),C=g.select("text").text(p),T=v.select("text"),P=m.select("text"),j="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(u=ql,M="x",k="y",S="x2",O="y2",C.attr("dy",j<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+j*i+"V0H"+x[1]+"V"+j*i)):(u=$l,M="y",k="x",S="y2",O="x2",C.attr("dy",".32em").style("text-anchor",j<0?"end":"start"),w.attr("d","M"+j*i+","+x[0]+"H0V"+x[1]+"H"+j*i)),E.attr(O,j*r),T.attr(k,j*b),A.attr(S,0).attr(O,j*r),P.attr(M,0).attr(k,j*b),h.rangeBand){var N=h,L=N.rangeBand()/2;f=h=function(t){return N(t)+L}}else f.rangeBand?f=h:y.call(u,h,f);v.call(u,f,h),m.call(u,h,h)})}return c.scale=function(t){return arguments.length?(e=t,c):e},c.orient=function(t){return arguments.length?(n=t in Hl?t+"":Ul,c):n},c.ticks=function(){return arguments.length?(l=u(arguments),c):l},c.tickValues=function(t){return arguments.length?(s=t,c):s},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(r=+t,i=+arguments[e-1],c):r},c.innerTickSize=function(t){return arguments.length?(r=+t,c):r},c.outerTickSize=function(t){return arguments.length?(i=+t,c):i},c.tickPadding=function(t){return arguments.length?(a=+t,c):a},c.tickSubdivide=function(){return arguments.length&&c},c};var Ul="bottom",Hl={top:1,right:1,bottom:1,left:1};function ql(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function $l(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}o.svg.brush=function(){var t,e,n=W(h,"brushstart","brush","brushend"),r=null,i=null,a=[0,0],u=[0,0],l=!0,s=!0,f=Gl[0];function h(t){t.each(function(){var t=o.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(f,D);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Wl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var a,u=o.transition(t),l=o.transition(e);r&&(a=cu(r),l.attr("x",a[0]).attr("width",a[1]-a[0]),p(u)),i&&(a=cu(i),l.attr("y",a[0]).attr("height",a[1]-a[0]),g(u)),d(u)})}function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+a[+/e$/.test(t)]+","+u[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",a[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",a[1]-a[0])}function g(t){t.select(".extent").attr("y",u[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",u[1]-u[0])}function v(){var f,v,y=this,m=o.select(o.event.target),b=n.of(y,arguments),x=o.select(y),_=m.datum(),w=!/^(n|s)$/.test(_)&&r,M=!/^(e|w)$/.test(_)&&i,S=m.classed("extent"),k=Ot(y),O=o.mouse(y),E=o.select(c(y)).on("keydown.brush",T).on("keyup.brush",P);if(o.event.changedTouches?E.on("touchmove.brush",j).on("touchend.brush",L):E.on("mousemove.brush",j).on("mouseup.brush",L),x.interrupt().selectAll("*").interrupt(),S)O[0]=a[0]-O[0],O[1]=u[0]-O[1];else if(_){var A=+/w$/.test(_),C=+/^n/.test(_);v=[a[1-A]-O[0],u[1-C]-O[1]],O[0]=a[A],O[1]=u[C]}else o.event.altKey&&(f=O.slice());function T(){32==o.event.keyCode&&(S||(f=null,O[0]-=a[1],O[1]-=u[1],S=2),q())}function P(){32==o.event.keyCode&&2==S&&(O[0]+=a[1],O[1]+=u[1],S=0,q())}function j(){var t=o.mouse(y),e=!1;v&&(t[0]+=v[0],t[1]+=v[1]),S||(o.event.altKey?(f||(f=[(a[0]+a[1])/2,(u[0]+u[1])/2]),O[0]=a[+(t[0]<f[0])],O[1]=u[+(t[1]<f[1])]):f=null),w&&N(t,r,0)&&(p(x),e=!0),M&&N(t,i,1)&&(g(x),e=!0),e&&(d(x),b({type:"brush",mode:S?"move":"resize"}))}function N(n,r,i){var o,c,h=cu(r),d=h[0],p=h[1],g=O[i],v=i?u:a,y=v[1]-v[0];if(S&&(d-=g,p-=y+g),o=(i?s:l)?Math.max(d,Math.min(p,n[i])):n[i],S?c=(o+=g)+y:(f&&(g=Math.max(d,Math.min(p,2*f[i]-o))),g<o?(c=o,o=g):c=g),v[0]!=o||v[1]!=c)return i?e=null:t=null,v[0]=o,v[1]=c,!0}function L(){j(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),o.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),k(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),o.select("body").style("cursor",m.style("cursor")),b({type:"brushstart"}),j()}return h.event=function(r){r.each(function(){var r=n.of(this,arguments),i={x:a,y:u,i:t,j:e},l=this.__chart__||i;this.__chart__=i,Nl?o.select(this).transition().each("start.brush",function(){t=l.i,e=l.j,a=l.x,u=l.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=To(a,i.x),o=To(u,i.y);return t=e=null,function(t){a=i.x=n(t),u=i.y=o(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=i.i,e=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},h.x=function(t){return arguments.length?(r=t,f=Gl[!r<<1|!i],h):r},h.y=function(t){return arguments.length?(i=t,f=Gl[!r<<1|!i],h):i},h.clamp=function(t){return arguments.length?(r&&i?(l=!!t[0],s=!!t[1]):r?l=!!t:i&&(s=!!t),h):r&&i?[l,s]:r?l:i?s:null},h.extent=function(n){var o,l,s,c,f;return arguments.length?(r&&(o=n[0],l=n[1],i&&(o=o[0],l=l[0]),t=[o,l],r.invert&&(o=r(o),l=r(l)),l<o&&(f=o,o=l,l=f),o==a[0]&&l==a[1]||(a=[o,l])),i&&(s=n[0],c=n[1],r&&(s=s[1],c=c[1]),e=[s,c],i.invert&&(s=i(s),c=i(c)),c<s&&(f=s,s=c,c=f),s==u[0]&&c==u[1]||(u=[s,c])),h):(r&&(t?(o=t[0],l=t[1]):(o=a[0],l=a[1],r.invert&&(o=r.invert(o),l=r.invert(l)),l<o&&(f=o,o=l,l=f))),i&&(e?(s=e[0],c=e[1]):(s=u[0],c=u[1],i.invert&&(s=i.invert(s),c=i.invert(c)),c<s&&(f=s,s=c,c=f))),r&&i?[[o,s],[l,c]]:r?[o,l]:i&&[s,c])},h.clear=function(){return h.empty()||(a=[0,0],u=[0,0],t=e=null),h},h.empty=function(){return!!r&&a[0]==a[1]||!!i&&u[0]==u[1]},o.rebind(h,n,"on")};var Wl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Gl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Xl=Ye.format=kn.timeFormat,Yl=Xl.utc,Vl=Yl("%Y-%m-%dT%H:%M:%S.%LZ");function Kl(t){return t.toISOString()}function Zl(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,a=o.bisect(Ql,i);return a==Ql.length?[e.year,bu(t.map(function(t){return t/31536e6}),n)[2]]:a?e[i/Ql[a-1]<Ql[a]/i?a-1:a]:[ns,bu(t,n)[2]]}return r.invert=function(e){return Jl(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Jl)},r.nice=function(t,e){var n=r.domain(),o=su(n),a=null==t?i(o,10):"number"===typeof t&&i(o,t);function u(n){return!isNaN(n)&&!t.range(n,Jl(+n+1),e).length}return a&&(t=a[0],e=a[1]),r.domain(hu(n,e>1?{floor:function(e){while(u(e=t.floor(e)))e=Jl(e-1);return e},ceil:function(e){while(u(e=t.ceil(e)))e=Jl(+e+1);return e}}:t))},r.ticks=function(t,e){var n=su(r.domain()),o=null==t?i(n,10):"number"===typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Jl(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Zl(t.copy(),e,n)},yu(r,t)}function Jl(t){return new Date(t)}Xl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Kl:Vl,Kl.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Kl.toString=Vl.toString,Ye.second=Je(function(t){return new Ve(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Ye.seconds=Ye.second.range,Ye.seconds.utc=Ye.second.utc.range,Ye.minute=Je(function(t){return new Ve(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Ye.minutes=Ye.minute.range,Ye.minutes.utc=Ye.minute.utc.range,Ye.hour=Je(function(t){var e=t.getTimezoneOffset()/60;return new Ve(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Ye.hours=Ye.hour.range,Ye.hours.utc=Ye.hour.utc.range,Ye.month=Je(function(t){return t=Ye.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Ye.months=Ye.month.range,Ye.months.utc=Ye.month.utc.range;var Ql=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ts=[[Ye.second,1],[Ye.second,5],[Ye.second,15],[Ye.second,30],[Ye.minute,1],[Ye.minute,5],[Ye.minute,15],[Ye.minute,30],[Ye.hour,1],[Ye.hour,3],[Ye.hour,6],[Ye.hour,12],[Ye.day,1],[Ye.day,2],[Ye.week,1],[Ye.month,1],[Ye.month,3],[Ye.year,1]],es=Xl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",cr]]),ns={range:function(t,e,n){return o.range(Math.ceil(t/n)*n,+e,n).map(Jl)},floor:D,ceil:D};ts.year=Ye.year,Ye.scale=function(){return Zl(o.scale.linear(),ts,es)};var rs=ts.map(function(t){return[t[0].utc,t[1]]}),is=Yl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",cr]]);function os(t){return JSON.parse(t.responseText)}function as(t){var e=l.createRange();return e.selectNode(l.body),e.createContextualFragment(t.responseText)}rs.year=Ye.year.utc,Ye.scale.utc=function(){return Zl(o.scale.linear(),rs,is)},o.text=Ae(function(t){return t.responseText}),o.json=function(t,e){return Ce(t,"application/json",os,e)},o.html=function(t,e){return Ce(t,"text/html",as,e)},o.xml=Ae(function(t){return t.responseXML}),this.d3=o,r=o,i="function"===typeof r?r.call(e,n,e,t):r,void 0===i||(t.exports=i)}()},"bG/2":function(t,e,n){var r=n("PHqh"),i=n("WcO1").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?u(t):i(r(t))}},bN1p:function(t,e){t.exports={}},bUqO:function(t,e,n){t.exports=!n("zgIt")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},d075:function(t,e,n){var r=n("OzIq").document;t.exports=r&&r.documentElement},fU25:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},fx22:function(t,e,n){for(var r=n("WgSQ"),i=n("Qh14"),o=n("R3AP"),a=n("OzIq"),u=n("2p1q"),l=n("bN1p"),s=n("kkCw"),c=s("iterator"),f=s("toStringTag"),h=l.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=i(d),g=0;g<p.length;g++){var v,y=p[g],m=d[y],b=a[y],x=b&&b.prototype;if(x&&(x[c]||u(x,c,h),x[f]||u(x,f,y),l[y]=h,m))for(v in r)x[v]||o(x,v,r[v],!0)}},g36u:function(t,e,n){var r=n("OzIq"),i=n("Sejc").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,u=r.Promise,l="process"==n("ydD5")(a);t.exports=function(){var t,e,n,s=function(){var r,i;l&&(r=a.domain)&&r.exit();while(t){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(l)n=function(){a.nextTick(s)};else if(!o||r.navigator&&r.navigator.standalone)if(u&&u.resolve){var c=u.resolve();n=function(){c.then(s)}}else n=function(){i.call(r,s)};else{var f=!0,h=document.createTextNode("");new o(s).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},jhxf:function(t,e,n){var r=n("UKM+"),i=n("OzIq").document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},kkCw:function(t,e,n){var r=n("VWgF")("wks"),i=n("ulTY"),o=n("OzIq").Symbol,a="function"==typeof o,u=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};u.store=r},lDLk:function(t,e,n){var r=n("DIVP"),i=n("xZa+"),o=n("s4j0"),a=Object.defineProperty;e.f=n("bUqO")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},mZON:function(t,e,n){var r=n("VWgF")("keys"),i=n("ulTY");t.exports=function(t){return r[t]||(r[t]=i(t))}},nphH:function(t,e,n){var r=n("DIVP"),i=n("UKM+"),o=n("w6Dh");t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},oeih:function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},ot5s:function(t,e,n){var r=n("PHqh"),i=n("BbyF"),o=n("zo/l");t.exports=function(t){return function(e,n,a){var u,l=r(e),s=i(l.length),c=o(a,s);if(t&&n!=n){while(s>c)if(u=l[c++],u!=u)return!0}else for(;s>c;c++)if((t||c in l)&&l[c]===n)return t||c||0;return!t&&-1}}},qkyc:function(t,e,n){var r=n("kkCw")("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},rFzY:function(t,e,n){var r=n("XSOZ");t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},s4j0:function(t,e,n){var r=n("UKM+");t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},twxM:function(t,e,n){var r=n("lDLk"),i=n("DIVP"),o=n("Qh14");t.exports=n("bUqO")?Object.defineProperties:function(t,e){i(t);var n,a=o(e),u=a.length,l=0;while(u>l)r.f(t,n=a[l++],e[n]);return t}},uc2A:function(t,e,n){"use strict";var r=n("V3l/"),i=n("Ds5P"),o=n("R3AP"),a=n("2p1q"),u=n("WBcL"),l=n("bN1p"),s=n("IRJ3"),c=n("yYvK"),f=n("KOrd"),h=n("kkCw")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",g="keys",v="values",y=function(){return this};t.exports=function(t,e,n,m,b,x,_){s(n,e,m);var w,M,S,k=function(t){if(!d&&t in C)return C[t];switch(t){case g:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},O=e+" Iterator",E=b==v,A=!1,C=t.prototype,T=C[h]||C[p]||b&&C[b],P=!d&&T||k(b),j=b?E?k("entries"):P:void 0,N="Array"==e&&C.entries||T;if(N&&(S=f(N.call(new t)),S!==Object.prototype&&S.next&&(c(S,O,!0),r||u(S,h)||a(S,h,y))),E&&T&&T.name!==v&&(A=!0,P=function(){return T.call(this)}),r&&!_||!d&&!A&&C[h]||a(C,h,P),l[e]=P,l[O]=y,b)if(w={values:E?P:k(v),keys:x?P:k(g),entries:j},_)for(M in w)M in C||o(C,M,w[M]);else i(i.P+i.F*(d||A),e,w);return w}},ulTY:function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},vmSO:function(t,e,n){var r=n("rFzY"),i=n("XvUs"),o=n("9vb1"),a=n("DIVP"),u=n("BbyF"),l=n("SHe9"),s={},c={};e=t.exports=function(t,e,n,f,h){var d,p,g,v,y=h?function(){return t}:l(t),m=r(n,f,e?2:1),b=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(d=u(t.length);d>b;b++)if(v=e?m(a(p=t[b])[0],p[1]):m(t[b]),v===s||v===c)return v}else for(g=y.call(t);!(p=g.next()).done;)if(v=i(g,m,p.value,e),v===s||v===c)return v};e.BREAK=s,e.RETURN=c},w6Dh:function(t,e,n){"use strict";var r=n("XSOZ");function i(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},wC1N:function(t,e,n){var r=n("ydD5"),i=n("kkCw")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},x9zv:function(t,e,n){var r=n("Y1aA"),i=n("fU25"),o=n("PHqh"),a=n("s4j0"),u=n("WBcL"),l=n("xZa+"),s=Object.getOwnPropertyDescriptor;e.f=n("bUqO")?s:function(t,e){if(t=o(t),e=a(e,!0),l)try{return s(t,e)}catch(t){}if(u(t,e))return i(!r.f.call(t,e),t[e])}},"xZa+":function(t,e,n){t.exports=!n("bUqO")&&!n("zgIt")(function(){return 7!=Object.defineProperty(n("jhxf")("div"),"a",{get:function(){return 7}}).a})},y9m4:function(t,e,n){"use strict";var r,i,o,a,u=n("V3l/"),l=n("OzIq"),s=n("rFzY"),c=n("wC1N"),f=n("Ds5P"),h=n("UKM+"),d=n("XSOZ"),p=n("9GpA"),g=n("vmSO"),v=n("7O1s"),y=n("Sejc").set,m=n("g36u")(),b=n("w6Dh"),x=n("SDXa"),_=n("nphH"),w="Promise",M=l.TypeError,S=l.process,k=l[w],O="process"==c(S),E=function(){},A=i=b.f,C=!!function(){try{var t=k.resolve(1),e=(t.constructor={})[n("kkCw")("species")]=function(t){t(E,E)};return(O||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof e}catch(t){}}(),T=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,u=e.resolve,l=e.reject,s=e.domain;try{a?(i||(2==t._h&&L(t),t._h=1),!0===a?n=r:(s&&s.enter(),n=a(r),s&&s.exit()),n===e.promise?l(M("Promise-chain cycle")):(o=T(n))?o.call(n,u,l):u(n)):l(r)}catch(t){l(t)}};while(n.length>o)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){y.call(l,function(){var e,n,r,i=t._v,o=N(t);if(o&&(e=x(function(){O?S.emit("unhandledRejection",i,t):(n=l.onunhandledrejection)?n({promise:t,reason:i}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=O||N(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){y.call(l,function(){var e;O?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},D=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw M("Promise can't be resolved itself");(e=T(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,s(D,r,1),s(R,r,1))}catch(t){R.call(r,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};C||(k=function(t){p(this,k,w,"_h"),d(t),r.call(this);try{t(s(D,this,1),s(R,this,1))}catch(t){R.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n("A16L")(k.prototype,{then:function(t,e){var n=A(v(this,k));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=O?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=s(D,t,1),this.reject=s(R,t,1)},b.f=A=function(t){return t===k||t===a?new o(t):i(t)}),f(f.G+f.W+f.F*!C,{Promise:k}),n("yYvK")(k,w),n("CEne")(w),a=n("7gX0")[w],f(f.S+f.F*!C,w,{reject:function(t){var e=A(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(u||!C),w,{resolve:function(t){return _(u&&this===a?k:this,t)}}),f(f.S+f.F*!(C&&n("qkyc")(function(t){k.all(t)["catch"](E)})),w,{all:function(t){var e=this,n=A(e),r=n.resolve,i=n.reject,o=x(function(){var n=[],o=0,a=1;g(t,!1,function(t){var u=o++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[u]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=A(e),r=n.reject,i=x(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},yYvK:function(t,e,n){var r=n("lDLk").f,i=n("WBcL"),o=n("kkCw")("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},ydD5:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},zgIt:function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},"zo/l":function(t,e,n){var r=n("oeih"),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}}});
//# sourceMappingURL=vendor.f8d56d59.js.map